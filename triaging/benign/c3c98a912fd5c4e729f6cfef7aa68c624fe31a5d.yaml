statistics:
  total_files: 1
  skipped_files: 0.0
  processed_objects: 1
  malicious_objects: 0
details:
- path: .repo_cache/malicious_repos/pypi_malregistry/awscl/1.27.67/awscl-1.27.67/awscl-1.27.67/awscli/alias.py
  contents:
  - name: AliasLoader.__init__
    score: 0.0
    code: |-
      def __init__(self,
                       alias_filename=os.path.expanduser(
                           os.path.join('~', '.aws', 'cli', 'alias'))):
              """Interface for loading and interacting with alias file

              :param alias_filename: The name of the file to load aliases from.
                  This file must be an INI file.
              """
              self._filename = alias_filename
              self._aliases = None
    tokens: resume load_fast alias_filename load_fast self store_attr _filename load_const load_fast self store_attr _aliases return_const None
    hash: b7aec079fc62937c73f45ca7b783ad71c489ad238ba39b3c337d97bef496a54e
sources:
  .repo_cache/malicious_repos/pypi_malregistry/awscl/1.27.67/awscl-1.27.67/awscl-1.27.67/awscli/alias.py: IyBDb3B5cmlnaHQgMjAxNiBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgojCiMgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIikuIFlvdQojIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBBIGNvcHkgb2YKIyB0aGUgTGljZW5zZSBpcyBsb2NhdGVkIGF0CiMKIyAgICAgaHR0cDovL2F3cy5hbWF6b24uY29tL2FwYWNoZTIuMC8KIwojIG9yIGluIHRoZSAibGljZW5zZSIgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMKIyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRgojIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYwojIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCmltcG9ydCBsb2dnaW5nCmltcG9ydCBvcwppbXBvcnQgc2hsZXgKaW1wb3J0IHN1YnByb2Nlc3MKCmZyb20gYm90b2NvcmUuY29uZmlnbG9hZGVyIGltcG9ydCByYXdfY29uZmlnX3BhcnNlCgpmcm9tIGF3c2NsaS5jb21wYXQgaW1wb3J0IGNvbXBhdF9zaGVsbF9xdW90ZQpmcm9tIGF3c2NsaS5jb21tYW5kcyBpbXBvcnQgQ0xJQ29tbWFuZApmcm9tIGF3c2NsaS51dGlscyBpbXBvcnQgZW1pdF90b3BfbGV2ZWxfYXJnc19wYXJzZWRfZXZlbnQKCgpMT0cgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKCgpjbGFzcyBJbnZhbGlkQWxpYXNFeGNlcHRpb24oRXhjZXB0aW9uKToKICAgIHBhc3MKCgpjbGFzcyBBbGlhc0xvYWRlcihvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsCiAgICAgICAgICAgICAgICAgYWxpYXNfZmlsZW5hbWU9b3MucGF0aC5leHBhbmR1c2VyKAogICAgICAgICAgICAgICAgICAgICBvcy5wYXRoLmpvaW4oJ34nLCAnLmF3cycsICdjbGknLCAnYWxpYXMnKSkpOgogICAgICAgICIiIkludGVyZmFjZSBmb3IgbG9hZGluZyBhbmQgaW50ZXJhY3Rpbmcgd2l0aCBhbGlhcyBmaWxlCgogICAgICAgIDpwYXJhbSBhbGlhc19maWxlbmFtZTogVGhlIG5hbWUgb2YgdGhlIGZpbGUgdG8gbG9hZCBhbGlhc2VzIGZyb20uCiAgICAgICAgICAgIFRoaXMgZmlsZSBtdXN0IGJlIGFuIElOSSBmaWxlLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX2ZpbGVuYW1lID0gYWxpYXNfZmlsZW5hbWUKICAgICAgICBzZWxmLl9hbGlhc2VzID0gTm9uZQoKICAgIGRlZiBfYnVpbGRfYWxpYXNlcyhzZWxmKToKICAgICAgICBzZWxmLl9hbGlhc2VzID0gc2VsZi5fbG9hZF9hbGlhc2VzKCkKICAgICAgICBzZWxmLl9jbGVhbnVwX2FsaWFzX3ZhbHVlcyhzZWxmLl9hbGlhc2VzLmdldCgndG9wbGV2ZWwnLCB7fSkpCgogICAgZGVmIF9sb2FkX2FsaWFzZXMoc2VsZik6CiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoc2VsZi5fZmlsZW5hbWUpOgogICAgICAgICAgICByZXR1cm4gcmF3X2NvbmZpZ19wYXJzZSgKICAgICAgICAgICAgICAgIHNlbGYuX2ZpbGVuYW1lLCBwYXJzZV9zdWJzZWN0aW9ucz1GYWxzZSkKICAgICAgICByZXR1cm4geyd0b3BsZXZlbCc6IHt9fQoKICAgIGRlZiBfY2xlYW51cF9hbGlhc192YWx1ZXMoc2VsZiwgYWxpYXNlcyk6CiAgICAgICAgZm9yIGFsaWFzIGluIGFsaWFzZXM6CiAgICAgICAgICAgICMgQmVnaW5uaW5nIGFuZCBlbmQgbGluZSBzZXBhcmF0b3JzIHNob3VsZCBub3QgYmUgaW5jbHVkZWQKICAgICAgICAgICAgIyBpbiB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIGFsaWFzIHZhbHVlLgogICAgICAgICAgICBhbGlhc2VzW2FsaWFzXSA9IGFsaWFzZXNbYWxpYXNdLnN0cmlwKCkKCiAgICBkZWYgZ2V0X2FsaWFzZXMoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fYWxpYXNlcyBpcyBOb25lOgogICAgICAgICAgICBzZWxmLl9idWlsZF9hbGlhc2VzKCkKICAgICAgICByZXR1cm4gc2VsZi5fYWxpYXNlcy5nZXQoJ3RvcGxldmVsJywge30pCgoKY2xhc3MgQWxpYXNDb21tYW5kSW5qZWN0b3Iob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzZXNzaW9uLCBhbGlhc19sb2FkZXIpOgogICAgICAgICIiIkluamVjdHMgYWxpYXMgY29tbWFuZHMgZm9yIGEgY29tbWFuZCB0YWJsZQoKICAgICAgICA6dHlwZSBzZXNzaW9uOiBib3RvY29yZS5zZXNzaW9uLlNlc3Npb24KICAgICAgICA6cGFyYW0gc2Vzc2lvbjogVGhlIGJvdG9jb3JlIHNlc3Npb24KCiAgICAgICAgOnR5cGUgYWxpYXNfbG9hZGVyOiBhd3NjbGkuYWxpYXMuQWxpYXNMb2FkZXIKICAgICAgICA6cGFyYW0gYWxpYXNfbG9hZGVyOiBUaGUgYWxpYXMgbG9hZGVyIHRvIHVzZQogICAgICAgICIiIgogICAgICAgIHNlbGYuX3Nlc3Npb24gPSBzZXNzaW9uCiAgICAgICAgc2VsZi5fYWxpYXNfbG9hZGVyID0gYWxpYXNfbG9hZGVyCgogICAgZGVmIGluamVjdF9hbGlhc2VzKHNlbGYsIGNvbW1hbmRfdGFibGUsIHBhcnNlcik6CiAgICAgICAgZm9yIGFsaWFzX25hbWUsIGFsaWFzX3ZhbHVlIGluIFwKICAgICAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xvYWRlci5nZXRfYWxpYXNlcygpLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGFsaWFzX3ZhbHVlLnN0YXJ0c3dpdGgoJyEnKToKICAgICAgICAgICAgICAgIGFsaWFzX2NtZCA9IEV4dGVybmFsQWxpYXNDb21tYW5kKGFsaWFzX25hbWUsIGFsaWFzX3ZhbHVlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VydmljZV9hbGlhc19jbWRfYXJncyA9IFsKICAgICAgICAgICAgICAgICAgICBhbGlhc19uYW1lLCBhbGlhc192YWx1ZSwgc2VsZi5fc2Vzc2lvbiwgY29tbWFuZF90YWJsZSwKICAgICAgICAgICAgICAgICAgICBwYXJzZXIKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICMgSWYgdGhlIGFsaWFzIG5hbWUgbWF0Y2hlcyBzb21ldGhpbmcgYWxyZWFkeSBpbiB0aGUKICAgICAgICAgICAgICAgICMgY29tbWFuZCB0YWJsZSBwcm92aWRlIHRoZSBjb21tYW5kIGl0IGlzIGFib3V0CiAgICAgICAgICAgICAgICAjIHRvIGNsb2JiZXIgYXMgYSBwb3NzaWJsZSByZWZlcmVuY2UgdGhhdCBpdCB3aWxsCiAgICAgICAgICAgICAgICAjIG5lZWQgdG8gcHJveHkgdG8uCiAgICAgICAgICAgICAgICBpZiBhbGlhc19uYW1lIGluIGNvbW1hbmRfdGFibGU6CiAgICAgICAgICAgICAgICAgICAgc2VydmljZV9hbGlhc19jbWRfYXJncy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRfdGFibGVbYWxpYXNfbmFtZV0pCiAgICAgICAgICAgICAgICBhbGlhc19jbWQgPSBTZXJ2aWNlQWxpYXNDb21tYW5kKCpzZXJ2aWNlX2FsaWFzX2NtZF9hcmdzKQogICAgICAgICAgICBjb21tYW5kX3RhYmxlW2FsaWFzX25hbWVdID0gYWxpYXNfY21kCgoKY2xhc3MgQmFzZUFsaWFzQ29tbWFuZChDTElDb21tYW5kKToKICAgIF9VTkRPQ1VNRU5URUQgPSBUcnVlCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGFsaWFzX25hbWUsIGFsaWFzX3ZhbHVlKToKICAgICAgICAiIiJCYXNlIGNsYXNzIGZvciBhbGlhcyBjb21tYW5kCgogICAgICAgIDp0eXBlIGFsaWFzX25hbWU6IHN0cmluZwogICAgICAgIDpwYXJhbSBhbGlhc19uYW1lOiBUaGUgbmFtZSBvZiB0aGUgYWxpYXMKCiAgICAgICAgOnR5cGUgYWxpYXNfdmFsdWU6IHN0cmluZwogICAgICAgIDpwYXJhbSBhbGlhc192YWx1ZTogVGhlIHBhcnNlZCB2YWx1ZSBvZiB0aGUgYWxpYXMuIFRoaXMgY2FuIGJlCiAgICAgICAgICAgIHJldHJpZXZlZCBmcm9tIGBBbGlhc0xvYWRlci5nZXRfYWxpYXNlcygpW2FsaWFzX25hbWVdYAogICAgICAgICIiIgogICAgICAgIHNlbGYuX2FsaWFzX25hbWUgPSBhbGlhc19uYW1lCiAgICAgICAgc2VsZi5fYWxpYXNfdmFsdWUgPSBhbGlhc192YWx1ZQoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBhcmdzLCBwYXJzZWRfYXJncyk6CiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcignX19jYWxsX18nKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG5hbWUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2FsaWFzX25hbWUKCiAgICBAbmFtZS5zZXR0ZXIKICAgIGRlZiBuYW1lKHNlbGYsIHZhbHVlKToKICAgICAgICBzZWxmLl9hbGlhc19uYW1lID0gdmFsdWUKCgpjbGFzcyBTZXJ2aWNlQWxpYXNDb21tYW5kKEJhc2VBbGlhc0NvbW1hbmQpOgogICAgVU5TVVBQT1JURURfR0xPQkFMX1BBUkFNRVRFUlMgPSBbCiAgICAgICAgJ2RlYnVnJywKICAgICAgICAncHJvZmlsZScKICAgIF0KCiAgICBkZWYgX19pbml0X18oc2VsZiwgYWxpYXNfbmFtZSwgYWxpYXNfdmFsdWUsIHNlc3Npb24sIGNvbW1hbmRfdGFibGUsCiAgICAgICAgICAgICAgICAgcGFyc2VyLCBzaGFkb3dfcHJveHlfY29tbWFuZD1Ob25lKToKICAgICAgICAiIiJDb21tYW5kIGZvciBhIGB0b3BsZXZlbGAgc3ViY29tbWFuZCBhbGlhcwoKICAgICAgICA6dHlwZSBhbGlhc19uYW1lOiBzdHJpbmcKICAgICAgICA6cGFyYW0gYWxpYXNfbmFtZTogVGhlIG5hbWUgb2YgdGhlIGFsaWFzCgogICAgICAgIDp0eXBlIGFsaWFzX3ZhbHVlOiBzdHJpbmcKICAgICAgICA6cGFyYW0gYWxpYXNfdmFsdWU6IFRoZSBwYXJzZWQgdmFsdWUgb2YgdGhlIGFsaWFzLiBUaGlzIGNhbiBiZQogICAgICAgICAgICByZXRyaWV2ZWQgZnJvbSBgQWxpYXNMb2FkZXIuZ2V0X2FsaWFzZXMoKVthbGlhc19uYW1lXWAKCiAgICAgICAgOnR5cGUgc2Vzc2lvbjogYm90b2NvcmUuc2Vzc2lvbi5TZXNzaW9uCiAgICAgICAgOnBhcmFtIHNlc3Npb246IFRoZSBib3RvY29yZSBzZXNzaW9uCgogICAgICAgIDp0eXBlIGNvbW1hbmRfdGFibGU6IGRpY3QKICAgICAgICA6cGFyYW0gY29tbWFuZF90YWJsZTogVGhlIGNvbW1hbmQgdGFibGUgY29udGFpbmluZyBhbGwgb2YgdGhlCiAgICAgICAgICAgIHBvc3NpYmxlIHNlcnZpY2UgY29tbWFuZCBvYmplY3RzIHRoYXQgYSBwYXJ0aWN1bGFyIGFsaWFzIGNvdWxkCiAgICAgICAgICAgIHJlZGlyZWN0IHRvLgoKICAgICAgICA6dHlwZSBwYXJzZXI6IGF3c2NsaS5hcmdwYXJzZXIuTWFpbkFyZ1BhcnNlcgogICAgICAgIDpwYXJhbSBwYXJzZXI6IFRoZSBwYXJzZXIgdG8gcGFyc2UgY29tbWFuZHMgcHJvdmlkZWQgYXQgdGhlIHRvcCBsZXZlbAogICAgICAgICAgICBvZiBhIENMSSBjb21tYW5kIHdoaWNoIGluY2x1ZGVzIHNlcnZpY2UgY29tbWFuZHMgYW5kIGdsb2JhbAogICAgICAgICAgICBwYXJhbWV0ZXJzLiBUaGlzIGlzIHVzZWQgdG8gcGFyc2UgdGhlIHNlcnZpY2UgY29tbWFuZCBhbmQgYW55CiAgICAgICAgICAgIGdsb2JhbCBwYXJhbWV0ZXJzIGZyb20gdGhlIGFsaWFzJ3MgdmFsdWUuCgogICAgICAgIDp0eXBlIHNoYWRvd19wcm94eV9jb21tYW5kOiBDTElDb21tYW5kCiAgICAgICAgOnBhcmFtIHNoYWRvd19wcm94eV9jb21tYW5kOiBBIGJ1aWx0LWluIGNvbW1hbmQgdGhhdAogICAgICAgICAgICBwb3RlbnRpYWxseSBzaGFkb3dzIHRoZSBhbGlhcyBpbiBuYW1lLiBJZiB0aGUgYWxpYXMKICAgICAgICAgICAgcmVmZXJlbmNlcyB0aGlzIGNvbW1hbmQgaW4gaXRzIHZhbHVlLCB0aGUgYWxpYXMgc2hvdWxkIHByb3h5CiAgICAgICAgICAgIHRvIHRoaXMgY29tbWFuZCBhcyBvcHBvc2VkIHRvIHByb3h5IHRvIGl0c2VsZiBpbiB0aGUgY29tbWFuZAogICAgICAgICAgICB0YWJsZQogICAgICAgICIiIgogICAgICAgIHN1cGVyKFNlcnZpY2VBbGlhc0NvbW1hbmQsIHNlbGYpLl9faW5pdF9fKGFsaWFzX25hbWUsIGFsaWFzX3ZhbHVlKQogICAgICAgIHNlbGYuX3Nlc3Npb24gPSBzZXNzaW9uCiAgICAgICAgc2VsZi5fY29tbWFuZF90YWJsZSA9IGNvbW1hbmRfdGFibGUKICAgICAgICBzZWxmLl9wYXJzZXIgPSBwYXJzZXIKICAgICAgICBzZWxmLl9zaGFkb3dfcHJveHlfY29tbWFuZCA9IHNoYWRvd19wcm94eV9jb21tYW5kCgogICAgZGVmIF9fY2FsbF9fKHNlbGYsIGFyZ3MsIHBhcnNlZF9nbG9iYWxzKToKICAgICAgICBhbGlhc19hcmdzID0gc2VsZi5fZ2V0X2FsaWFzX2FyZ3MoKQogICAgICAgIHBhcnNlZF9hbGlhc19hcmdzLCByZW1haW5pbmcgPSBzZWxmLl9wYXJzZXIucGFyc2Vfa25vd25fYXJncygKICAgICAgICAgICAgYWxpYXNfYXJncykKICAgICAgICBzZWxmLl91cGRhdGVfcGFyc2VkX2dsb2JhbHMocGFyc2VkX2FsaWFzX2FyZ3MsIHBhcnNlZF9nbG9iYWxzKQogICAgICAgICMgVGFrZSBhbnkgb2YgdGhlIHJlbWFpbmluZyBhcmd1bWVudHMgdGhhdCB3ZXJlIG5vdCBwYXJzZWQgb3V0IGFuZAogICAgICAgICMgcHJlcGVuZCB0aGVtIHRvIHRoZSByZW1haW5pbmcgYXJncyBwcm92aWRlZCB0byB0aGUgYWxpYXMuCiAgICAgICAgcmVtYWluaW5nLmV4dGVuZChhcmdzKQogICAgICAgIExPRy5kZWJ1ZygKICAgICAgICAgICAgJ0FsaWFzICVyIHBhc3Npbmcgb24gYXJndW1lbnRzOiAlciB0byAlciBjb21tYW5kJywKICAgICAgICAgICAgc2VsZi5fYWxpYXNfbmFtZSwgcmVtYWluaW5nLCBwYXJzZWRfYWxpYXNfYXJncy5jb21tYW5kKQogICAgICAgICMgUGFzcyB0aGUgdXBkYXRlIHJlbWFpbmluZyBhcmdzIGFuZCBnbG9iYWwgYXJncyB0byB0aGUgc2VydmljZSBjb21tYW5kCiAgICAgICAgIyB0aGUgYWxpYXMgcHJveGllZCB0by4KICAgICAgICBjb21tYW5kID0gc2VsZi5fY29tbWFuZF90YWJsZVtwYXJzZWRfYWxpYXNfYXJncy5jb21tYW5kXQogICAgICAgIGlmIHNlbGYuX3NoYWRvd19wcm94eV9jb21tYW5kOgogICAgICAgICAgICBzaGFkb3dfbmFtZSA9IHNlbGYuX3NoYWRvd19wcm94eV9jb21tYW5kLm5hbWUKICAgICAgICAgICAgIyBVc2UgdGhlIHNoYWRvdyBjb21tYW5kIG9ubHkgaWYgdGhlIGFsaWFzZXMgdmFsdWUKICAgICAgICAgICAgIyB1c2VzIHRoYXQgY29tbWFuZCBpbmRpY2F0aW5nIGl0IG5lZWRzIHRvIHByb3h5IG92ZXIgdG8KICAgICAgICAgICAgIyBhIGJ1aWx0LWluIGNvbW1hbmQuCiAgICAgICAgICAgIGlmIHNoYWRvd19uYW1lID09IHBhcnNlZF9hbGlhc19hcmdzLmNvbW1hbmQ6CiAgICAgICAgICAgICAgICBMT0cuZGVidWcoCiAgICAgICAgICAgICAgICAgICAgJ1VzaW5nIHNoYWRvd2VkIGNvbW1hbmQgb2JqZWN0OiAlcyAnCiAgICAgICAgICAgICAgICAgICAgJ2ZvciBhbGlhczogJXMnLCBzZWxmLl9zaGFkb3dfcHJveHlfY29tbWFuZCwKICAgICAgICAgICAgICAgICAgICBzZWxmLl9hbGlhc19uYW1lCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBjb21tYW5kID0gc2VsZi5fc2hhZG93X3Byb3h5X2NvbW1hbmQKICAgICAgICByZXR1cm4gY29tbWFuZChyZW1haW5pbmcsIHBhcnNlZF9nbG9iYWxzKQoKICAgIGRlZiBfZ2V0X2FsaWFzX2FyZ3Moc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBhbGlhc19hcmdzID0gc2hsZXguc3BsaXQoc2VsZi5fYWxpYXNfdmFsdWUpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZToKICAgICAgICAgICAgcmFpc2UgSW52YWxpZEFsaWFzRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgJ1ZhbHVlIG9mIGFsaWFzICIlcyIgY291bGQgbm90IGJlIHBhcnNlZC4gJwogICAgICAgICAgICAgICAgJ1JlY2VpdmVkIGVycm9yOiAlcyB3aGVuIHBhcnNpbmc6XG4lcycgJSAoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWxpYXNfbmFtZSwgZSwgc2VsZi5fYWxpYXNfdmFsdWUpCiAgICAgICAgICAgICkKCiAgICAgICAgYWxpYXNfYXJncyA9IFthcmcuc3RyaXAob3MubGluZXNlcCkgZm9yIGFyZyBpbiBhbGlhc19hcmdzXQogICAgICAgIExPRy5kZWJ1ZygKICAgICAgICAgICAgJ0V4cGFuZGVkIHN1YmNvbW1hbmQgYWxpYXMgJXIgd2l0aCB2YWx1ZTogJXIgdG86ICVyJywKICAgICAgICAgICAgc2VsZi5fYWxpYXNfbmFtZSwgc2VsZi5fYWxpYXNfdmFsdWUsIGFsaWFzX2FyZ3MKICAgICAgICApCiAgICAgICAgcmV0dXJuIGFsaWFzX2FyZ3MKCiAgICBkZWYgX3VwZGF0ZV9wYXJzZWRfZ2xvYmFscyhzZWxmLCBwYXJzZWRfYWxpYXNfYXJncywgcGFyc2VkX2dsb2JhbHMpOgogICAgICAgIGdsb2JhbF9wYXJhbXNfdG9fdXBkYXRlID0gc2VsZi5fZ2V0X2dsb2JhbF9wYXJhbWV0ZXJzX3RvX3VwZGF0ZSgKICAgICAgICAgICAgcGFyc2VkX2FsaWFzX2FyZ3MpCiAgICAgICAgIyBFbWl0IHRoZSB0b3AgbGV2ZWwgYXJncyBwYXJzZWQgZXZlbnQgdG8gZW5zdXJlIGFsbCBwb3NzaWJsZQogICAgICAgICMgY3VzdG9taXphdGlvbnMgdGhhdCB0eXBpY2FsbHkgZ2V0IGFwcGxpZWQgYXJlIGFwcGxpZWQgdG8gdGhlCiAgICAgICAgIyBnbG9iYWwgcGFyYW1ldGVycyBwcm92aWRlZCBpbiB0aGUgYWxpYXMgYmVmb3JlIHVwZGF0aW5nCiAgICAgICAgIyB0aGUgb3JpZ2luYWwgcHJvdmlkZWQgZ2xvYmFsIHBhcmFtZXRlciB2YWx1ZXMKICAgICAgICAjIGFuZCBwYXNzaW5nIHRob3NlIG9udG8gc3Vic2VxdWVudCBjb21tYW5kcy4KICAgICAgICBlbWl0X3RvcF9sZXZlbF9hcmdzX3BhcnNlZF9ldmVudChzZWxmLl9zZXNzaW9uLCBwYXJzZWRfYWxpYXNfYXJncykKICAgICAgICBmb3IgcGFyYW1fbmFtZSBpbiBnbG9iYWxfcGFyYW1zX3RvX3VwZGF0ZToKICAgICAgICAgICAgdXBkYXRlZF9wYXJhbV92YWx1ZSA9IGdldGF0dHIocGFyc2VkX2FsaWFzX2FyZ3MsIHBhcmFtX25hbWUpCiAgICAgICAgICAgIHNldGF0dHIocGFyc2VkX2dsb2JhbHMsIHBhcmFtX25hbWUsIHVwZGF0ZWRfcGFyYW1fdmFsdWUpCgogICAgZGVmIF9nZXRfZ2xvYmFsX3BhcmFtZXRlcnNfdG9fdXBkYXRlKHNlbGYsIHBhcnNlZF9hbGlhc19hcmdzKToKICAgICAgICAjIFJldHJpZXZlIGEgbGlzdCBvZiBnbG9iYWwgcGFyYW1ldGVycyB0aGF0IHRoZSBuZXdseSBwYXJzZWQgYXJncwogICAgICAgICMgZnJvbSB0aGUgYWxpYXMgd2lsbCBoYXZlIHRvIGNsb2JiZXIgZnJvbSB0aGUgb3JpZ2luYWxseSBwcm92aWRlZAogICAgICAgICMgcGFyc2VkIGdsb2JhbHMuCiAgICAgICAgZ2xvYmFsX3BhcmFtc190b191cGRhdGUgPSBbXQogICAgICAgIGZvciBwYXJzZWRfcGFyYW0sIHZhbHVlIGluIHZhcnMocGFyc2VkX2FsaWFzX2FyZ3MpLml0ZW1zKCk6CiAgICAgICAgICAgICMgVG8gZGV0ZXJtaW5lIHdoaWNoIHBhcmFtZXRlcnMgaW4gdGhlIGFsaWFzIHdlcmUgZ2xvYmFsIHZhbHVlcwogICAgICAgICAgICAjIGNvbXBhcmUgdGhlIHBhcnNlZCBhbGlhcyBwYXJhbWV0ZXJzIHRvIHRoZSBkZWZhdWx0IGFzCiAgICAgICAgICAgICMgc3BlY2lmaWVkIGJ5IHRoZSBwYXJzZXIuIElmIHRoZSBwYXJzZWQgdmFsdWVzIGZyb20gdGhlIGFsaWFzCiAgICAgICAgICAgICMgZGlmZmVycyBmcm9tIHRoZSBkZWZhdWx0IHZhbHVlIGluIHRoZSBwYXJzZXIsCiAgICAgICAgICAgICMgdGhhdCBnbG9iYWwgcGFyYW1ldGVyIG11c3QgaGF2ZSBiZWVuIHByb3ZpZGVkIGluIHRoZSBhbGlhcy4KICAgICAgICAgICAgaWYgc2VsZi5fcGFyc2VyLmdldF9kZWZhdWx0KHBhcnNlZF9wYXJhbSkgIT0gdmFsdWU6CiAgICAgICAgICAgICAgICBpZiBwYXJzZWRfcGFyYW0gaW4gc2VsZi5VTlNVUFBPUlRFRF9HTE9CQUxfUEFSQU1FVEVSUzoKICAgICAgICAgICAgICAgICAgICByYWlzZSBJbnZhbGlkQWxpYXNFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICdHbG9iYWwgcGFyYW1ldGVyICItLSVzIiBkZXRlY3RlZCBpbiBhbGlhcyAiJXMiICcKICAgICAgICAgICAgICAgICAgICAgICAgJ3doaWNoIGlzIG5vdCBzdXBwb3J0IGluIHN1YmNvbW1hbmQgYWxpYXNlcy4nICUgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkX3BhcmFtLCBzZWxmLl9hbGlhc19uYW1lKSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsX3BhcmFtc190b191cGRhdGUuYXBwZW5kKHBhcnNlZF9wYXJhbSkKICAgICAgICByZXR1cm4gZ2xvYmFsX3BhcmFtc190b191cGRhdGUKCgpjbGFzcyBFeHRlcm5hbEFsaWFzQ29tbWFuZChCYXNlQWxpYXNDb21tYW5kKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhbGlhc19uYW1lLCBhbGlhc192YWx1ZSwgaW52b2tlcj1zdWJwcm9jZXNzLmNhbGwpOgogICAgICAgICIiIkNvbW1hbmQgZm9yIGV4dGVybmFsIGFsaWFzZXMKCiAgICAgICAgRXhlY3V0ZXMgY29tbWFuZCBleHRlcm5hbCBvZiBDTEkgYXMgb3Bwb3NlZCB0byBiZWluZyBhIHByb3h5CiAgICAgICAgdG8gYW5vdGhlciBjb21tYW5kLgoKICAgICAgICA6dHlwZSBhbGlhc19uYW1lOiBzdHJpbmcKICAgICAgICA6cGFyYW0gYWxpYXNfbmFtZTogVGhlIG5hbWUgb2YgdGhlIGFsaWFzCgogICAgICAgIDp0eXBlIGFsaWFzX3ZhbHVlOiBzdHJpbmcKICAgICAgICA6cGFyYW0gYWxpYXNfdmFsdWU6IFRoZSBwYXJzZWQgdmFsdWUgb2YgdGhlIGFsaWFzLiBUaGlzIGNhbiBiZQogICAgICAgICAgICByZXRyaWV2ZWQgZnJvbSBgQWxpYXNMb2FkZXIuZ2V0X2FsaWFzZXMoKVthbGlhc19uYW1lXWAKCiAgICAgICAgOnR5cGUgaW52b2tlcjogY2FsbGFibGUKICAgICAgICA6cGFyYW0gaW52b2tlcjogQ2FsbGFibGUgdG8gcnVuIGFyZ3VtZW50cyBvZiBleHRlcm5hbCBhbGlhcy4gVGhlCiAgICAgICAgICAgIHNpZ25hdHVyZSBzaG91bGQgbWF0Y2ggdGhhdCBvZiBgYHN1YnByb2Nlc3MuY2FsbGBgCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fYWxpYXNfbmFtZSA9IGFsaWFzX25hbWUKICAgICAgICBzZWxmLl9hbGlhc192YWx1ZSA9IGFsaWFzX3ZhbHVlCiAgICAgICAgc2VsZi5faW52b2tlciA9IGludm9rZXIKCiAgICBkZWYgX19jYWxsX18oc2VsZiwgYXJncywgcGFyc2VkX2dsb2JhbHMpOgogICAgICAgIGNvbW1hbmRfY29tcG9uZW50cyA9IFsKICAgICAgICAgICAgc2VsZi5fYWxpYXNfdmFsdWVbMTpdCiAgICAgICAgXQogICAgICAgIGNvbW1hbmRfY29tcG9uZW50cy5leHRlbmQoY29tcGF0X3NoZWxsX3F1b3RlKGEpIGZvciBhIGluIGFyZ3MpCiAgICAgICAgY29tbWFuZCA9ICcgJy5qb2luKGNvbW1hbmRfY29tcG9uZW50cykKICAgICAgICBMT0cuZGVidWcoCiAgICAgICAgICAgICdVc2luZyBleHRlcm5hbCBhbGlhcyAlciB3aXRoIHZhbHVlOiAlciB0byBydW46ICVyJywKICAgICAgICAgICAgc2VsZi5fYWxpYXNfbmFtZSwgc2VsZi5fYWxpYXNfdmFsdWUsIGNvbW1hbmQpCiAgICAgICAgcmV0dXJuIHNlbGYuX2ludm9rZXIoY29tbWFuZCwgc2hlbGw9VHJ1ZSkK
