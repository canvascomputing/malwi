statistics:
  total_files: 1
  skipped_files: 0.0
  processed_objects: 1
  malicious_objects: 0
details:
- path: .repo_cache/malicious_repos/pypi_malregistry/python-aliyun-sdk-core/2.13.36/python-aliyun-sdk-core-2.13.36/python-aliyun-sdk-core-2.13.36/aliyunsdkcore/vendored/requests/packages/urllib3/connection.py
  contents:
  - name: <module>
    score: 0.0
    code: |-
      from __future__ import absolute_import
      import datetime
      import logging
      import os
      import socket
      from socket import error as SocketError, timeout as SocketTimeout
      import warnings
      from .packages import six
      from .packages.six.moves.http_client import HTTPConnection as _HTTPConnection
      from .packages.six.moves.http_client import HTTPException  # noqa: F401

      try:  # Compiled with SSL?
          import ssl
          BaseSSLError = ssl.SSLError
      except (ImportError, AttributeError):  # Platform-specific: No SSL.
          ssl = None

          class BaseSSLError(BaseException):
              pass
    tokens: resume load_const INTEGER load_const import_name __future__ import_from absolute_import store_name absolute_import pop_top load_const INTEGER load_const import_name datetime store_name datetime load_const INTEGER load_const import_name logging store_name logging load_const INTEGER load_const import_name os store_name os load_const INTEGER load_const import_name socket store_name socket load_const INTEGER load_const import_name socket import_from error store_name SocketError import_from timeout store_name SocketTimeout pop_top load_const INTEGER load_const import_name warnings store_name warnings load_const INTEGER load_const import_name packages import_from six store_name six pop_top load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from HTTPConnection store_name _HTTPConnection pop_top load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from HTTPException store_name HTTPException pop_top nop load_const INTEGER load_const import_name ssl store_name ssl load_name ssl load_attr SSLError store_name BaseSSLError nop load_name ConnectionError store_name ConnectionError load_const INTEGER load_const import_name exceptions import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH pop_top load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from match_hostname store_name match_hostname import_from STRING_BASE64_LEN_S_ENT_HIGH store_name STRING_BASE64_LEN_S_ENT_HIGH pop_top load_const INTEGER load_const import_name util.ssl_ import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH import_from ssl_wrap_socket store_name ssl_wrap_socket pop_top load_const INTEGER load_const import_name util import_from connection store_name connection pop_top load_const INTEGER load_const import_name _collections import_from HTTPHeaderDict store_name HTTPHeaderDict pop_top push_null load_name logging load_attr getLogger load_name __name__ call store_name log load_const INTEGER load_const INTEGER load_const build_const_key_map store_name port_by_scheme push_null load_name datetime load_attr date load_const INTEGER load_const INTEGER load_const INTEGER call store_name RECENT_DATE push_null load_build_class load_const OBJECT make_function load_const DummyConnection load_name object call store_name DummyConnection push_null load_build_class load_const OBJECT make_function load_const HTTPConnection load_name _HTTPConnection load_name object call store_name HTTPConnection push_null load_build_class load_const OBJECT make_function load_const HTTPSConnection load_name HTTPConnection call store_name HTTPSConnection push_null load_build_class load_const OBJECT make_function load_const STRING_LEN_S_ENT_HIGH load_name HTTPSConnection call store_name STRING_LEN_S_ENT_HIGH load_const OBJECT make_function store_name _match_hostname load_name ssl pop_jump_if_false TO_NUMBER load_name HTTPSConnection store_name STRING_LEN_S_ENT_HIGH load_name STRING_LEN_S_ENT_HIGH store_name HTTPSConnection return_const None load_name DummyConnection store_name HTTPSConnection return_const None push_exc_info load_name ImportError load_name AttributeError build_tuple check_exc_match pop_jump_if_false TO_NUMBER pop_top load_const store_name ssl push_null load_build_class load_const OBJECT make_function load_const BaseSSLError load_name BaseException call store_name BaseSSLError pop_except jump_backward TO_NUMBER reraise copy pop_except reraise push_exc_info load_name NameError check_exc_match pop_jump_if_false TO_NUMBER pop_top push_null load_build_class load_const OBJECT make_function load_const ConnectionError load_name Exception call store_name ConnectionError pop_except jump_backward TO_NUMBER reraise copy pop_except reraise
    hash: a8fabd6da162daeab25924270ea2598ea88c9c64488a53ed27ae235c09f8850b
sources:
  ? .repo_cache/malicious_repos/pypi_malregistry/python-aliyun-sdk-core/2.13.36/python-aliyun-sdk-core-2.13.36/python-aliyun-sdk-core-2.13.36/aliyunsdkcore/vendored/requests/packages/urllib3/connection.py
  : ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKaW1wb3J0IGRhdGV0aW1lCmltcG9ydCBsb2dnaW5nCmltcG9ydCBvcwppbXBvcnQgc29ja2V0CmZyb20gc29ja2V0IGltcG9ydCBlcnJvciBhcyBTb2NrZXRFcnJvciwgdGltZW91dCBhcyBTb2NrZXRUaW1lb3V0CmltcG9ydCB3YXJuaW5ncwpmcm9tIC5wYWNrYWdlcyBpbXBvcnQgc2l4CmZyb20gLnBhY2thZ2VzLnNpeC5tb3Zlcy5odHRwX2NsaWVudCBpbXBvcnQgSFRUUENvbm5lY3Rpb24gYXMgX0hUVFBDb25uZWN0aW9uCmZyb20gLnBhY2thZ2VzLnNpeC5tb3Zlcy5odHRwX2NsaWVudCBpbXBvcnQgSFRUUEV4Y2VwdGlvbiAgIyBub3FhOiBGNDAxCgp0cnk6ICAjIENvbXBpbGVkIHdpdGggU1NMPwogICAgaW1wb3J0IHNzbAogICAgQmFzZVNTTEVycm9yID0gc3NsLlNTTEVycm9yCmV4Y2VwdCAoSW1wb3J0RXJyb3IsIEF0dHJpYnV0ZUVycm9yKTogICMgUGxhdGZvcm0tc3BlY2lmaWM6IE5vIFNTTC4KICAgIHNzbCA9IE5vbmUKCiAgICBjbGFzcyBCYXNlU1NMRXJyb3IoQmFzZUV4Y2VwdGlvbik6CiAgICAgICAgcGFzcwoKCnRyeTogICMgUHl0aG9uIDM6CiAgICAjIE5vdCBhIG5vLW9wLCB3ZSdyZSBhZGRpbmcgdGhpcyB0byB0aGUgbmFtZXNwYWNlIHNvIGl0IGNhbiBiZSBpbXBvcnRlZC4KICAgIENvbm5lY3Rpb25FcnJvciA9IENvbm5lY3Rpb25FcnJvcgpleGNlcHQgTmFtZUVycm9yOiAgIyBQeXRob24gMjoKICAgIGNsYXNzIENvbm5lY3Rpb25FcnJvcihFeGNlcHRpb24pOgogICAgICAgIHBhc3MKCgpmcm9tIC5leGNlcHRpb25zIGltcG9ydCAoCiAgICBOZXdDb25uZWN0aW9uRXJyb3IsCiAgICBDb25uZWN0VGltZW91dEVycm9yLAogICAgU3ViamVjdEFsdE5hbWVXYXJuaW5nLAogICAgU3lzdGVtVGltZVdhcm5pbmcsCikKZnJvbSAucGFja2FnZXMuc3NsX21hdGNoX2hvc3RuYW1lIGltcG9ydCBtYXRjaF9ob3N0bmFtZSwgQ2VydGlmaWNhdGVFcnJvcgoKZnJvbSAudXRpbC5zc2xfIGltcG9ydCAoCiAgICByZXNvbHZlX2NlcnRfcmVxcywKICAgIHJlc29sdmVfc3NsX3ZlcnNpb24sCiAgICBhc3NlcnRfZmluZ2VycHJpbnQsCiAgICBjcmVhdGVfdXJsbGliM19jb250ZXh0LAogICAgc3NsX3dyYXBfc29ja2V0CikKCgpmcm9tIC51dGlsIGltcG9ydCBjb25uZWN0aW9uCgpmcm9tIC5fY29sbGVjdGlvbnMgaW1wb3J0IEhUVFBIZWFkZXJEaWN0Cgpsb2cgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKCnBvcnRfYnlfc2NoZW1lID0gewogICAgJ2h0dHAnOiA4MCwKICAgICdodHRwcyc6IDQ0MywKfQoKIyBXaGVuIHVwZGF0aW5nIFJFQ0VOVF9EQVRFLCBtb3ZlIGl0IHRvIHdpdGhpbiB0d28geWVhcnMgb2YgdGhlIGN1cnJlbnQgZGF0ZSwKIyBhbmQgbm90IGxlc3MgdGhhbiA2IG1vbnRocyBhZ28uCiMgRXhhbXBsZTogaWYgVG9kYXkgaXMgMjAxOC0wMS0wMSwgdGhlbiBSRUNFTlRfREFURSBzaG91bGQgYmUgYW55IGRhdGUgb24gb3IKIyBhZnRlciAyMDE2LTAxLTAxICh0b2RheSAtIDIgeWVhcnMpIEFORCBiZWZvcmUgMjAxNy0wNy0wMSAodG9kYXkgLSA2IG1vbnRocykKUkVDRU5UX0RBVEUgPSBkYXRldGltZS5kYXRlKDIwMTcsIDYsIDMwKQoKCmNsYXNzIER1bW15Q29ubmVjdGlvbihvYmplY3QpOgogICAgIiIiVXNlZCB0byBkZXRlY3QgYSBmYWlsZWQgQ29ubmVjdGlvbkNscyBpbXBvcnQuIiIiCiAgICBwYXNzCgoKY2xhc3MgSFRUUENvbm5lY3Rpb24oX0hUVFBDb25uZWN0aW9uLCBvYmplY3QpOgogICAgIiIiCiAgICBCYXNlZCBvbiBodHRwbGliLkhUVFBDb25uZWN0aW9uIGJ1dCBwcm92aWRlcyBhbiBleHRyYSBjb25zdHJ1Y3RvcgogICAgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgbGF5ZXIgYmV0d2VlbiBvbGRlciBhbmQgbmV3ZXIgUHl0aG9ucy4KCiAgICBBZGRpdGlvbmFsIGtleXdvcmQgcGFyYW1ldGVycyBhcmUgdXNlZCB0byBjb25maWd1cmUgYXR0cmlidXRlcyBvZiB0aGUgY29ubmVjdGlvbi4KICAgIEFjY2VwdGVkIHBhcmFtZXRlcnMgaW5jbHVkZToKCiAgICAgIC0gYGBzdHJpY3RgYDogU2VlIHRoZSBkb2N1bWVudGF0aW9uIG9uIDpjbGFzczpgdXJsbGliMy5jb25uZWN0aW9ucG9vbC5IVFRQQ29ubmVjdGlvblBvb2xgCiAgICAgIC0gYGBzb3VyY2VfYWRkcmVzc2BgOiBTZXQgdGhlIHNvdXJjZSBhZGRyZXNzIGZvciB0aGUgY3VycmVudCBjb25uZWN0aW9uLgogICAgICAtIGBgc29ja2V0X29wdGlvbnNgYDogU2V0IHNwZWNpZmljIG9wdGlvbnMgb24gdGhlIHVuZGVybHlpbmcgc29ja2V0LiBJZiBub3Qgc3BlY2lmaWVkLCB0aGVuCiAgICAgICAgZGVmYXVsdHMgYXJlIGxvYWRlZCBmcm9tIGBgSFRUUENvbm5lY3Rpb24uZGVmYXVsdF9zb2NrZXRfb3B0aW9uc2BgIHdoaWNoIGluY2x1ZGVzIGRpc2FibGluZwogICAgICAgIE5hZ2xlJ3MgYWxnb3JpdGhtIChzZXRzIFRDUF9OT0RFTEFZIHRvIDEpIHVubGVzcyB0aGUgY29ubmVjdGlvbiBpcyBiZWhpbmQgYSBwcm94eS4KCiAgICAgICAgRm9yIGV4YW1wbGUsIGlmIHlvdSB3aXNoIHRvIGVuYWJsZSBUQ1AgS2VlcCBBbGl2ZSBpbiBhZGRpdGlvbiB0byB0aGUgZGVmYXVsdHMsCiAgICAgICAgeW91IG1pZ2h0IHBhc3M6OgoKICAgICAgICAgICAgSFRUUENvbm5lY3Rpb24uZGVmYXVsdF9zb2NrZXRfb3B0aW9ucyArIFsKICAgICAgICAgICAgICAgIChzb2NrZXQuU09MX1NPQ0tFVCwgc29ja2V0LlNPX0tFRVBBTElWRSwgMSksCiAgICAgICAgICAgIF0KCiAgICAgICAgT3IgeW91IG1heSB3YW50IHRvIGRpc2FibGUgdGhlIGRlZmF1bHRzIGJ5IHBhc3NpbmcgYW4gZW1wdHkgbGlzdCAoZS5nLiwgYGBbXWBgKS4KICAgICIiIgoKICAgIGRlZmF1bHRfcG9ydCA9IHBvcnRfYnlfc2NoZW1lWydodHRwJ10KCiAgICAjOiBEaXNhYmxlIE5hZ2xlJ3MgYWxnb3JpdGhtIGJ5IGRlZmF1bHQuCiAgICAjOiBgYFsoc29ja2V0LklQUFJPVE9fVENQLCBzb2NrZXQuVENQX05PREVMQVksIDEpXWBgCiAgICBkZWZhdWx0X3NvY2tldF9vcHRpb25zID0gWyhzb2NrZXQuSVBQUk9UT19UQ1AsIHNvY2tldC5UQ1BfTk9ERUxBWSwgMSldCgogICAgIzogV2hldGhlciB0aGlzIGNvbm5lY3Rpb24gdmVyaWZpZXMgdGhlIGhvc3QncyBjZXJ0aWZpY2F0ZS4KICAgIGlzX3ZlcmlmaWVkID0gRmFsc2UKCiAgICBkZWYgX19pbml0X18oc2VsZiwgKmFyZ3MsICoqa3cpOgogICAgICAgIGlmIHNpeC5QWTM6ICAjIFB5dGhvbiAzCiAgICAgICAgICAgIGt3LnBvcCgnc3RyaWN0JywgTm9uZSkKCiAgICAgICAgIyBQcmUtc2V0IHNvdXJjZV9hZGRyZXNzLgogICAgICAgIHNlbGYuc291cmNlX2FkZHJlc3MgPSBrdy5nZXQoJ3NvdXJjZV9hZGRyZXNzJykKCiAgICAgICAgIzogVGhlIHNvY2tldCBvcHRpb25zIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLiBJZiBubyBvcHRpb25zIGFyZQogICAgICAgICM6IHByb3ZpZGVkLCB3ZSB1c2UgdGhlIGRlZmF1bHQgb3B0aW9ucy4KICAgICAgICBzZWxmLnNvY2tldF9vcHRpb25zID0ga3cucG9wKCdzb2NrZXRfb3B0aW9ucycsIHNlbGYuZGVmYXVsdF9zb2NrZXRfb3B0aW9ucykKCiAgICAgICAgX0hUVFBDb25uZWN0aW9uLl9faW5pdF9fKHNlbGYsICphcmdzLCAqKmt3KQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGhvc3Qoc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAgR2V0dGVyIG1ldGhvZCB0byByZW1vdmUgYW55IHRyYWlsaW5nIGRvdHMgdGhhdCBpbmRpY2F0ZSB0aGUgaG9zdG5hbWUgaXMgYW4gRlFETi4KCiAgICAgICAgSW4gZ2VuZXJhbCwgU1NMIGNlcnRpZmljYXRlcyBkb24ndCBpbmNsdWRlIHRoZSB0cmFpbGluZyBkb3QgaW5kaWNhdGluZyBhCiAgICAgICAgZnVsbHktcXVhbGlmaWVkIGRvbWFpbiBuYW1lLCBhbmQgdGh1cywgdGhleSBkb24ndCB2YWxpZGF0ZSBwcm9wZXJseSB3aGVuCiAgICAgICAgY2hlY2tlZCBhZ2FpbnN0IGEgZG9tYWluIG5hbWUgdGhhdCBpbmNsdWRlcyB0aGUgZG90LiBJbiBhZGRpdGlvbiwgc29tZQogICAgICAgIHNlcnZlcnMgbWF5IG5vdCBleHBlY3QgdG8gcmVjZWl2ZSB0aGUgdHJhaWxpbmcgZG90IHdoZW4gcHJvdmlkZWQuCgogICAgICAgIEhvd2V2ZXIsIHRoZSBob3N0bmFtZSB3aXRoIHRyYWlsaW5nIGRvdCBpcyBjcml0aWNhbCB0byBETlMgcmVzb2x1dGlvbjsgZG9pbmcgYQogICAgICAgIGxvb2t1cCB3aXRoIHRoZSB0cmFpbGluZyBkb3Qgd2lsbCBwcm9wZXJseSBvbmx5IHJlc29sdmUgdGhlIGFwcHJvcHJpYXRlIEZRRE4sCiAgICAgICAgd2hlcmVhcyBhIGxvb2t1cCB3aXRob3V0IGEgdHJhaWxpbmcgZG90IHdpbGwgc2VhcmNoIHRoZSBzeXN0ZW0ncyBzZWFyY2ggZG9tYWluCiAgICAgICAgbGlzdC4gVGh1cywgaXQncyBpbXBvcnRhbnQgdG8ga2VlcCB0aGUgb3JpZ2luYWwgaG9zdCBhcm91bmQgZm9yIHVzZSBvbmx5IGluCiAgICAgICAgdGhvc2UgY2FzZXMgd2hlcmUgaXQncyBhcHByb3ByaWF0ZSAoaS5lLiwgd2hlbiBkb2luZyBETlMgbG9va3VwIHRvIGVzdGFibGlzaCB0aGUKICAgICAgICBhY3R1YWwgVENQIGNvbm5lY3Rpb24gYWNyb3NzIHdoaWNoIHdlJ3JlIGdvaW5nIHRvIHNlbmQgSFRUUCByZXF1ZXN0cykuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuX2Ruc19ob3N0LnJzdHJpcCgnLicpCgogICAgQGhvc3Quc2V0dGVyCiAgICBkZWYgaG9zdChzZWxmLCB2YWx1ZSk6CiAgICAgICAgIiIiCiAgICAgICAgU2V0dGVyIGZvciB0aGUgYGhvc3RgIHByb3BlcnR5LgoKICAgICAgICBXZSBhc3N1bWUgdGhhdCBvbmx5IHVybGxpYjMgdXNlcyB0aGUgX2Ruc19ob3N0IGF0dHJpYnV0ZTsgaHR0cGxpYiBpdHNlbGYKICAgICAgICBvbmx5IHVzZXMgYGhvc3RgLCBhbmQgaXQgc2VlbXMgcmVhc29uYWJsZSB0aGF0IG90aGVyIGxpYnJhcmllcyBmb2xsb3cgc3VpdC4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9kbnNfaG9zdCA9IHZhbHVlCgogICAgZGVmIF9uZXdfY29ubihzZWxmKToKICAgICAgICAiIiIgRXN0YWJsaXNoIGEgc29ja2V0IGNvbm5lY3Rpb24gYW5kIHNldCBub2RlbGF5IHNldHRpbmdzIG9uIGl0LgoKICAgICAgICA6cmV0dXJuOiBOZXcgc29ja2V0IGNvbm5lY3Rpb24uCiAgICAgICAgIiIiCiAgICAgICAgZXh0cmFfa3cgPSB7fQogICAgICAgIGlmIHNlbGYuc291cmNlX2FkZHJlc3M6CiAgICAgICAgICAgIGV4dHJhX2t3Wydzb3VyY2VfYWRkcmVzcyddID0gc2VsZi5zb3VyY2VfYWRkcmVzcwoKICAgICAgICBpZiBzZWxmLnNvY2tldF9vcHRpb25zOgogICAgICAgICAgICBleHRyYV9rd1snc29ja2V0X29wdGlvbnMnXSA9IHNlbGYuc29ja2V0X29wdGlvbnMKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBjb25uID0gY29ubmVjdGlvbi5jcmVhdGVfY29ubmVjdGlvbigKICAgICAgICAgICAgICAgIChzZWxmLl9kbnNfaG9zdCwgc2VsZi5wb3J0KSwgc2VsZi50aW1lb3V0LCAqKmV4dHJhX2t3KQoKICAgICAgICBleGNlcHQgU29ja2V0VGltZW91dDoKICAgICAgICAgICAgcmFpc2UgQ29ubmVjdFRpbWVvdXRFcnJvcigKICAgICAgICAgICAgICAgIHNlbGYsICJDb25uZWN0aW9uIHRvICVzIHRpbWVkIG91dC4gKGNvbm5lY3QgdGltZW91dD0lcykiICUKICAgICAgICAgICAgICAgIChzZWxmLmhvc3QsIHNlbGYudGltZW91dCkpCgogICAgICAgIGV4Y2VwdCBTb2NrZXRFcnJvciBhcyBlOgogICAgICAgICAgICByYWlzZSBOZXdDb25uZWN0aW9uRXJyb3IoCiAgICAgICAgICAgICAgICBzZWxmLCAiRmFpbGVkIHRvIGVzdGFibGlzaCBhIG5ldyBjb25uZWN0aW9uOiAlcyIgJSBlKQoKICAgICAgICByZXR1cm4gY29ubgoKICAgIGRlZiBfcHJlcGFyZV9jb25uKHNlbGYsIGNvbm4pOgogICAgICAgIHNlbGYuc29jayA9IGNvbm4KICAgICAgICBpZiBzZWxmLl90dW5uZWxfaG9zdDoKICAgICAgICAgICAgIyBUT0RPOiBGaXggdHVubmVsIHNvIGl0IGRvZXNuJ3QgZGVwZW5kIG9uIHNlbGYuc29jayBzdGF0ZS4KICAgICAgICAgICAgc2VsZi5fdHVubmVsKCkKICAgICAgICAgICAgIyBNYXJrIHRoaXMgY29ubmVjdGlvbiBhcyBub3QgcmV1c2FibGUKICAgICAgICAgICAgc2VsZi5hdXRvX29wZW4gPSAwCgogICAgZGVmIGNvbm5lY3Qoc2VsZik6CiAgICAgICAgY29ubiA9IHNlbGYuX25ld19jb25uKCkKICAgICAgICBzZWxmLl9wcmVwYXJlX2Nvbm4oY29ubikKCiAgICBkZWYgcmVxdWVzdF9jaHVua2VkKHNlbGYsIG1ldGhvZCwgdXJsLCBib2R5PU5vbmUsIGhlYWRlcnM9Tm9uZSk6CiAgICAgICAgIiIiCiAgICAgICAgQWx0ZXJuYXRpdmUgdG8gdGhlIGNvbW1vbiByZXF1ZXN0IG1ldGhvZCwgd2hpY2ggc2VuZHMgdGhlCiAgICAgICAgYm9keSB3aXRoIGNodW5rZWQgZW5jb2RpbmcgYW5kIG5vdCBhcyBvbmUgYmxvY2sKICAgICAgICAiIiIKICAgICAgICBoZWFkZXJzID0gSFRUUEhlYWRlckRpY3QoaGVhZGVycyBpZiBoZWFkZXJzIGlzIG5vdCBOb25lIGVsc2Uge30pCiAgICAgICAgc2tpcF9hY2NlcHRfZW5jb2RpbmcgPSAnYWNjZXB0LWVuY29kaW5nJyBpbiBoZWFkZXJzCiAgICAgICAgc2tpcF9ob3N0ID0gJ2hvc3QnIGluIGhlYWRlcnMKICAgICAgICBzZWxmLnB1dHJlcXVlc3QoCiAgICAgICAgICAgIG1ldGhvZCwKICAgICAgICAgICAgdXJsLAogICAgICAgICAgICBza2lwX2FjY2VwdF9lbmNvZGluZz1za2lwX2FjY2VwdF9lbmNvZGluZywKICAgICAgICAgICAgc2tpcF9ob3N0PXNraXBfaG9zdAogICAgICAgICkKICAgICAgICBmb3IgaGVhZGVyLCB2YWx1ZSBpbiBoZWFkZXJzLml0ZW1zKCk6CiAgICAgICAgICAgIHNlbGYucHV0aGVhZGVyKGhlYWRlciwgdmFsdWUpCiAgICAgICAgaWYgJ3RyYW5zZmVyLWVuY29kaW5nJyBub3QgaW4gaGVhZGVyczoKICAgICAgICAgICAgc2VsZi5wdXRoZWFkZXIoJ1RyYW5zZmVyLUVuY29kaW5nJywgJ2NodW5rZWQnKQogICAgICAgIHNlbGYuZW5kaGVhZGVycygpCgogICAgICAgIGlmIGJvZHkgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHN0cmluZ2lzaF90eXBlcyA9IHNpeC5zdHJpbmdfdHlwZXMgKyAoYnl0ZXMsKQogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGJvZHksIHN0cmluZ2lzaF90eXBlcyk6CiAgICAgICAgICAgICAgICBib2R5ID0gKGJvZHksKQogICAgICAgICAgICBmb3IgY2h1bmsgaW4gYm9keToKICAgICAgICAgICAgICAgIGlmIG5vdCBjaHVuazoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoY2h1bmssIGJ5dGVzKToKICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGNodW5rLmVuY29kZSgndXRmOCcpCiAgICAgICAgICAgICAgICBsZW5fc3RyID0gaGV4KGxlbihjaHVuaykpWzI6XQogICAgICAgICAgICAgICAgc2VsZi5zZW5kKGxlbl9zdHIuZW5jb2RlKCd1dGYtOCcpKQogICAgICAgICAgICAgICAgc2VsZi5zZW5kKGInXHJcbicpCiAgICAgICAgICAgICAgICBzZWxmLnNlbmQoY2h1bmspCiAgICAgICAgICAgICAgICBzZWxmLnNlbmQoYidcclxuJykKCiAgICAgICAgIyBBZnRlciB0aGUgaWYgY2xhdXNlLCB0byBhbHdheXMgaGF2ZSBhIGNsb3NlZCBib2R5CiAgICAgICAgc2VsZi5zZW5kKGInMFxyXG5cclxuJykKCgpjbGFzcyBIVFRQU0Nvbm5lY3Rpb24oSFRUUENvbm5lY3Rpb24pOgogICAgZGVmYXVsdF9wb3J0ID0gcG9ydF9ieV9zY2hlbWVbJ2h0dHBzJ10KCiAgICBzc2xfdmVyc2lvbiA9IE5vbmUKCiAgICBkZWYgX19pbml0X18oc2VsZiwgaG9zdCwgcG9ydD1Ob25lLCBrZXlfZmlsZT1Ob25lLCBjZXJ0X2ZpbGU9Tm9uZSwKICAgICAgICAgICAgICAgICBzdHJpY3Q9Tm9uZSwgdGltZW91dD1zb2NrZXQuX0dMT0JBTF9ERUZBVUxUX1RJTUVPVVQsCiAgICAgICAgICAgICAgICAgc3NsX2NvbnRleHQ9Tm9uZSwgc2VydmVyX2hvc3RuYW1lPU5vbmUsICoqa3cpOgoKICAgICAgICBIVFRQQ29ubmVjdGlvbi5fX2luaXRfXyhzZWxmLCBob3N0LCBwb3J0LCBzdHJpY3Q9c3RyaWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ9dGltZW91dCwgKiprdykKCiAgICAgICAgc2VsZi5rZXlfZmlsZSA9IGtleV9maWxlCiAgICAgICAgc2VsZi5jZXJ0X2ZpbGUgPSBjZXJ0X2ZpbGUKICAgICAgICBzZWxmLnNzbF9jb250ZXh0ID0gc3NsX2NvbnRleHQKICAgICAgICBzZWxmLnNlcnZlcl9ob3N0bmFtZSA9IHNlcnZlcl9ob3N0bmFtZQoKICAgICAgICAjIFJlcXVpcmVkIHByb3BlcnR5IGZvciBHb29nbGUgQXBwRW5naW5lIDEuOS4wIHdoaWNoIG90aGVyd2lzZSBjYXVzZXMKICAgICAgICAjIEhUVFBTIHJlcXVlc3RzIHRvIGdvIG91dCBhcyBIVFRQLiAoU2VlIElzc3VlICMzNTYpCiAgICAgICAgc2VsZi5fcHJvdG9jb2wgPSAnaHR0cHMnCgogICAgZGVmIGNvbm5lY3Qoc2VsZik6CiAgICAgICAgY29ubiA9IHNlbGYuX25ld19jb25uKCkKICAgICAgICBzZWxmLl9wcmVwYXJlX2Nvbm4oY29ubikKCiAgICAgICAgaWYgc2VsZi5zc2xfY29udGV4dCBpcyBOb25lOgogICAgICAgICAgICBzZWxmLnNzbF9jb250ZXh0ID0gY3JlYXRlX3VybGxpYjNfY29udGV4dCgKICAgICAgICAgICAgICAgIHNzbF92ZXJzaW9uPXJlc29sdmVfc3NsX3ZlcnNpb24oTm9uZSksCiAgICAgICAgICAgICAgICBjZXJ0X3JlcXM9cmVzb2x2ZV9jZXJ0X3JlcXMoTm9uZSksCiAgICAgICAgICAgICkKCiAgICAgICAgc2VsZi5zb2NrID0gc3NsX3dyYXBfc29ja2V0KAogICAgICAgICAgICBzb2NrPWNvbm4sCiAgICAgICAgICAgIGtleWZpbGU9c2VsZi5rZXlfZmlsZSwKICAgICAgICAgICAgY2VydGZpbGU9c2VsZi5jZXJ0X2ZpbGUsCiAgICAgICAgICAgIHNzbF9jb250ZXh0PXNlbGYuc3NsX2NvbnRleHQsCiAgICAgICAgICAgIHNlcnZlcl9ob3N0bmFtZT1zZWxmLnNlcnZlcl9ob3N0bmFtZQogICAgICAgICkKCgpjbGFzcyBWZXJpZmllZEhUVFBTQ29ubmVjdGlvbihIVFRQU0Nvbm5lY3Rpb24pOgogICAgIiIiCiAgICBCYXNlZCBvbiBodHRwbGliLkhUVFBTQ29ubmVjdGlvbiBidXQgd3JhcHMgdGhlIHNvY2tldCB3aXRoCiAgICBTU0wgY2VydGlmaWNhdGlvbi4KICAgICIiIgogICAgY2VydF9yZXFzID0gTm9uZQogICAgY2FfY2VydHMgPSBOb25lCiAgICBjYV9jZXJ0X2RpciA9IE5vbmUKICAgIHNzbF92ZXJzaW9uID0gTm9uZQogICAgYXNzZXJ0X2ZpbmdlcnByaW50ID0gTm9uZQoKICAgIGRlZiBzZXRfY2VydChzZWxmLCBrZXlfZmlsZT1Ob25lLCBjZXJ0X2ZpbGU9Tm9uZSwKICAgICAgICAgICAgICAgICBjZXJ0X3JlcXM9Tm9uZSwgY2FfY2VydHM9Tm9uZSwKICAgICAgICAgICAgICAgICBhc3NlcnRfaG9zdG5hbWU9Tm9uZSwgYXNzZXJ0X2ZpbmdlcnByaW50PU5vbmUsCiAgICAgICAgICAgICAgICAgY2FfY2VydF9kaXI9Tm9uZSk6CiAgICAgICAgIiIiCiAgICAgICAgVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UsIGJlZm9yZSB0aGUgY29ubmVjdGlvbiBpcyB1c2VkLgogICAgICAgICIiIgogICAgICAgICMgSWYgY2VydF9yZXFzIGlzIG5vdCBwcm92aWRlZCwgd2UgY2FuIHRyeSB0byBndWVzcy4gSWYgdGhlIHVzZXIgZ2F2ZQogICAgICAgICMgdXMgYSBjZXJ0IGRhdGFiYXNlLCB3ZSBhc3N1bWUgdGhleSB3YW50IHRvIHVzZSBpdDogb3RoZXJ3aXNlLCBpZgogICAgICAgICMgdGhleSBnYXZlIHVzIGFuIFNTTCBDb250ZXh0IG9iamVjdCB3ZSBzaG91bGQgdXNlIHdoYXRldmVyIGlzIHNldCBmb3IKICAgICAgICAjIGl0LgogICAgICAgIGlmIGNlcnRfcmVxcyBpcyBOb25lOgogICAgICAgICAgICBpZiBjYV9jZXJ0cyBvciBjYV9jZXJ0X2RpcjoKICAgICAgICAgICAgICAgIGNlcnRfcmVxcyA9ICdDRVJUX1JFUVVJUkVEJwogICAgICAgICAgICBlbGlmIHNlbGYuc3NsX2NvbnRleHQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBjZXJ0X3JlcXMgPSBzZWxmLnNzbF9jb250ZXh0LnZlcmlmeV9tb2RlCgogICAgICAgIHNlbGYua2V5X2ZpbGUgPSBrZXlfZmlsZQogICAgICAgIHNlbGYuY2VydF9maWxlID0gY2VydF9maWxlCiAgICAgICAgc2VsZi5jZXJ0X3JlcXMgPSBjZXJ0X3JlcXMKICAgICAgICBzZWxmLmFzc2VydF9ob3N0bmFtZSA9IGFzc2VydF9ob3N0bmFtZQogICAgICAgIHNlbGYuYXNzZXJ0X2ZpbmdlcnByaW50ID0gYXNzZXJ0X2ZpbmdlcnByaW50CiAgICAgICAgc2VsZi5jYV9jZXJ0cyA9IGNhX2NlcnRzIGFuZCBvcy5wYXRoLmV4cGFuZHVzZXIoY2FfY2VydHMpCiAgICAgICAgc2VsZi5jYV9jZXJ0X2RpciA9IGNhX2NlcnRfZGlyIGFuZCBvcy5wYXRoLmV4cGFuZHVzZXIoY2FfY2VydF9kaXIpCgogICAgZGVmIGNvbm5lY3Qoc2VsZik6CiAgICAgICAgIyBBZGQgY2VydGlmaWNhdGUgdmVyaWZpY2F0aW9uCiAgICAgICAgY29ubiA9IHNlbGYuX25ld19jb25uKCkKICAgICAgICBob3N0bmFtZSA9IHNlbGYuaG9zdAoKICAgICAgICBpZiBzZWxmLl90dW5uZWxfaG9zdDoKICAgICAgICAgICAgc2VsZi5zb2NrID0gY29ubgogICAgICAgICAgICAjIENhbGxzIHNlbGYuX3NldF9ob3N0cG9ydCgpLCBzbyBzZWxmLmhvc3QgaXMKICAgICAgICAgICAgIyBzZWxmLl90dW5uZWxfaG9zdCBiZWxvdy4KICAgICAgICAgICAgc2VsZi5fdHVubmVsKCkKICAgICAgICAgICAgIyBNYXJrIHRoaXMgY29ubmVjdGlvbiBhcyBub3QgcmV1c2FibGUKICAgICAgICAgICAgc2VsZi5hdXRvX29wZW4gPSAwCgogICAgICAgICAgICAjIE92ZXJyaWRlIHRoZSBob3N0IHdpdGggdGhlIG9uZSB3ZSdyZSByZXF1ZXN0aW5nIGRhdGEgZnJvbS4KICAgICAgICAgICAgaG9zdG5hbWUgPSBzZWxmLl90dW5uZWxfaG9zdAoKICAgICAgICBzZXJ2ZXJfaG9zdG5hbWUgPSBob3N0bmFtZQogICAgICAgIGlmIHNlbGYuc2VydmVyX2hvc3RuYW1lIGlzIG5vdCBOb25lOgogICAgICAgICAgICBzZXJ2ZXJfaG9zdG5hbWUgPSBzZWxmLnNlcnZlcl9ob3N0bmFtZQoKICAgICAgICBpc190aW1lX29mZiA9IGRhdGV0aW1lLmRhdGUudG9kYXkoKSA8IFJFQ0VOVF9EQVRFCiAgICAgICAgaWYgaXNfdGltZV9vZmY6CiAgICAgICAgICAgIHdhcm5pbmdzLndhcm4oKAogICAgICAgICAgICAgICAgJ1N5c3RlbSB0aW1lIGlzIHdheSBvZmYgKGJlZm9yZSB7MH0pLiBUaGlzIHdpbGwgcHJvYmFibHkgJwogICAgICAgICAgICAgICAgJ2xlYWQgdG8gU1NMIHZlcmlmaWNhdGlvbiBlcnJvcnMnKS5mb3JtYXQoUkVDRU5UX0RBVEUpLAogICAgICAgICAgICAgICAgU3lzdGVtVGltZVdhcm5pbmcKICAgICAgICAgICAgKQoKICAgICAgICAjIFdyYXAgc29ja2V0IHVzaW5nIHZlcmlmaWNhdGlvbiB3aXRoIHRoZSByb290IGNlcnRzIGluCiAgICAgICAgIyB0cnVzdGVkX3Jvb3RfY2VydHMKICAgICAgICBpZiBzZWxmLnNzbF9jb250ZXh0IGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuc3NsX2NvbnRleHQgPSBjcmVhdGVfdXJsbGliM19jb250ZXh0KAogICAgICAgICAgICAgICAgc3NsX3ZlcnNpb249cmVzb2x2ZV9zc2xfdmVyc2lvbihzZWxmLnNzbF92ZXJzaW9uKSwKICAgICAgICAgICAgICAgIGNlcnRfcmVxcz1yZXNvbHZlX2NlcnRfcmVxcyhzZWxmLmNlcnRfcmVxcyksCiAgICAgICAgICAgICkKCiAgICAgICAgY29udGV4dCA9IHNlbGYuc3NsX2NvbnRleHQKICAgICAgICBjb250ZXh0LnZlcmlmeV9tb2RlID0gcmVzb2x2ZV9jZXJ0X3JlcXMoc2VsZi5jZXJ0X3JlcXMpCiAgICAgICAgc2VsZi5zb2NrID0gc3NsX3dyYXBfc29ja2V0KAogICAgICAgICAgICBzb2NrPWNvbm4sCiAgICAgICAgICAgIGtleWZpbGU9c2VsZi5rZXlfZmlsZSwKICAgICAgICAgICAgY2VydGZpbGU9c2VsZi5jZXJ0X2ZpbGUsCiAgICAgICAgICAgIGNhX2NlcnRzPXNlbGYuY2FfY2VydHMsCiAgICAgICAgICAgIGNhX2NlcnRfZGlyPXNlbGYuY2FfY2VydF9kaXIsCiAgICAgICAgICAgIHNlcnZlcl9ob3N0bmFtZT1zZXJ2ZXJfaG9zdG5hbWUsCiAgICAgICAgICAgIHNzbF9jb250ZXh0PWNvbnRleHQpCgogICAgICAgIGlmIHNlbGYuYXNzZXJ0X2ZpbmdlcnByaW50OgogICAgICAgICAgICBhc3NlcnRfZmluZ2VycHJpbnQoc2VsZi5zb2NrLmdldHBlZXJjZXJ0KGJpbmFyeV9mb3JtPVRydWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hc3NlcnRfZmluZ2VycHJpbnQpCiAgICAgICAgZWxpZiBjb250ZXh0LnZlcmlmeV9tb2RlICE9IHNzbC5DRVJUX05PTkUgXAogICAgICAgICAgICAgICAgYW5kIG5vdCBnZXRhdHRyKGNvbnRleHQsICdjaGVja19ob3N0bmFtZScsIEZhbHNlKSBcCiAgICAgICAgICAgICAgICBhbmQgc2VsZi5hc3NlcnRfaG9zdG5hbWUgaXMgbm90IEZhbHNlOgogICAgICAgICAgICAjIFdoaWxlIHVybGxpYjMgYXR0ZW1wdHMgdG8gYWx3YXlzIHR1cm4gb2ZmIGhvc3RuYW1lIG1hdGNoaW5nIGZyb20KICAgICAgICAgICAgIyB0aGUgVExTIGxpYnJhcnksIHRoaXMgY2Fubm90IGFsd2F5cyBiZSBkb25lLiBTbyB3ZSBjaGVjayB3aGV0aGVyCiAgICAgICAgICAgICMgdGhlIFRMUyBMaWJyYXJ5IHN0aWxsIHRoaW5rcyBpdCdzIG1hdGNoaW5nIGhvc3RuYW1lcy4KICAgICAgICAgICAgY2VydCA9IHNlbGYuc29jay5nZXRwZWVyY2VydCgpCiAgICAgICAgICAgIGlmIG5vdCBjZXJ0LmdldCgnc3ViamVjdEFsdE5hbWUnLCAoKSk6CiAgICAgICAgICAgICAgICB3YXJuaW5ncy53YXJuKCgKICAgICAgICAgICAgICAgICAgICAnQ2VydGlmaWNhdGUgZm9yIHswfSBoYXMgbm8gYHN1YmplY3RBbHROYW1lYCwgZmFsbGluZyBiYWNrIHRvIGNoZWNrIGZvciBhICcKICAgICAgICAgICAgICAgICAgICAnYGNvbW1vbk5hbWVgIGZvciBub3cuIFRoaXMgZmVhdHVyZSBpcyBiZWluZyByZW1vdmVkIGJ5IG1ham9yIGJyb3dzZXJzIGFuZCAnCiAgICAgICAgICAgICAgICAgICAgJ2RlcHJlY2F0ZWQgYnkgUkZDIDI4MTguIChTZWUgaHR0cHM6Ly9naXRodWIuY29tL3NoYXpvdy91cmxsaWIzL2lzc3Vlcy80OTcgJwogICAgICAgICAgICAgICAgICAgICdmb3IgZGV0YWlscy4pJy5mb3JtYXQoaG9zdG5hbWUpKSwKICAgICAgICAgICAgICAgICAgICBTdWJqZWN0QWx0TmFtZVdhcm5pbmcKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgX21hdGNoX2hvc3RuYW1lKGNlcnQsIHNlbGYuYXNzZXJ0X2hvc3RuYW1lIG9yIHNlcnZlcl9ob3N0bmFtZSkKCiAgICAgICAgc2VsZi5pc192ZXJpZmllZCA9ICgKICAgICAgICAgICAgY29udGV4dC52ZXJpZnlfbW9kZSA9PSBzc2wuQ0VSVF9SRVFVSVJFRCBvcgogICAgICAgICAgICBzZWxmLmFzc2VydF9maW5nZXJwcmludCBpcyBub3QgTm9uZQogICAgICAgICkKCgpkZWYgX21hdGNoX2hvc3RuYW1lKGNlcnQsIGFzc2VydGVkX2hvc3RuYW1lKToKICAgIHRyeToKICAgICAgICBtYXRjaF9ob3N0bmFtZShjZXJ0LCBhc3NlcnRlZF9ob3N0bmFtZSkKICAgIGV4Y2VwdCBDZXJ0aWZpY2F0ZUVycm9yIGFzIGU6CiAgICAgICAgbG9nLmVycm9yKAogICAgICAgICAgICAnQ2VydGlmaWNhdGUgZGlkIG5vdCBtYXRjaCBleHBlY3RlZCBob3N0bmFtZTogJXMuICcKICAgICAgICAgICAgJ0NlcnRpZmljYXRlOiAlcycsIGFzc2VydGVkX2hvc3RuYW1lLCBjZXJ0CiAgICAgICAgKQogICAgICAgICMgQWRkIGNlcnQgdG8gZXhjZXB0aW9uIGFuZCByZXJhaXNlIHNvIGNsaWVudCBjb2RlIGNhbiBpbnNwZWN0CiAgICAgICAgIyB0aGUgY2VydCB3aGVuIGNhdGNoaW5nIHRoZSBleGNlcHRpb24sIGlmIHRoZXkgd2FudCB0bwogICAgICAgIGUuX3BlZXJfY2VydCA9IGNlcnQKICAgICAgICByYWlzZQoKCmlmIHNzbDoKICAgICMgTWFrZSBhIGNvcHkgZm9yIHRlc3RpbmcuCiAgICBVbnZlcmlmaWVkSFRUUFNDb25uZWN0aW9uID0gSFRUUFNDb25uZWN0aW9uCiAgICBIVFRQU0Nvbm5lY3Rpb24gPSBWZXJpZmllZEhUVFBTQ29ubmVjdGlvbgplbHNlOgogICAgSFRUUFNDb25uZWN0aW9uID0gRHVtbXlDb25uZWN0aW9uCg==
