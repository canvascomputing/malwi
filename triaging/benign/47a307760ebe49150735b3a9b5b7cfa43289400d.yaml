statistics:
  total_files: 1
  skipped_files: 0.0
  processed_objects: 1
  malicious_objects: 0
details:
- path: .repo_cache/malicious_repos/pypi_malregistry/botaa3/1.0.0/botaa3-1.0.0/boto3-1.20.7/boto3/resources/response.py
  contents:
  - name: <module>
    score: 0.0
    code: |-
      # Copyright 2014 Amazon.com, Inc. or its affiliates. All Rights Reserved.
      #
      # Licensed under the Apache License, Version 2.0 (the "License"). You
      # may not use this file except in compliance with the License. A copy of
      # the License is located at
      #
      # https://aws.amazon.com/apache2.0/
      #
      # or in the "license" file accompanying this file. This file is
      # distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
      # ANY KIND, either express or implied. See the License for the specific
      # language governing permissions and limitations under the License.

      import jmespath
      from botocore import xform_name

      from .params import get_data_member


      def all_not_none(iterable):
          """
          Return True if all elements of the iterable are not None (or if the
          iterable is empty). This is like the built-in ``all``, except checks
          against None, so 0 and False are allowable values.
          """
          for element in iterable:
              if element is None:
                  return False
          return True
    tokens: resume load_const INTEGER load_const import_name jmespath store_name jmespath load_const INTEGER load_const import_name botocore import_from xform_name store_name xform_name pop_top load_const INTEGER load_const import_name params import_from get_data_member store_name get_data_member pop_top load_const OBJECT make_function store_name all_not_none load_const load_const OBJECT make_function defaults store_name STRING_LEN_S_ENT_HIGH load_const OBJECT make_function store_name STRING_LEN_S_ENT_HIGH push_null load_build_class load_const OBJECT make_function load_const RawHandler load_name object call store_name RawHandler push_null load_build_class load_const OBJECT make_function load_const ResourceHandler load_name object call store_name ResourceHandler return_const None
    hash: 292d3a69c9d995d8d2f154e07d108bd3626902396b1268a9ce9d5f9fd1db3128
sources:
  .repo_cache/malicious_repos/pypi_malregistry/botaa3/1.0.0/botaa3-1.0.0/boto3-1.20.7/boto3/resources/response.py: IyBDb3B5cmlnaHQgMjAxNCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgojCiMgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIikuIFlvdQojIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBBIGNvcHkgb2YKIyB0aGUgTGljZW5zZSBpcyBsb2NhdGVkIGF0CiMKIyBodHRwczovL2F3cy5hbWF6b24uY29tL2FwYWNoZTIuMC8KIwojIG9yIGluIHRoZSAibGljZW5zZSIgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMKIyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRgojIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYwojIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgppbXBvcnQgam1lc3BhdGgKZnJvbSBib3RvY29yZSBpbXBvcnQgeGZvcm1fbmFtZQoKZnJvbSAucGFyYW1zIGltcG9ydCBnZXRfZGF0YV9tZW1iZXIKCgpkZWYgYWxsX25vdF9ub25lKGl0ZXJhYmxlKToKICAgICIiIgogICAgUmV0dXJuIFRydWUgaWYgYWxsIGVsZW1lbnRzIG9mIHRoZSBpdGVyYWJsZSBhcmUgbm90IE5vbmUgKG9yIGlmIHRoZQogICAgaXRlcmFibGUgaXMgZW1wdHkpLiBUaGlzIGlzIGxpa2UgdGhlIGJ1aWx0LWluIGBgYWxsYGAsIGV4Y2VwdCBjaGVja3MKICAgIGFnYWluc3QgTm9uZSwgc28gMCBhbmQgRmFsc2UgYXJlIGFsbG93YWJsZSB2YWx1ZXMuCiAgICAiIiIKICAgIGZvciBlbGVtZW50IGluIGl0ZXJhYmxlOgogICAgICAgIGlmIGVsZW1lbnQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICByZXR1cm4gVHJ1ZQoKCmRlZiBidWlsZF9pZGVudGlmaWVycyhpZGVudGlmaWVycywgcGFyZW50LCBwYXJhbXM9Tm9uZSwgcmF3X3Jlc3BvbnNlPU5vbmUpOgogICAgIiIiCiAgICBCdWlsZHMgYSBtYXBwaW5nIG9mIGlkZW50aWZpZXIgbmFtZXMgdG8gdmFsdWVzIGJhc2VkIG9uIHRoZQogICAgaWRlbnRpZmllciBzb3VyY2UgbG9jYXRpb24sIHR5cGUsIGFuZCB0YXJnZXQuIElkZW50aWZpZXIKICAgIHZhbHVlcyBtYXkgYmUgc2NhbGFycyBvciBsaXN0cyBkZXBlbmRpbmcgb24gdGhlIHNvdXJjZSB0eXBlCiAgICBhbmQgbG9jYXRpb24uCgogICAgOnR5cGUgaWRlbnRpZmllcnM6IGxpc3QKICAgIDpwYXJhbSBpZGVudGlmaWVyczogTGlzdCBvZiA6cHk6Y2xhc3M6YH5ib3RvMy5yZXNvdXJjZXMubW9kZWwuUGFyYW1ldGVyYAogICAgICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9ucwogICAgOnR5cGUgcGFyZW50OiBTZXJ2aWNlUmVzb3VyY2UKICAgIDpwYXJhbSBwYXJlbnQ6IFRoZSByZXNvdXJjZSBpbnN0YW5jZSB0byB3aGljaCB0aGlzIGFjdGlvbiBpcyBhdHRhY2hlZC4KICAgIDp0eXBlIHBhcmFtczogZGljdAogICAgOnBhcmFtIHBhcmFtczogUmVxdWVzdCBwYXJhbWV0ZXJzIHNlbnQgdG8gdGhlIHNlcnZpY2UuCiAgICA6dHlwZSByYXdfcmVzcG9uc2U6IGRpY3QKICAgIDpwYXJhbSByYXdfcmVzcG9uc2U6IExvdy1sZXZlbCBvcGVyYXRpb24gcmVzcG9uc2UuCiAgICA6cnR5cGU6IGxpc3QKICAgIDpyZXR1cm46IEFuIG9yZGVyZWQgbGlzdCBvZiBgYChuYW1lLCB2YWx1ZSlgYCBpZGVudGlmaWVyIHR1cGxlcy4KICAgICIiIgogICAgcmVzdWx0cyA9IFtdCgogICAgZm9yIGlkZW50aWZpZXIgaW4gaWRlbnRpZmllcnM6CiAgICAgICAgc291cmNlID0gaWRlbnRpZmllci5zb3VyY2UKICAgICAgICB0YXJnZXQgPSBpZGVudGlmaWVyLnRhcmdldAoKICAgICAgICBpZiBzb3VyY2UgPT0gJ3Jlc3BvbnNlJzoKICAgICAgICAgICAgdmFsdWUgPSBqbWVzcGF0aC5zZWFyY2goaWRlbnRpZmllci5wYXRoLCByYXdfcmVzcG9uc2UpCiAgICAgICAgZWxpZiBzb3VyY2UgPT0gJ3JlcXVlc3RQYXJhbWV0ZXInOgogICAgICAgICAgICB2YWx1ZSA9IGptZXNwYXRoLnNlYXJjaChpZGVudGlmaWVyLnBhdGgsIHBhcmFtcykKICAgICAgICBlbGlmIHNvdXJjZSA9PSAnaWRlbnRpZmllcic6CiAgICAgICAgICAgIHZhbHVlID0gZ2V0YXR0cihwYXJlbnQsIHhmb3JtX25hbWUoaWRlbnRpZmllci5uYW1lKSkKICAgICAgICBlbGlmIHNvdXJjZSA9PSAnZGF0YSc6CiAgICAgICAgICAgICMgSWYgdGhpcyBpcyBhIGRhdGEgbWVtYmVyIHRoZW4gaXQgbWF5IGluY3VyIGEgbG9hZAogICAgICAgICAgICAjIGFjdGlvbiBiZWZvcmUgcmV0dXJuaW5nIHRoZSB2YWx1ZS4KICAgICAgICAgICAgdmFsdWUgPSBnZXRfZGF0YV9tZW1iZXIocGFyZW50LCBpZGVudGlmaWVyLnBhdGgpCiAgICAgICAgZWxpZiBzb3VyY2UgPT0gJ2lucHV0JzoKICAgICAgICAgICAgIyBUaGlzIHZhbHVlIGlzIHNldCBieSB0aGUgdXNlciwgc28gaWdub3JlIGl0IGhlcmUKICAgICAgICAgICAgY29udGludWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKAogICAgICAgICAgICAgICAgJ1Vuc3VwcG9ydGVkIHNvdXJjZSB0eXBlOiB7MH0nLmZvcm1hdChzb3VyY2UpKQoKICAgICAgICByZXN1bHRzLmFwcGVuZCgoeGZvcm1fbmFtZSh0YXJnZXQpLCB2YWx1ZSkpCgogICAgcmV0dXJuIHJlc3VsdHMKCgpkZWYgYnVpbGRfZW1wdHlfcmVzcG9uc2Uoc2VhcmNoX3BhdGgsIG9wZXJhdGlvbl9uYW1lLCBzZXJ2aWNlX21vZGVsKToKICAgICIiIgogICAgQ3JlYXRlcyBhbiBhcHByb3ByaWF0ZSBlbXB0eSByZXNwb25zZSBmb3IgdGhlIHR5cGUgdGhhdCBpcyBleHBlY3RlZCwKICAgIGJhc2VkIG9uIHRoZSBzZXJ2aWNlIG1vZGVsJ3Mgc2hhcGUgdHlwZS4gRm9yIGV4YW1wbGUsIGEgdmFsdWUgdGhhdAogICAgaXMgbm9ybWFsbHkgYSBsaXN0IHdvdWxkIHRoZW4gcmV0dXJuIGFuIGVtcHR5IGxpc3QuIEEgc3RydWN0dXJlIHdvdWxkCiAgICByZXR1cm4gYW4gZW1wdHkgZGljdCwgYW5kIGEgbnVtYmVyIHdvdWxkIHJldHVybiBOb25lLgoKICAgIDp0eXBlIHNlYXJjaF9wYXRoOiBzdHJpbmcKICAgIDpwYXJhbSBzZWFyY2hfcGF0aDogSk1FU1BhdGggZXhwcmVzc2lvbiB0byBzZWFyY2ggaW4gdGhlIHJlc3BvbnNlCiAgICA6dHlwZSBvcGVyYXRpb25fbmFtZTogc3RyaW5nCiAgICA6cGFyYW0gb3BlcmF0aW9uX25hbWU6IE5hbWUgb2YgdGhlIHVuZGVybHlpbmcgc2VydmljZSBvcGVyYXRpb24uCiAgICA6dHlwZSBzZXJ2aWNlX21vZGVsOiA6cmVmOmBib3RvY29yZS5tb2RlbC5TZXJ2aWNlTW9kZWxgCiAgICA6cGFyYW0gc2VydmljZV9tb2RlbDogVGhlIEJvdG9jb3JlIHNlcnZpY2UgbW9kZWwKICAgIDpydHlwZTogZGljdCwgbGlzdCwgb3IgTm9uZQogICAgOnJldHVybjogQW4gYXBwcm9wcmlhdGUgZW1wdHkgdmFsdWUKICAgICIiIgogICAgcmVzcG9uc2UgPSBOb25lCgogICAgb3BlcmF0aW9uX21vZGVsID0gc2VydmljZV9tb2RlbC5vcGVyYXRpb25fbW9kZWwob3BlcmF0aW9uX25hbWUpCiAgICBzaGFwZSA9IG9wZXJhdGlvbl9tb2RlbC5vdXRwdXRfc2hhcGUKCiAgICBpZiBzZWFyY2hfcGF0aDoKICAgICAgICAjIFdhbGsgdGhlIHNlYXJjaCBwYXRoIGFuZCBmaW5kIHRoZSBmaW5hbCBzaGFwZS4gRm9yIGV4YW1wbGUsIGdpdmVuCiAgICAgICAgIyBhIHBhdGggb2YgYGBmb28uYmFyWzBdLmJhemBgLCB3ZSBmaXJzdCBmaW5kIHRoZSBzaGFwZSBmb3IgYGBmb29gYCwKICAgICAgICAjIHRoZW4gdGhlIHNoYXBlIGZvciBgYGJhcmBgIChpZ25vcmluZyB0aGUgaW5kZXhpbmcpLCBhbmQgZmluYWxseQogICAgICAgICMgdGhlIHNoYXBlIGZvciBgYGJhemBgLgogICAgICAgIGZvciBpdGVtIGluIHNlYXJjaF9wYXRoLnNwbGl0KCcuJyk6CiAgICAgICAgICAgIGl0ZW0gPSBpdGVtLnN0cmlwKCdbMDEyMzQ1Njc4OV0kJykKCiAgICAgICAgICAgIGlmIHNoYXBlLnR5cGVfbmFtZSA9PSAnc3RydWN0dXJlJzoKICAgICAgICAgICAgICAgIHNoYXBlID0gc2hhcGUubWVtYmVyc1tpdGVtXQogICAgICAgICAgICBlbGlmIHNoYXBlLnR5cGVfbmFtZSA9PSAnbGlzdCc6CiAgICAgICAgICAgICAgICBzaGFwZSA9IHNoYXBlLm1lbWJlcgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigKICAgICAgICAgICAgICAgICAgICAnU2VhcmNoIHBhdGggaGl0cyBzaGFwZSB0eXBlIHswfSBmcm9tIHsxfScuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICBzaGFwZS50eXBlX25hbWUsIGl0ZW0pKQoKICAgICMgQW55dGhpbmcgbm90IGhhbmRsZWQgaGVyZSBpcyBzZXQgdG8gTm9uZQogICAgaWYgc2hhcGUudHlwZV9uYW1lID09ICdzdHJ1Y3R1cmUnOgogICAgICAgIHJlc3BvbnNlID0ge30KICAgIGVsaWYgc2hhcGUudHlwZV9uYW1lID09ICdsaXN0JzoKICAgICAgICByZXNwb25zZSA9IFtdCiAgICBlbGlmIHNoYXBlLnR5cGVfbmFtZSA9PSAnbWFwJzoKICAgICAgICByZXNwb25zZSA9IHt9CgogICAgcmV0dXJuIHJlc3BvbnNlCgoKY2xhc3MgUmF3SGFuZGxlcihvYmplY3QpOgogICAgIiIiCiAgICBBIHJhdyBhY3Rpb24gcmVzcG9uc2UgaGFuZGxlci4gVGhpcyBwYXNzZWQgdGhyb3VnaCB0aGUgcmVzcG9uc2UKICAgIGRpY3Rpb25hcnksIG9wdGlvbmFsbHkgYWZ0ZXIgcGVyZm9ybWluZyBhIEpNRVNQYXRoIHNlYXJjaCBpZiBvbmUKICAgIGhhcyBiZWVuIGRlZmluZWQgZm9yIHRoZSBhY3Rpb24uCgogICAgOnR5cGUgc2VhcmNoX3BhdGg6IHN0cmluZwogICAgOnBhcmFtIHNlYXJjaF9wYXRoOiBKTUVTUGF0aCBleHByZXNzaW9uIHRvIHNlYXJjaCBpbiB0aGUgcmVzcG9uc2UKICAgIDpydHlwZTogZGljdAogICAgOnJldHVybjogU2VydmljZSByZXNwb25zZQogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgc2VhcmNoX3BhdGgpOgogICAgICAgIHNlbGYuc2VhcmNoX3BhdGggPSBzZWFyY2hfcGF0aAoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCBwYXJlbnQsIHBhcmFtcywgcmVzcG9uc2UpOgogICAgICAgICIiIgogICAgICAgIDp0eXBlIHBhcmVudDogU2VydmljZVJlc291cmNlCiAgICAgICAgOnBhcmFtIHBhcmVudDogVGhlIHJlc291cmNlIGluc3RhbmNlIHRvIHdoaWNoIHRoaXMgYWN0aW9uIGlzIGF0dGFjaGVkLgogICAgICAgIDp0eXBlIHBhcmFtczogZGljdAogICAgICAgIDpwYXJhbSBwYXJhbXM6IFJlcXVlc3QgcGFyYW1ldGVycyBzZW50IHRvIHRoZSBzZXJ2aWNlLgogICAgICAgIDp0eXBlIHJlc3BvbnNlOiBkaWN0CiAgICAgICAgOnBhcmFtIHJlc3BvbnNlOiBMb3ctbGV2ZWwgb3BlcmF0aW9uIHJlc3BvbnNlLgogICAgICAgICIiIgogICAgICAgICMgVE9ETzogUmVtb3ZlIHRoZSAnJCcgY2hlY2sgYWZ0ZXIgSk1FU1BhdGggc3VwcG9ydHMgaXQKICAgICAgICBpZiBzZWxmLnNlYXJjaF9wYXRoIGFuZCBzZWxmLnNlYXJjaF9wYXRoICE9ICckJzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBqbWVzcGF0aC5zZWFyY2goc2VsZi5zZWFyY2hfcGF0aCwgcmVzcG9uc2UpCgogICAgICAgIHJldHVybiByZXNwb25zZQoKCmNsYXNzIFJlc291cmNlSGFuZGxlcihvYmplY3QpOgogICAgIiIiCiAgICBDcmVhdGVzIGEgbmV3IHJlc291cmNlIG9yIGxpc3Qgb2YgbmV3IHJlc291cmNlcyBmcm9tIHRoZSBsb3ctbGV2ZWwKICAgIHJlc3BvbnNlIGJhc2VkIG9uIHRoZSBnaXZlbiByZXNwb25zZSByZXNvdXJjZSBkZWZpbml0aW9uLgoKICAgIDp0eXBlIHNlYXJjaF9wYXRoOiBzdHJpbmcKICAgIDpwYXJhbSBzZWFyY2hfcGF0aDogSk1FU1BhdGggZXhwcmVzc2lvbiB0byBzZWFyY2ggaW4gdGhlIHJlc3BvbnNlCgogICAgOnR5cGUgZmFjdG9yeTogUmVzb3VyY2VGYWN0b3J5CiAgICA6cGFyYW0gZmFjdG9yeTogVGhlIGZhY3RvcnkgdGhhdCBjcmVhdGVkIHRoZSByZXNvdXJjZSBjbGFzcyB0byB3aGljaAogICAgICAgICAgICAgICAgICAgIHRoaXMgYWN0aW9uIGlzIGF0dGFjaGVkLgoKICAgIDp0eXBlIHJlc291cmNlX21vZGVsOiA6cHk6Y2xhc3M6YH5ib3RvMy5yZXNvdXJjZXMubW9kZWwuUmVzcG9uc2VSZXNvdXJjZWAKICAgIDpwYXJhbSByZXNvdXJjZV9tb2RlbDogUmVzcG9uc2UgcmVzb3VyY2UgbW9kZWwuCgogICAgOnR5cGUgc2VydmljZV9jb250ZXh0OiA6cHk6Y2xhc3M6YH5ib3RvMy51dGlscy5TZXJ2aWNlQ29udGV4dGAKICAgIDpwYXJhbSBzZXJ2aWNlX2NvbnRleHQ6IENvbnRleHQgYWJvdXQgdGhlIEFXUyBzZXJ2aWNlCgogICAgOnR5cGUgb3BlcmF0aW9uX25hbWU6IHN0cmluZwogICAgOnBhcmFtIG9wZXJhdGlvbl9uYW1lOiBOYW1lIG9mIHRoZSB1bmRlcmx5aW5nIHNlcnZpY2Ugb3BlcmF0aW9uLCBpZiBpdAogICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdHMuCgogICAgOnJ0eXBlOiBTZXJ2aWNlUmVzb3VyY2Ugb3IgbGlzdAogICAgOnJldHVybjogTmV3IHJlc291cmNlIGluc3RhbmNlKHMpLgogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgc2VhcmNoX3BhdGgsIGZhY3RvcnksIHJlc291cmNlX21vZGVsLAogICAgICAgICAgICAgICAgIHNlcnZpY2VfY29udGV4dCwgb3BlcmF0aW9uX25hbWU9Tm9uZSk6CiAgICAgICAgc2VsZi5zZWFyY2hfcGF0aCA9IHNlYXJjaF9wYXRoCiAgICAgICAgc2VsZi5mYWN0b3J5ID0gZmFjdG9yeQogICAgICAgIHNlbGYucmVzb3VyY2VfbW9kZWwgPSByZXNvdXJjZV9tb2RlbAogICAgICAgIHNlbGYub3BlcmF0aW9uX25hbWUgPSBvcGVyYXRpb25fbmFtZQogICAgICAgIHNlbGYuc2VydmljZV9jb250ZXh0ID0gc2VydmljZV9jb250ZXh0CgogICAgZGVmIF9fY2FsbF9fKHNlbGYsIHBhcmVudCwgcGFyYW1zLCByZXNwb25zZSk6CiAgICAgICAgIiIiCiAgICAgICAgOnR5cGUgcGFyZW50OiBTZXJ2aWNlUmVzb3VyY2UKICAgICAgICA6cGFyYW0gcGFyZW50OiBUaGUgcmVzb3VyY2UgaW5zdGFuY2UgdG8gd2hpY2ggdGhpcyBhY3Rpb24gaXMgYXR0YWNoZWQuCiAgICAgICAgOnR5cGUgcGFyYW1zOiBkaWN0CiAgICAgICAgOnBhcmFtIHBhcmFtczogUmVxdWVzdCBwYXJhbWV0ZXJzIHNlbnQgdG8gdGhlIHNlcnZpY2UuCiAgICAgICAgOnR5cGUgcmVzcG9uc2U6IGRpY3QKICAgICAgICA6cGFyYW0gcmVzcG9uc2U6IExvdy1sZXZlbCBvcGVyYXRpb24gcmVzcG9uc2UuCiAgICAgICAgIiIiCiAgICAgICAgcmVzb3VyY2VfbmFtZSA9IHNlbGYucmVzb3VyY2VfbW9kZWwudHlwZQogICAgICAgIGpzb25fZGVmaW5pdGlvbiA9IHNlbGYuc2VydmljZV9jb250ZXh0LnJlc291cmNlX2pzb25fZGVmaW5pdGlvbnMuZ2V0KAogICAgICAgICAgICByZXNvdXJjZV9uYW1lKQoKICAgICAgICAjIExvYWQgdGhlIG5ldyByZXNvdXJjZSBjbGFzcyB0aGF0IHdpbGwgcmVzdWx0IGZyb20gdGhpcyBhY3Rpb24uCiAgICAgICAgcmVzb3VyY2VfY2xzID0gc2VsZi5mYWN0b3J5LmxvYWRfZnJvbV9kZWZpbml0aW9uKAogICAgICAgICAgICByZXNvdXJjZV9uYW1lPXJlc291cmNlX25hbWUsCiAgICAgICAgICAgIHNpbmdsZV9yZXNvdXJjZV9qc29uX2RlZmluaXRpb249anNvbl9kZWZpbml0aW9uLAogICAgICAgICAgICBzZXJ2aWNlX2NvbnRleHQ9c2VsZi5zZXJ2aWNlX2NvbnRleHQKICAgICAgICApCiAgICAgICAgcmF3X3Jlc3BvbnNlID0gcmVzcG9uc2UKICAgICAgICBzZWFyY2hfcmVzcG9uc2UgPSBOb25lCgogICAgICAgICMgQW55dGltZSBhIHBhdGggaXMgZGVmaW5lZCwgaXQgbWVhbnMgdGhlIHJlc3BvbnNlIGNvbnRhaW5zIHRoZQogICAgICAgICMgcmVzb3VyY2UncyBhdHRyaWJ1dGVzLCBzbyByZXNvdXJjZV9kYXRhIGdldHMgc2V0IGhlcmUuIEl0CiAgICAgICAgIyBldmVudHVhbGx5IGVuZHMgdXAgaW4gcmVzb3VyY2UubWV0YS5kYXRhLCB3aGljaCBpcyB3aGVyZQogICAgICAgICMgdGhlIGF0dHJpYnV0ZSBwcm9wZXJ0aWVzIGxvb2sgZm9yIGRhdGEuCiAgICAgICAgaWYgc2VsZi5zZWFyY2hfcGF0aDoKICAgICAgICAgICAgc2VhcmNoX3Jlc3BvbnNlID0gam1lc3BhdGguc2VhcmNoKHNlbGYuc2VhcmNoX3BhdGgsIHJhd19yZXNwb25zZSkKCiAgICAgICAgIyBGaXJzdCwgd2UgcGFyc2UgYWxsIHRoZSBpZGVudGlmaWVycywgdGhlbiBjcmVhdGUgdGhlIGluZGl2aWR1YWwKICAgICAgICAjIHJlc3BvbnNlIHJlc291cmNlcyB1c2luZyB0aGVtLiBBbnkgaWRlbnRpZmllcnMgdGhhdCBhcmUgbGlzdHMKICAgICAgICAjIHdpbGwgaGF2ZSBvbmUgaXRlbSBjb25zdW1lZCBmcm9tIHRoZSBmcm9udCBvZiB0aGUgbGlzdCBmb3IgZWFjaAogICAgICAgICMgcmVzb3VyY2UgdGhhdCBpcyBpbnN0YW50aWF0ZWQuIEl0ZW1zIHdoaWNoIGFyZSBub3QgYSBsaXN0IHdpbGwKICAgICAgICAjIGJlIHNldCBhcyB0aGUgc2FtZSB2YWx1ZSBvbiBlYWNoIG5ldyByZXNvdXJjZSBpbnN0YW5jZS4KICAgICAgICBpZGVudGlmaWVycyA9IGRpY3QoYnVpbGRfaWRlbnRpZmllcnMoCiAgICAgICAgICAgIHNlbGYucmVzb3VyY2VfbW9kZWwuaWRlbnRpZmllcnMsIHBhcmVudCwgcGFyYW1zLAogICAgICAgICAgICByYXdfcmVzcG9uc2UpKQoKICAgICAgICAjIElmIGFueSBvZiB0aGUgaWRlbnRpZmllcnMgaXMgYSBsaXN0LCB0aGVuIHRoZSByZXNwb25zZSBpcyBwbHVyYWwKICAgICAgICBwbHVyYWwgPSBbdiBmb3IgdiBpbiBpZGVudGlmaWVycy52YWx1ZXMoKSBpZiBpc2luc3RhbmNlKHYsIGxpc3QpXQoKICAgICAgICBpZiBwbHVyYWw6CiAgICAgICAgICAgIHJlc3BvbnNlID0gW10KCiAgICAgICAgICAgICMgVGhlIG51bWJlciBvZiBpdGVtcyBpbiBhbiBpZGVudGlmaWVyIHRoYXQgaXMgYSBsaXN0IHdpbGwKICAgICAgICAgICAgIyBkZXRlcm1pbmUgaG93IG1hbnkgcmVzb3VyY2UgaW5zdGFuY2VzIHRvIGNyZWF0ZS4KICAgICAgICAgICAgZm9yIGkgaW4gcmFuZ2UobGVuKHBsdXJhbFswXSkpOgogICAgICAgICAgICAgICAgIyBSZXNwb25zZSBpdGVtIGRhdGEgaXMgKm9ubHkqIGF2YWlsYWJsZSBpZiBhIHNlYXJjaCBwYXRoCiAgICAgICAgICAgICAgICAjIHdhcyBnaXZlbi4gVGhpcyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgbG9hZGluZyB1bnJlbGF0ZWQKICAgICAgICAgICAgICAgICMgZGF0YSB0aGF0IG1heSBiZSBpbiB0aGUgcmVzcG9uc2UuCiAgICAgICAgICAgICAgICByZXNwb25zZV9pdGVtID0gTm9uZQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX3Jlc3BvbnNlOgogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX2l0ZW0gPSBzZWFyY2hfcmVzcG9uc2VbaV0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZV9yZXNwb25zZV9pdGVtKHJlc291cmNlX2NscywgcGFyZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcnMsIHJlc3BvbnNlX2l0ZW0pKQogICAgICAgIGVsaWYgYWxsX25vdF9ub25lKGlkZW50aWZpZXJzLnZhbHVlcygpKToKICAgICAgICAgICAgIyBBbGwgaWRlbnRpZmllcnMgbXVzdCBhbHdheXMgZXhpc3QsIG90aGVyd2lzZSB0aGUgcmVzb3VyY2UKICAgICAgICAgICAgIyBjYW5ub3QgYmUgaW5zdGFudGlhdGVkLgogICAgICAgICAgICByZXNwb25zZSA9IHNlbGYuaGFuZGxlX3Jlc3BvbnNlX2l0ZW0oCiAgICAgICAgICAgICAgICByZXNvdXJjZV9jbHMsIHBhcmVudCwgaWRlbnRpZmllcnMsIHNlYXJjaF9yZXNwb25zZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIFRoZSByZXNwb25zZSBzaG91bGQgYmUgZW1wdHksIGJ1dCB0aGF0IG1heSBtZWFuIGFuCiAgICAgICAgICAgICMgZW1wdHkgZGljdCwgbGlzdCwgb3IgTm9uZSBiYXNlZCBvbiB3aGV0aGVyIHdlIG1ha2UKICAgICAgICAgICAgIyBhIHJlbW90ZSBzZXJ2aWNlIGNhbGwgYW5kIHdoYXQgc2hhcGUgaXQgaXMgZXhwZWN0ZWQKICAgICAgICAgICAgIyB0byByZXR1cm4uCiAgICAgICAgICAgIHJlc3BvbnNlID0gTm9uZQogICAgICAgICAgICBpZiBzZWxmLm9wZXJhdGlvbl9uYW1lIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgIyBBIHJlbW90ZSBzZXJ2aWNlIGNhbGwgd2FzIG1hZGUsIHNvIHRyeSBhbmQgZGV0ZXJtaW5lCiAgICAgICAgICAgICAgICAjIGl0cyBzaGFwZS4KICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gYnVpbGRfZW1wdHlfcmVzcG9uc2UoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWFyY2hfcGF0aCwgc2VsZi5vcGVyYXRpb25fbmFtZSwKICAgICAgICAgICAgICAgICAgICBzZWxmLnNlcnZpY2VfY29udGV4dC5zZXJ2aWNlX21vZGVsKQoKICAgICAgICByZXR1cm4gcmVzcG9uc2UKCiAgICBkZWYgaGFuZGxlX3Jlc3BvbnNlX2l0ZW0oc2VsZiwgcmVzb3VyY2VfY2xzLCBwYXJlbnQsIGlkZW50aWZpZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlX2RhdGEpOgogICAgICAgICIiIgogICAgICAgIEhhbmRsZXMgdGhlIGNyZWF0aW9uIG9mIGEgc2luZ2xlIHJlc3BvbnNlIGl0ZW0gYnkgc2V0dGluZwogICAgICAgIHBhcmFtZXRlcnMgYW5kIGNyZWF0aW5nIHRoZSBhcHByb3ByaWF0ZSByZXNvdXJjZSBpbnN0YW5jZS4KCiAgICAgICAgOnR5cGUgcmVzb3VyY2VfY2xzOiBTZXJ2aWNlUmVzb3VyY2Ugc3ViY2xhc3MKICAgICAgICA6cGFyYW0gcmVzb3VyY2VfY2xzOiBUaGUgcmVzb3VyY2UgY2xhc3MgdG8gaW5zdGFudGlhdGUuCiAgICAgICAgOnR5cGUgcGFyZW50OiBTZXJ2aWNlUmVzb3VyY2UKICAgICAgICA6cGFyYW0gcGFyZW50OiBUaGUgcmVzb3VyY2UgaW5zdGFuY2UgdG8gd2hpY2ggdGhpcyBhY3Rpb24gaXMgYXR0YWNoZWQuCiAgICAgICAgOnR5cGUgaWRlbnRpZmllcnM6IGRpY3QKICAgICAgICA6cGFyYW0gaWRlbnRpZmllcnM6IE1hcCBvZiBpZGVudGlmaWVyIG5hbWVzIHRvIHZhbHVlIG9yIHZhbHVlcy4KICAgICAgICA6dHlwZSByZXNvdXJjZV9kYXRhOiBkaWN0IG9yIE5vbmUKICAgICAgICA6cGFyYW0gcmVzb3VyY2VfZGF0YTogRGF0YSBmb3IgcmVzb3VyY2UgYXR0cmlidXRlcy4KICAgICAgICA6cnR5cGU6IFNlcnZpY2VSZXNvdXJjZQogICAgICAgIDpyZXR1cm46IE5ldyByZXNvdXJjZSBpbnN0YW5jZS4KICAgICAgICAiIiIKICAgICAgICBrd2FyZ3MgPSB7CiAgICAgICAgICAgICdjbGllbnQnOiBwYXJlbnQubWV0YS5jbGllbnQsCiAgICAgICAgfQoKICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gaWRlbnRpZmllcnMuaXRlbXMoKToKICAgICAgICAgICAgIyBJZiB2YWx1ZSBpcyBhIGxpc3QsIHRoZW4gY29uc3VtZSB0aGUgbmV4dCBpdGVtCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIGxpc3QpOgogICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5wb3AoMCkKCiAgICAgICAgICAgIGt3YXJnc1tuYW1lXSA9IHZhbHVlCgogICAgICAgIHJlc291cmNlID0gcmVzb3VyY2VfY2xzKCoqa3dhcmdzKQoKICAgICAgICBpZiByZXNvdXJjZV9kYXRhIGlzIG5vdCBOb25lOgogICAgICAgICAgICByZXNvdXJjZS5tZXRhLmRhdGEgPSByZXNvdXJjZV9kYXRhCgogICAgICAgIHJldHVybiByZXNvdXJjZQo=
