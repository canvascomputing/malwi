statistics:
  total_files: 1
  skipped_files: 0.0
  processed_objects: 1
  malicious_objects: 0
details:
- path: .repo_cache/malicious_repos/pypi_malregistry/quantiumbase/0.8.1/quantiumbase-0.8.1/quantiumbase-0.8.1/quantiumbase/backends/mysql.py
  contents:
  - name: MySQLConnection.execute_many
    score: 0.0
    code: |-
      async def execute_many(self, queries: typing.List[ClauseElement]) -> None:
              assert self._connection is not None, "Connection is not acquired"
              cursor = await self._connection.cursor()
              try:
                  for single_query in queries:
                      single_query, args, context = self._compile(single_query)
                      await cursor.execute(single_query, args)
              finally:
                  await cursor.close()
    tokens: return_generator pop_top resume load_fast self load_attr _connection pop_jump_if_not_none TO_NUMBER load_assertion_error load_const STRING_LEN_S_ENT_HIGH call raise_varargs load_fast self load_attr _connection load_attr cursor call get_awaitable load_const send TO_NUMBER yield_value resume jump_backward_no_interrupt TO_NUMBER end_send store_fast cursor nop load_fast queries get_iter for_iter TO_NUMBER store_fast single_query load_fast self load_attr _compile load_fast single_query call unpack_sequence store_fast single_query store_fast args store_fast context load_fast cursor load_attr execute load_fast single_query load_fast args call get_awaitable load_const send TO_NUMBER yield_value resume jump_backward_no_interrupt TO_NUMBER end_send pop_top jump_backward TO_NUMBER end_for nop load_fast cursor load_attr close call get_awaitable load_const send TO_NUMBER yield_value resume jump_backward_no_interrupt TO_NUMBER end_send pop_top return_const None cleanup_throw jump_backward TO_NUMBER cleanup_throw jump_backward TO_NUMBER cleanup_throw jump_backward TO_NUMBER push_exc_info load_fast cursor load_attr close call get_awaitable load_const send TO_NUMBER yield_value resume jump_backward_no_interrupt TO_NUMBER cleanup_throw end_send pop_top reraise copy pop_except reraise call_intrinsic_1 INTRINSIC_STOPITERATION_ERROR reraise
    hash: 10c52821ee522cd0693e5831788aac6f5da7f011480440d654a4e067e1ca87dc
sources:
  ? .repo_cache/malicious_repos/pypi_malregistry/quantiumbase/0.8.1/quantiumbase-0.8.1/quantiumbase-0.8.1/quantiumbase/backends/mysql.py
  : aW1wb3J0IGdldHBhc3MKaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IHR5cGluZwppbXBvcnQgdXVpZAoKaW1wb3J0IGFpb215c3FsCmZyb20gc3FsYWxjaGVteS5kaWFsZWN0cy5teXNxbCBpbXBvcnQgcHlteXNxbApmcm9tIHNxbGFsY2hlbXkuZW5naW5lLmN1cnNvciBpbXBvcnQgQ3Vyc29yUmVzdWx0TWV0YURhdGEKZnJvbSBzcWxhbGNoZW15LmVuZ2luZS5pbnRlcmZhY2VzIGltcG9ydCBEaWFsZWN0LCBFeGVjdXRpb25Db250ZXh0CmZyb20gc3FsYWxjaGVteS5lbmdpbmUucm93IGltcG9ydCBSb3cKZnJvbSBzcWxhbGNoZW15LnNxbCBpbXBvcnQgQ2xhdXNlRWxlbWVudApmcm9tIHNxbGFsY2hlbXkuc3FsLmRkbCBpbXBvcnQgRERMRWxlbWVudAoKZnJvbSBxdWFudGl1bWJhc2UuY29yZSBpbXBvcnQgTE9HX0VYVFJBLCBEYXRhYmFzZVVSTApmcm9tIHF1YW50aXVtYmFzZS5pbnRlcmZhY2VzIGltcG9ydCAoCiAgICBDb25uZWN0aW9uQmFja2VuZCwKICAgIERhdGFiYXNlQmFja2VuZCwKICAgIFJlY29yZCwKICAgIFRyYW5zYWN0aW9uQmFja2VuZCwKKQoKbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoInF1YW50aXVtYmFzZSIpCgoKY2xhc3MgTXlTUUxCYWNrZW5kKERhdGFiYXNlQmFja2VuZCk6CiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwgZGF0YWJhc2VfdXJsOiB0eXBpbmcuVW5pb25bRGF0YWJhc2VVUkwsIHN0cl0sICoqb3B0aW9uczogdHlwaW5nLkFueQogICAgKSAtPiBOb25lOgogICAgICAgIHNlbGYuX2RhdGFiYXNlX3VybCA9IERhdGFiYXNlVVJMKGRhdGFiYXNlX3VybCkKICAgICAgICBzZWxmLl9vcHRpb25zID0gb3B0aW9ucwogICAgICAgIHNlbGYuX2RpYWxlY3QgPSBweW15c3FsLmRpYWxlY3QocGFyYW1zdHlsZT0icHlmb3JtYXQiKQogICAgICAgIHNlbGYuX2RpYWxlY3Quc3VwcG9ydHNfbmF0aXZlX2RlY2ltYWwgPSBUcnVlCiAgICAgICAgc2VsZi5fcG9vbCA9IE5vbmUKCiAgICBkZWYgX2dldF9jb25uZWN0aW9uX2t3YXJncyhzZWxmKSAtPiBkaWN0OgogICAgICAgIHVybF9vcHRpb25zID0gc2VsZi5fZGF0YWJhc2VfdXJsLm9wdGlvbnMKCiAgICAgICAga3dhcmdzID0ge30KICAgICAgICBtaW5fc2l6ZSA9IHVybF9vcHRpb25zLmdldCgibWluX3NpemUiKQogICAgICAgIG1heF9zaXplID0gdXJsX29wdGlvbnMuZ2V0KCJtYXhfc2l6ZSIpCiAgICAgICAgcG9vbF9yZWN5Y2xlID0gdXJsX29wdGlvbnMuZ2V0KCJwb29sX3JlY3ljbGUiKQogICAgICAgIHNzbCA9IHVybF9vcHRpb25zLmdldCgic3NsIikKCiAgICAgICAgaWYgbWluX3NpemUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGt3YXJnc1sibWluc2l6ZSJdID0gaW50KG1pbl9zaXplKQogICAgICAgIGlmIG1heF9zaXplIGlzIG5vdCBOb25lOgogICAgICAgICAgICBrd2FyZ3NbIm1heHNpemUiXSA9IGludChtYXhfc2l6ZSkKICAgICAgICBpZiBwb29sX3JlY3ljbGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGt3YXJnc1sicG9vbF9yZWN5Y2xlIl0gPSBpbnQocG9vbF9yZWN5Y2xlKQogICAgICAgIGlmIHNzbCBpcyBub3QgTm9uZToKICAgICAgICAgICAga3dhcmdzWyJzc2wiXSA9IHsidHJ1ZSI6IFRydWUsICJmYWxzZSI6IEZhbHNlfVtzc2wubG93ZXIoKV0KCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gc2VsZi5fb3B0aW9ucy5pdGVtcygpOgogICAgICAgICAgICAjIENvZXJjZSAnbWluX3NpemUnIGFuZCAnbWF4X3NpemUnIGZvciBjb25zaXN0ZW5jeS4KICAgICAgICAgICAgaWYga2V5ID09ICJtaW5fc2l6ZSI6CiAgICAgICAgICAgICAgICBrZXkgPSAibWluc2l6ZSIKICAgICAgICAgICAgZWxpZiBrZXkgPT0gIm1heF9zaXplIjoKICAgICAgICAgICAgICAgIGtleSA9ICJtYXhzaXplIgogICAgICAgICAgICBrd2FyZ3Nba2V5XSA9IHZhbHVlCgogICAgICAgIHJldHVybiBrd2FyZ3MKCiAgICBhc3luYyBkZWYgY29ubmVjdChzZWxmKSAtPiBOb25lOgogICAgICAgIGFzc2VydCBzZWxmLl9wb29sIGlzIE5vbmUsICJEYXRhYmFzZUJhY2tlbmQgaXMgYWxyZWFkeSBydW5uaW5nIgogICAgICAgIGt3YXJncyA9IHNlbGYuX2dldF9jb25uZWN0aW9uX2t3YXJncygpCiAgICAgICAgc2VsZi5fcG9vbCA9IGF3YWl0IGFpb215c3FsLmNyZWF0ZV9wb29sKAogICAgICAgICAgICBob3N0PXNlbGYuX2RhdGFiYXNlX3VybC5ob3N0bmFtZSwKICAgICAgICAgICAgcG9ydD1zZWxmLl9kYXRhYmFzZV91cmwucG9ydCBvciAzMzA2LAogICAgICAgICAgICB1c2VyPXNlbGYuX2RhdGFiYXNlX3VybC51c2VybmFtZSBvciBnZXRwYXNzLmdldHVzZXIoKSwKICAgICAgICAgICAgcGFzc3dvcmQ9c2VsZi5fZGF0YWJhc2VfdXJsLnBhc3N3b3JkLAogICAgICAgICAgICBkYj1zZWxmLl9kYXRhYmFzZV91cmwuZGF0YWJhc2UsCiAgICAgICAgICAgIGF1dG9jb21taXQ9VHJ1ZSwKICAgICAgICAgICAgKiprd2FyZ3MsCiAgICAgICAgKQoKICAgIGFzeW5jIGRlZiBkaXNjb25uZWN0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgYXNzZXJ0IHNlbGYuX3Bvb2wgaXMgbm90IE5vbmUsICJEYXRhYmFzZUJhY2tlbmQgaXMgbm90IHJ1bm5pbmciCiAgICAgICAgc2VsZi5fcG9vbC5jbG9zZSgpCiAgICAgICAgYXdhaXQgc2VsZi5fcG9vbC53YWl0X2Nsb3NlZCgpCiAgICAgICAgc2VsZi5fcG9vbCA9IE5vbmUKCiAgICBkZWYgY29ubmVjdGlvbihzZWxmKSAtPiAiTXlTUUxDb25uZWN0aW9uIjoKICAgICAgICByZXR1cm4gTXlTUUxDb25uZWN0aW9uKHNlbGYsIHNlbGYuX2RpYWxlY3QpCgoKY2xhc3MgQ29tcGlsYXRpb25Db250ZXh0OgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGNvbnRleHQ6IEV4ZWN1dGlvbkNvbnRleHQpOgogICAgICAgIHNlbGYuY29udGV4dCA9IGNvbnRleHQKCgpjbGFzcyBNeVNRTENvbm5lY3Rpb24oQ29ubmVjdGlvbkJhY2tlbmQpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGRhdGFiYXNlOiBNeVNRTEJhY2tlbmQsIGRpYWxlY3Q6IERpYWxlY3QpOgogICAgICAgIHNlbGYuX2RhdGFiYXNlID0gZGF0YWJhc2UKICAgICAgICBzZWxmLl9kaWFsZWN0ID0gZGlhbGVjdAogICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24gPSBOb25lICAjIHR5cGU6IHR5cGluZy5PcHRpb25hbFthaW9teXNxbC5Db25uZWN0aW9uXQoKICAgIGFzeW5jIGRlZiBhY3F1aXJlKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgYXNzZXJ0IHNlbGYuX2Nvbm5lY3Rpb24gaXMgTm9uZSwgIkNvbm5lY3Rpb24gaXMgYWxyZWFkeSBhY3F1aXJlZCIKICAgICAgICBhc3NlcnQgc2VsZi5fZGF0YWJhc2UuX3Bvb2wgaXMgbm90IE5vbmUsICJEYXRhYmFzZUJhY2tlbmQgaXMgbm90IHJ1bm5pbmciCiAgICAgICAgc2VsZi5fY29ubmVjdGlvbiA9IGF3YWl0IHNlbGYuX2RhdGFiYXNlLl9wb29sLmFjcXVpcmUoKQoKICAgIGFzeW5jIGRlZiByZWxlYXNlKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgYXNzZXJ0IHNlbGYuX2Nvbm5lY3Rpb24gaXMgbm90IE5vbmUsICJDb25uZWN0aW9uIGlzIG5vdCBhY3F1aXJlZCIKICAgICAgICBhc3NlcnQgc2VsZi5fZGF0YWJhc2UuX3Bvb2wgaXMgbm90IE5vbmUsICJEYXRhYmFzZUJhY2tlbmQgaXMgbm90IHJ1bm5pbmciCiAgICAgICAgYXdhaXQgc2VsZi5fZGF0YWJhc2UuX3Bvb2wucmVsZWFzZShzZWxmLl9jb25uZWN0aW9uKQogICAgICAgIHNlbGYuX2Nvbm5lY3Rpb24gPSBOb25lCgogICAgYXN5bmMgZGVmIGZldGNoX2FsbChzZWxmLCBxdWVyeTogQ2xhdXNlRWxlbWVudCkgLT4gdHlwaW5nLkxpc3RbUmVjb3JkXToKICAgICAgICBhc3NlcnQgc2VsZi5fY29ubmVjdGlvbiBpcyBub3QgTm9uZSwgIkNvbm5lY3Rpb24gaXMgbm90IGFjcXVpcmVkIgogICAgICAgIHF1ZXJ5X3N0ciwgYXJncywgY29udGV4dCA9IHNlbGYuX2NvbXBpbGUocXVlcnkpCiAgICAgICAgY3Vyc29yID0gYXdhaXQgc2VsZi5fY29ubmVjdGlvbi5jdXJzb3IoKQogICAgICAgIHRyeToKICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmV4ZWN1dGUocXVlcnlfc3RyLCBhcmdzKQogICAgICAgICAgICByb3dzID0gYXdhaXQgY3Vyc29yLmZldGNoYWxsKCkKICAgICAgICAgICAgbWV0YWRhdGEgPSBDdXJzb3JSZXN1bHRNZXRhRGF0YShjb250ZXh0LCBjdXJzb3IuZGVzY3JpcHRpb24pCiAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICBSb3coCiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEsCiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEuX3Byb2Nlc3NvcnMsCiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEuX2tleW1hcCwKICAgICAgICAgICAgICAgICAgICBSb3cuX2RlZmF1bHRfa2V5X3N0eWxlLAogICAgICAgICAgICAgICAgICAgIHJvdywKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGZvciByb3cgaW4gcm93cwogICAgICAgICAgICBdCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmNsb3NlKCkKCiAgICBhc3luYyBkZWYgZmV0Y2hfb25lKHNlbGYsIHF1ZXJ5OiBDbGF1c2VFbGVtZW50KSAtPiB0eXBpbmcuT3B0aW9uYWxbUmVjb3JkXToKICAgICAgICBhc3NlcnQgc2VsZi5fY29ubmVjdGlvbiBpcyBub3QgTm9uZSwgIkNvbm5lY3Rpb24gaXMgbm90IGFjcXVpcmVkIgogICAgICAgIHF1ZXJ5X3N0ciwgYXJncywgY29udGV4dCA9IHNlbGYuX2NvbXBpbGUocXVlcnkpCiAgICAgICAgY3Vyc29yID0gYXdhaXQgc2VsZi5fY29ubmVjdGlvbi5jdXJzb3IoKQogICAgICAgIHRyeToKICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmV4ZWN1dGUocXVlcnlfc3RyLCBhcmdzKQogICAgICAgICAgICByb3cgPSBhd2FpdCBjdXJzb3IuZmV0Y2hvbmUoKQogICAgICAgICAgICBpZiByb3cgaXMgTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIG1ldGFkYXRhID0gQ3Vyc29yUmVzdWx0TWV0YURhdGEoY29udGV4dCwgY3Vyc29yLmRlc2NyaXB0aW9uKQogICAgICAgICAgICByZXR1cm4gUm93KAogICAgICAgICAgICAgICAgbWV0YWRhdGEsCiAgICAgICAgICAgICAgICBtZXRhZGF0YS5fcHJvY2Vzc29ycywKICAgICAgICAgICAgICAgIG1ldGFkYXRhLl9rZXltYXAsCiAgICAgICAgICAgICAgICBSb3cuX2RlZmF1bHRfa2V5X3N0eWxlLAogICAgICAgICAgICAgICAgcm93LAogICAgICAgICAgICApCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmNsb3NlKCkKCiAgICBhc3luYyBkZWYgZXhlY3V0ZShzZWxmLCBxdWVyeTogQ2xhdXNlRWxlbWVudCkgLT4gdHlwaW5nLkFueToKICAgICAgICBhc3NlcnQgc2VsZi5fY29ubmVjdGlvbiBpcyBub3QgTm9uZSwgIkNvbm5lY3Rpb24gaXMgbm90IGFjcXVpcmVkIgogICAgICAgIHF1ZXJ5X3N0ciwgYXJncywgY29udGV4dCA9IHNlbGYuX2NvbXBpbGUocXVlcnkpCiAgICAgICAgY3Vyc29yID0gYXdhaXQgc2VsZi5fY29ubmVjdGlvbi5jdXJzb3IoKQogICAgICAgIHRyeToKICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmV4ZWN1dGUocXVlcnlfc3RyLCBhcmdzKQogICAgICAgICAgICBpZiBjdXJzb3IubGFzdHJvd2lkID09IDA6CiAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLnJvd2NvdW50CiAgICAgICAgICAgIHJldHVybiBjdXJzb3IubGFzdHJvd2lkCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmNsb3NlKCkKCiAgICBhc3luYyBkZWYgZXhlY3V0ZV9tYW55KHNlbGYsIHF1ZXJpZXM6IHR5cGluZy5MaXN0W0NsYXVzZUVsZW1lbnRdKSAtPiBOb25lOgogICAgICAgIGFzc2VydCBzZWxmLl9jb25uZWN0aW9uIGlzIG5vdCBOb25lLCAiQ29ubmVjdGlvbiBpcyBub3QgYWNxdWlyZWQiCiAgICAgICAgY3Vyc29yID0gYXdhaXQgc2VsZi5fY29ubmVjdGlvbi5jdXJzb3IoKQogICAgICAgIHRyeToKICAgICAgICAgICAgZm9yIHNpbmdsZV9xdWVyeSBpbiBxdWVyaWVzOgogICAgICAgICAgICAgICAgc2luZ2xlX3F1ZXJ5LCBhcmdzLCBjb250ZXh0ID0gc2VsZi5fY29tcGlsZShzaW5nbGVfcXVlcnkpCiAgICAgICAgICAgICAgICBhd2FpdCBjdXJzb3IuZXhlY3V0ZShzaW5nbGVfcXVlcnksIGFyZ3MpCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmNsb3NlKCkKCiAgICBhc3luYyBkZWYgaXRlcmF0ZSgKICAgICAgICBzZWxmLCBxdWVyeTogQ2xhdXNlRWxlbWVudAogICAgKSAtPiB0eXBpbmcuQXN5bmNHZW5lcmF0b3JbdHlwaW5nLkFueSwgTm9uZV06CiAgICAgICAgYXNzZXJ0IHNlbGYuX2Nvbm5lY3Rpb24gaXMgbm90IE5vbmUsICJDb25uZWN0aW9uIGlzIG5vdCBhY3F1aXJlZCIKICAgICAgICBxdWVyeV9zdHIsIGFyZ3MsIGNvbnRleHQgPSBzZWxmLl9jb21waWxlKHF1ZXJ5KQogICAgICAgIGN1cnNvciA9IGF3YWl0IHNlbGYuX2Nvbm5lY3Rpb24uY3Vyc29yKCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGF3YWl0IGN1cnNvci5leGVjdXRlKHF1ZXJ5X3N0ciwgYXJncykKICAgICAgICAgICAgbWV0YWRhdGEgPSBDdXJzb3JSZXN1bHRNZXRhRGF0YShjb250ZXh0LCBjdXJzb3IuZGVzY3JpcHRpb24pCiAgICAgICAgICAgIGFzeW5jIGZvciByb3cgaW4gY3Vyc29yOgogICAgICAgICAgICAgICAgeWllbGQgUm93KAogICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLAogICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLl9wcm9jZXNzb3JzLAogICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhLl9rZXltYXAsCiAgICAgICAgICAgICAgICAgICAgUm93Ll9kZWZhdWx0X2tleV9zdHlsZSwKICAgICAgICAgICAgICAgICAgICByb3csCiAgICAgICAgICAgICAgICApCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmNsb3NlKCkKCiAgICBkZWYgdHJhbnNhY3Rpb24oc2VsZikgLT4gVHJhbnNhY3Rpb25CYWNrZW5kOgogICAgICAgIHJldHVybiBNeVNRTFRyYW5zYWN0aW9uKHNlbGYpCgogICAgZGVmIF9jb21waWxlKAogICAgICAgIHNlbGYsIHF1ZXJ5OiBDbGF1c2VFbGVtZW50CiAgICApIC0+IHR5cGluZy5UdXBsZVtzdHIsIGRpY3QsIENvbXBpbGF0aW9uQ29udGV4dF06CiAgICAgICAgY29tcGlsZWQgPSBxdWVyeS5jb21waWxlKAogICAgICAgICAgICBkaWFsZWN0PXNlbGYuX2RpYWxlY3QsIGNvbXBpbGVfa3dhcmdzPXsicmVuZGVyX3Bvc3Rjb21waWxlIjogVHJ1ZX0KICAgICAgICApCgogICAgICAgIGV4ZWN1dGlvbl9jb250ZXh0ID0gc2VsZi5fZGlhbGVjdC5leGVjdXRpb25fY3R4X2NscygpCiAgICAgICAgZXhlY3V0aW9uX2NvbnRleHQuZGlhbGVjdCA9IHNlbGYuX2RpYWxlY3QKCiAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UocXVlcnksIERETEVsZW1lbnQpOgogICAgICAgICAgICBhcmdzID0gY29tcGlsZWQuY29uc3RydWN0X3BhcmFtcygpCiAgICAgICAgICAgIGZvciBrZXksIHZhbCBpbiBhcmdzLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBpZiBrZXkgaW4gY29tcGlsZWQuX2JpbmRfcHJvY2Vzc29yczoKICAgICAgICAgICAgICAgICAgICBhcmdzW2tleV0gPSBjb21waWxlZC5fYmluZF9wcm9jZXNzb3JzW2tleV0odmFsKQoKICAgICAgICAgICAgZXhlY3V0aW9uX2NvbnRleHQucmVzdWx0X2NvbHVtbl9zdHJ1Y3QgPSAoCiAgICAgICAgICAgICAgICBjb21waWxlZC5fcmVzdWx0X2NvbHVtbnMsCiAgICAgICAgICAgICAgICBjb21waWxlZC5fb3JkZXJlZF9jb2x1bW5zLAogICAgICAgICAgICAgICAgY29tcGlsZWQuX3RleHR1YWxfb3JkZXJlZF9jb2x1bW5zLAogICAgICAgICAgICAgICAgY29tcGlsZWQuX2FkX2hvY190ZXh0dWFsLAogICAgICAgICAgICAgICAgY29tcGlsZWQuX2xvb3NlX2NvbHVtbl9uYW1lX21hdGNoaW5nLAogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYXJncyA9IHt9CgogICAgICAgIHF1ZXJ5X21lc3NhZ2UgPSBjb21waWxlZC5zdHJpbmcucmVwbGFjZSgiIFxuIiwgIiAiKS5yZXBsYWNlKCJcbiIsICIgIikKICAgICAgICBsb2dnZXIuZGVidWcoIlF1ZXJ5OiAlcyBBcmdzOiAlcyIsIHF1ZXJ5X21lc3NhZ2UsIHJlcHIoYXJncyksIGV4dHJhPUxPR19FWFRSQSkKICAgICAgICByZXR1cm4gY29tcGlsZWQuc3RyaW5nLCBhcmdzLCBDb21waWxhdGlvbkNvbnRleHQoZXhlY3V0aW9uX2NvbnRleHQpCgogICAgQHByb3BlcnR5CiAgICBkZWYgcmF3X2Nvbm5lY3Rpb24oc2VsZikgLT4gYWlvbXlzcWwuY29ubmVjdGlvbi5Db25uZWN0aW9uOgogICAgICAgIGFzc2VydCBzZWxmLl9jb25uZWN0aW9uIGlzIG5vdCBOb25lLCAiQ29ubmVjdGlvbiBpcyBub3QgYWNxdWlyZWQiCiAgICAgICAgcmV0dXJuIHNlbGYuX2Nvbm5lY3Rpb24KCgpjbGFzcyBNeVNRTFRyYW5zYWN0aW9uKFRyYW5zYWN0aW9uQmFja2VuZCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgY29ubmVjdGlvbjogTXlTUUxDb25uZWN0aW9uKToKICAgICAgICBzZWxmLl9jb25uZWN0aW9uID0gY29ubmVjdGlvbgogICAgICAgIHNlbGYuX2lzX3Jvb3QgPSBGYWxzZQogICAgICAgIHNlbGYuX3NhdmVwb2ludF9uYW1lID0gIiIKCiAgICBhc3luYyBkZWYgc3RhcnQoCiAgICAgICAgc2VsZiwgaXNfcm9vdDogYm9vbCwgZXh0cmFfb3B0aW9uczogdHlwaW5nLkRpY3RbdHlwaW5nLkFueSwgdHlwaW5nLkFueV0KICAgICkgLT4gTm9uZToKICAgICAgICBhc3NlcnQgc2VsZi5fY29ubmVjdGlvbi5fY29ubmVjdGlvbiBpcyBub3QgTm9uZSwgIkNvbm5lY3Rpb24gaXMgbm90IGFjcXVpcmVkIgogICAgICAgIHNlbGYuX2lzX3Jvb3QgPSBpc19yb290CiAgICAgICAgaWYgc2VsZi5faXNfcm9vdDoKICAgICAgICAgICAgYXdhaXQgc2VsZi5fY29ubmVjdGlvbi5fY29ubmVjdGlvbi5iZWdpbigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWQgPSBzdHIodXVpZC51dWlkNCgpKS5yZXBsYWNlKCItIiwgIl8iKQogICAgICAgICAgICBzZWxmLl9zYXZlcG9pbnRfbmFtZSA9IGYiU1RBUkxFVFRFX1NBVkVQT0lOVF97aWR9IgogICAgICAgICAgICBjdXJzb3IgPSBhd2FpdCBzZWxmLl9jb25uZWN0aW9uLl9jb25uZWN0aW9uLmN1cnNvcigpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGF3YWl0IGN1cnNvci5leGVjdXRlKGYiU0FWRVBPSU5UIHtzZWxmLl9zYXZlcG9pbnRfbmFtZX0iKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmNsb3NlKCkKCiAgICBhc3luYyBkZWYgY29tbWl0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgYXNzZXJ0IHNlbGYuX2Nvbm5lY3Rpb24uX2Nvbm5lY3Rpb24gaXMgbm90IE5vbmUsICJDb25uZWN0aW9uIGlzIG5vdCBhY3F1aXJlZCIKICAgICAgICBpZiBzZWxmLl9pc19yb290OgogICAgICAgICAgICBhd2FpdCBzZWxmLl9jb25uZWN0aW9uLl9jb25uZWN0aW9uLmNvbW1pdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY3Vyc29yID0gYXdhaXQgc2VsZi5fY29ubmVjdGlvbi5fY29ubmVjdGlvbi5jdXJzb3IoKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBhd2FpdCBjdXJzb3IuZXhlY3V0ZShmIlJFTEVBU0UgU0FWRVBPSU5UIHtzZWxmLl9zYXZlcG9pbnRfbmFtZX0iKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmNsb3NlKCkKCiAgICBhc3luYyBkZWYgcm9sbGJhY2soc2VsZikgLT4gTm9uZToKICAgICAgICBhc3NlcnQgc2VsZi5fY29ubmVjdGlvbi5fY29ubmVjdGlvbiBpcyBub3QgTm9uZSwgIkNvbm5lY3Rpb24gaXMgbm90IGFjcXVpcmVkIgogICAgICAgIGlmIHNlbGYuX2lzX3Jvb3Q6CiAgICAgICAgICAgIGF3YWl0IHNlbGYuX2Nvbm5lY3Rpb24uX2Nvbm5lY3Rpb24ucm9sbGJhY2soKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGN1cnNvciA9IGF3YWl0IHNlbGYuX2Nvbm5lY3Rpb24uX2Nvbm5lY3Rpb24uY3Vyc29yKCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYXdhaXQgY3Vyc29yLmV4ZWN1dGUoZiJST0xMQkFDSyBUTyBTQVZFUE9JTlQge3NlbGYuX3NhdmVwb2ludF9uYW1lfSIpCiAgICAgICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgICAgICBhd2FpdCBjdXJzb3IuY2xvc2UoKQo=
