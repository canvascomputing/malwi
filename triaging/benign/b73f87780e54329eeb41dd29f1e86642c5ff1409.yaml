statistics:
  total_files: 1
  skipped_files: 0.0
  processed_objects: 1
  malicious_objects: 0
details:
- path: .repo_cache/malicious_repos/pypi_malregistry/discord-py-v13/1.3/discord_py_v13-1.3-py3-none-any/discord-py-v13/role.py
  contents:
  - name: Role.delete
    score: 0.0
    code: |-
      async def delete(self, *, reason=None):
              """|coro|

              Deletes the role.

              You must have the :attr:`~Permissions.manage_roles` permission to
              use this.

              Parameters
              -----------
              reason: Optional[:class:`str`]
                  The reason for deleting this role. Shows up on the audit log.

              Raises
              --------
              Forbidden
                  You do not have permissions to delete the role.
              HTTPException
                  Deleting the role failed.
              """

              await self._state.http.delete_role(self.guild.id, self.id, reason=reason)
    tokens: return_generator pop_top resume load_fast self load_attr _state load_attr http load_attr delete_role load_fast self load_attr guild load_attr id load_fast self load_attr id load_fast reason kw_names reason call get_awaitable load_const send TO_NUMBER yield_value resume jump_backward_no_interrupt TO_NUMBER end_send pop_top return_const None cleanup_throw jump_backward TO_NUMBER call_intrinsic_1 INTRINSIC_STOPITERATION_ERROR reraise
    hash: 3a646d797fbd47eb4039055f2a4a767d06a10feef56b033788a8404c9a66e58b
sources:
  .repo_cache/malicious_repos/pypi_malregistry/discord-py-v13/1.3/discord_py_v13-1.3-py3-none-any/discord-py-v13/role.py: IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KCiIiIgpUaGUgTUlUIExpY2Vuc2UgKE1JVCkKCkNvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IFJhcHB0egoKUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwKdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgp0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwKYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlClNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CgpUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgphbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KClRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCk9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLApGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgpMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwpGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSCkRFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KIiIiCgpmcm9tIC5wZXJtaXNzaW9ucyBpbXBvcnQgUGVybWlzc2lvbnMKZnJvbSAuZXJyb3JzIGltcG9ydCBJbnZhbGlkQXJndW1lbnQKZnJvbSAuY29sb3VyIGltcG9ydCBDb2xvdXIKZnJvbSAubWl4aW5zIGltcG9ydCBIYXNoYWJsZQpmcm9tIC51dGlscyBpbXBvcnQgc25vd2ZsYWtlX3RpbWUsIF9nZXRfYXNfc25vd2ZsYWtlCgpjbGFzcyBSb2xlVGFnczoKICAgICIiIlJlcHJlc2VudHMgdGFncyBvbiBhIHJvbGUuCgogICAgQSByb2xlIHRhZyBpcyBhIHBpZWNlIG9mIGV4dHJhIGluZm9ybWF0aW9uIGF0dGFjaGVkIHRvIGEgbWFuYWdlZCByb2xlCiAgICB0aGF0IGdpdmVzIGl0IGNvbnRleHQgZm9yIHRoZSByZWFzb24gdGhlIHJvbGUgaXMgbWFuYWdlZC4KCiAgICBXaGlsZSB0aGlzIGNhbiBiZSBhY2Nlc3NlZCwgYSB1c2VmdWwgaW50ZXJmYWNlIGlzIGFsc28gcHJvdmlkZWQgaW4gdGhlCiAgICA6Y2xhc3M6YFJvbGVgIGFuZCA6Y2xhc3M6YEd1aWxkYCBjbGFzc2VzIGFzIHdlbGwuCgogICAgLi4gdmVyc2lvbmFkZGVkOjogMS42CgogICAgQXR0cmlidXRlcwogICAgLS0tLS0tLS0tLS0tCiAgICBib3RfaWQ6IE9wdGlvbmFsWzpjbGFzczpgaW50YF0KICAgICAgICBUaGUgYm90J3MgdXNlciBJRCB0aGF0IG1hbmFnZXMgdGhpcyByb2xlLgogICAgaW50ZWdyYXRpb25faWQ6IE9wdGlvbmFsWzpjbGFzczpgaW50YF0KICAgICAgICBUaGUgaW50ZWdyYXRpb24gSUQgdGhhdCBtYW5hZ2VzIHRoZSByb2xlLgogICAgIiIiCgogICAgX19zbG90c19fID0gKCdib3RfaWQnLCAnaW50ZWdyYXRpb25faWQnLCAnX3ByZW1pdW1fc3Vic2NyaWJlcicsKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBkYXRhKToKICAgICAgICBzZWxmLmJvdF9pZCA9IF9nZXRfYXNfc25vd2ZsYWtlKGRhdGEsICdib3RfaWQnKQogICAgICAgIHNlbGYuaW50ZWdyYXRpb25faWQgPSBfZ2V0X2FzX3Nub3dmbGFrZShkYXRhLCAnaW50ZWdyYXRpb25faWQnKQogICAgICAgICMgTk9URTogVGhlIEFQSSByZXR1cm5zICJudWxsIiBmb3IgdGhpcyBpZiBpdCdzIHZhbGlkLCB3aGljaCBjb3JyZXNwb25kcyB0byBOb25lLgogICAgICAgICMgVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBvdGhlciBmaWVsZHMgd2hlcmUgIm51bGwiIG1lYW5zICJub3QgdGhlcmUiLgogICAgICAgICMgU28gaW4gdGhpcyBjYXNlLCBhIHZhbHVlIG9mIE5vbmUgaXMgdGhlIHNhbWUgYXMgVHJ1ZS4KICAgICAgICAjIFdoaWNoIG1lYW5zIHdlIHdvdWxkIG5lZWQgYSBkaWZmZXJlbnQgc2VudGluZWwuIEZvciB0aGlzIHB1cnBvc2UgSSB1c2VkIGVsbGlwc2lzLgogICAgICAgIHNlbGYuX3ByZW1pdW1fc3Vic2NyaWJlciA9IGRhdGEuZ2V0KCdwcmVtaXVtX3N1YnNjcmliZXInLCAuLi4pCgogICAgZGVmIGlzX2JvdF9tYW5hZ2VkKHNlbGYpOgogICAgICAgICIiIjpjbGFzczpgYm9vbGA6IFdoZXRoZXIgdGhlIHJvbGUgaXMgYXNzb2NpYXRlZCB3aXRoIGEgYm90LiIiIgogICAgICAgIHJldHVybiBzZWxmLmJvdF9pZCBpcyBub3QgTm9uZQoKICAgIGRlZiBpc19wcmVtaXVtX3N1YnNjcmliZXIoc2VsZik6CiAgICAgICAgIiIiOmNsYXNzOmBib29sYDogV2hldGhlciB0aGUgcm9sZSBpcyB0aGUgcHJlbWl1bSBzdWJzY3JpYmVyLCBBS0EgImJvb3N0Iiwgcm9sZSBmb3IgdGhlIGd1aWxkLiIiIgogICAgICAgIHJldHVybiBzZWxmLl9wcmVtaXVtX3N1YnNjcmliZXIgaXMgTm9uZQoKICAgIGRlZiBpc19pbnRlZ3JhdGlvbihzZWxmKToKICAgICAgICAiIiI6Y2xhc3M6YGJvb2xgOiBXaGV0aGVyIHRoZSByb2xlIGlzIG1hbmFnZWQgYnkgYW4gaW50ZWdyYXRpb24uIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuaW50ZWdyYXRpb25faWQgaXMgbm90IE5vbmUKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuICc8Um9sZVRhZ3MgYm90X2lkPXswLmJvdF9pZH0gaW50ZWdyYXRpb25faWQ9ezAuaW50ZWdyYXRpb25faWR9ICcgXAogICAgICAgICAgICAgICAncHJlbWl1bV9zdWJzY3JpYmVyPXsxfT4nLmZvcm1hdChzZWxmLCBzZWxmLmlzX3ByZW1pdW1fc3Vic2NyaWJlcigpKQoKY2xhc3MgUm9sZShIYXNoYWJsZSk6CiAgICAiIiJSZXByZXNlbnRzIGEgRGlzY29yZCByb2xlIGluIGEgOmNsYXNzOmBHdWlsZGAuCgogICAgLi4gY29udGFpbmVyOjogb3BlcmF0aW9ucwoKICAgICAgICAuLiBkZXNjcmliZTo6IHggPT0geQoKICAgICAgICAgICAgQ2hlY2tzIGlmIHR3byByb2xlcyBhcmUgZXF1YWwuCgogICAgICAgIC4uIGRlc2NyaWJlOjogeCAhPSB5CgogICAgICAgICAgICBDaGVja3MgaWYgdHdvIHJvbGVzIGFyZSBub3QgZXF1YWwuCgogICAgICAgIC4uIGRlc2NyaWJlOjogeCA+IHkKCiAgICAgICAgICAgIENoZWNrcyBpZiBhIHJvbGUgaXMgaGlnaGVyIHRoYW4gYW5vdGhlciBpbiB0aGUgaGllcmFyY2h5LgoKICAgICAgICAuLiBkZXNjcmliZTo6IHggPCB5CgogICAgICAgICAgICBDaGVja3MgaWYgYSByb2xlIGlzIGxvd2VyIHRoYW4gYW5vdGhlciBpbiB0aGUgaGllcmFyY2h5LgoKICAgICAgICAuLiBkZXNjcmliZTo6IHggPj0geQoKICAgICAgICAgICAgQ2hlY2tzIGlmIGEgcm9sZSBpcyBoaWdoZXIgb3IgZXF1YWwgdG8gYW5vdGhlciBpbiB0aGUgaGllcmFyY2h5LgoKICAgICAgICAuLiBkZXNjcmliZTo6IHggPD0geQoKICAgICAgICAgICAgQ2hlY2tzIGlmIGEgcm9sZSBpcyBsb3dlciBvciBlcXVhbCB0byBhbm90aGVyIGluIHRoZSBoaWVyYXJjaHkuCgogICAgICAgIC4uIGRlc2NyaWJlOjogaGFzaCh4KQoKICAgICAgICAgICAgUmV0dXJuIHRoZSByb2xlJ3MgaGFzaC4KCiAgICAgICAgLi4gZGVzY3JpYmU6OiBzdHIoeCkKCiAgICAgICAgICAgIFJldHVybnMgdGhlIHJvbGUncyBuYW1lLgoKICAgIEF0dHJpYnV0ZXMKICAgIC0tLS0tLS0tLS0KICAgIGlkOiA6Y2xhc3M6YGludGAKICAgICAgICBUaGUgSUQgZm9yIHRoZSByb2xlLgogICAgbmFtZTogOmNsYXNzOmBzdHJgCiAgICAgICAgVGhlIG5hbWUgb2YgdGhlIHJvbGUuCiAgICBndWlsZDogOmNsYXNzOmBHdWlsZGAKICAgICAgICBUaGUgZ3VpbGQgdGhlIHJvbGUgYmVsb25ncyB0by4KICAgIGhvaXN0OiA6Y2xhc3M6YGJvb2xgCiAgICAgICAgIEluZGljYXRlcyBpZiB0aGUgcm9sZSB3aWxsIGJlIGRpc3BsYXllZCBzZXBhcmF0ZWx5IGZyb20gb3RoZXIgbWVtYmVycy4KICAgIHBvc2l0aW9uOiA6Y2xhc3M6YGludGAKICAgICAgICBUaGUgcG9zaXRpb24gb2YgdGhlIHJvbGUuIFRoaXMgbnVtYmVyIGlzIHVzdWFsbHkgcG9zaXRpdmUuIFRoZSBib3R0b20KICAgICAgICByb2xlIGhhcyBhIHBvc2l0aW9uIG9mIDAuCiAgICBtYW5hZ2VkOiA6Y2xhc3M6YGJvb2xgCiAgICAgICAgSW5kaWNhdGVzIGlmIHRoZSByb2xlIGlzIG1hbmFnZWQgYnkgdGhlIGd1aWxkIHRocm91Z2ggc29tZSBmb3JtIG9mCiAgICAgICAgaW50ZWdyYXRpb25zIHN1Y2ggYXMgVHdpdGNoLgogICAgbWVudGlvbmFibGU6IDpjbGFzczpgYm9vbGAKICAgICAgICBJbmRpY2F0ZXMgaWYgdGhlIHJvbGUgY2FuIGJlIG1lbnRpb25lZCBieSB1c2Vycy4KICAgIHRhZ3M6IE9wdGlvbmFsWzpjbGFzczpgUm9sZVRhZ3NgXQogICAgICAgIFRoZSByb2xlIHRhZ3MgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcm9sZS4KICAgICIiIgoKICAgIF9fc2xvdHNfXyA9ICgnaWQnLCAnbmFtZScsICdfcGVybWlzc2lvbnMnLCAnX2NvbG91cicsICdwb3NpdGlvbicsCiAgICAgICAgICAgICAgICAgJ21hbmFnZWQnLCAnbWVudGlvbmFibGUnLCAnaG9pc3QnLCAnZ3VpbGQnLCAndGFncycsICdfc3RhdGUnKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCAqLCBndWlsZCwgc3RhdGUsIGRhdGEpOgogICAgICAgIHNlbGYuZ3VpbGQgPSBndWlsZAogICAgICAgIHNlbGYuX3N0YXRlID0gc3RhdGUKICAgICAgICBzZWxmLmlkID0gaW50KGRhdGFbJ2lkJ10pCiAgICAgICAgc2VsZi5fdXBkYXRlKGRhdGEpCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYubmFtZQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gJzxSb2xlIGlkPXswLmlkfSBuYW1lPXswLm5hbWUhcn0+Jy5mb3JtYXQoc2VsZikKCiAgICBkZWYgX19sdF9fKHNlbGYsIG90aGVyKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShvdGhlciwgUm9sZSkgb3Igbm90IGlzaW5zdGFuY2Uoc2VsZiwgUm9sZSk6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAoKICAgICAgICBpZiBzZWxmLmd1aWxkICE9IG90aGVyLmd1aWxkOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoJ2Nhbm5vdCBjb21wYXJlIHJvbGVzIGZyb20gdHdvIGRpZmZlcmVudCBndWlsZHMuJykKCiAgICAgICAgIyB0aGUgQGV2ZXJ5b25lIHJvbGUgaXMgYWx3YXlzIHRoZSBsb3dlc3Qgcm9sZSBpbiBoaWVyYXJjaHkKICAgICAgICBndWlsZF9pZCA9IHNlbGYuZ3VpbGQuaWQKICAgICAgICBpZiBzZWxmLmlkID09IGd1aWxkX2lkOgogICAgICAgICAgICAjIGV2ZXJ5b25lX3JvbGUgPCBldmVyeW9uZV9yb2xlIC0+IEZhbHNlCiAgICAgICAgICAgIHJldHVybiBvdGhlci5pZCAhPSBndWlsZF9pZAoKICAgICAgICBpZiBzZWxmLnBvc2l0aW9uIDwgb3RoZXIucG9zaXRpb246CiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIGlmIHNlbGYucG9zaXRpb24gPT0gb3RoZXIucG9zaXRpb246CiAgICAgICAgICAgIHJldHVybiBpbnQoc2VsZi5pZCkgPiBpbnQob3RoZXIuaWQpCgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBfX2xlX18oc2VsZiwgb3RoZXIpOgogICAgICAgIHIgPSBSb2xlLl9fbHRfXyhvdGhlciwgc2VsZikKICAgICAgICBpZiByIGlzIE5vdEltcGxlbWVudGVkOgogICAgICAgICAgICByZXR1cm4gTm90SW1wbGVtZW50ZWQKICAgICAgICByZXR1cm4gbm90IHIKCiAgICBkZWYgX19ndF9fKHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gUm9sZS5fX2x0X18ob3RoZXIsIHNlbGYpCgogICAgZGVmIF9fZ2VfXyhzZWxmLCBvdGhlcik6CiAgICAgICAgciA9IFJvbGUuX19sdF9fKHNlbGYsIG90aGVyKQogICAgICAgIGlmIHIgaXMgTm90SW1wbGVtZW50ZWQ6CiAgICAgICAgICAgIHJldHVybiBOb3RJbXBsZW1lbnRlZAogICAgICAgIHJldHVybiBub3QgcgoKICAgIGRlZiBfdXBkYXRlKHNlbGYsIGRhdGEpOgogICAgICAgIHNlbGYubmFtZSA9IGRhdGFbJ25hbWUnXQogICAgICAgIHNlbGYuX3Blcm1pc3Npb25zID0gaW50KGRhdGEuZ2V0KCdwZXJtaXNzaW9uc19uZXcnLCAwKSkKICAgICAgICBzZWxmLnBvc2l0aW9uID0gZGF0YS5nZXQoJ3Bvc2l0aW9uJywgMCkKICAgICAgICBzZWxmLl9jb2xvdXIgPSBkYXRhLmdldCgnY29sb3InLCAwKQogICAgICAgIHNlbGYuaG9pc3QgPSBkYXRhLmdldCgnaG9pc3QnLCBGYWxzZSkKICAgICAgICBzZWxmLm1hbmFnZWQgPSBkYXRhLmdldCgnbWFuYWdlZCcsIEZhbHNlKQogICAgICAgIHNlbGYubWVudGlvbmFibGUgPSBkYXRhLmdldCgnbWVudGlvbmFibGUnLCBGYWxzZSkKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnRhZ3MgPSBSb2xlVGFncyhkYXRhWyd0YWdzJ10pCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBzZWxmLnRhZ3MgPSBOb25lCgogICAgZGVmIGlzX2RlZmF1bHQoc2VsZik6CiAgICAgICAgIiIiOmNsYXNzOmBib29sYDogQ2hlY2tzIGlmIHRoZSByb2xlIGlzIHRoZSBkZWZhdWx0IHJvbGUuIiIiCiAgICAgICAgcmV0dXJuIHNlbGYuZ3VpbGQuaWQgPT0gc2VsZi5pZAoKICAgIGRlZiBpc19ib3RfbWFuYWdlZChzZWxmKToKICAgICAgICAiIiI6Y2xhc3M6YGJvb2xgOiBXaGV0aGVyIHRoZSByb2xlIGlzIGFzc29jaWF0ZWQgd2l0aCBhIGJvdC4KCiAgICAgICAgLi4gdmVyc2lvbmFkZGVkOjogMS42CiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYudGFncyBpcyBub3QgTm9uZSBhbmQgc2VsZi50YWdzLmlzX2JvdF9tYW5hZ2VkKCkKCiAgICBkZWYgaXNfcHJlbWl1bV9zdWJzY3JpYmVyKHNlbGYpOgogICAgICAgICIiIjpjbGFzczpgYm9vbGA6IFdoZXRoZXIgdGhlIHJvbGUgaXMgdGhlIHByZW1pdW0gc3Vic2NyaWJlciwgQUtBICJib29zdCIsIHJvbGUgZm9yIHRoZSBndWlsZC4KCiAgICAgICAgLi4gdmVyc2lvbmFkZGVkOjogMS42CiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYudGFncyBpcyBub3QgTm9uZSBhbmQgc2VsZi50YWdzLmlzX3ByZW1pdW1fc3Vic2NyaWJlcigpCgogICAgZGVmIGlzX2ludGVncmF0aW9uKHNlbGYpOgogICAgICAgICIiIjpjbGFzczpgYm9vbGA6IFdoZXRoZXIgdGhlIHJvbGUgaXMgbWFuYWdlZCBieSBhbiBpbnRlZ3JhdGlvbi4KCiAgICAgICAgLi4gdmVyc2lvbmFkZGVkOjogMS42CiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYudGFncyBpcyBub3QgTm9uZSBhbmQgc2VsZi50YWdzLmlzX2ludGVncmF0aW9uKCkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBwZXJtaXNzaW9ucyhzZWxmKToKICAgICAgICAiIiI6Y2xhc3M6YFBlcm1pc3Npb25zYDogUmV0dXJucyB0aGUgcm9sZSdzIHBlcm1pc3Npb25zLiIiIgogICAgICAgIHJldHVybiBQZXJtaXNzaW9ucyhzZWxmLl9wZXJtaXNzaW9ucykKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjb2xvdXIoc2VsZik6CiAgICAgICAgIiIiOmNsYXNzOmBDb2xvdXJgOiBSZXR1cm5zIHRoZSByb2xlIGNvbG91ci4gQW4gYWxpYXMgZXhpc3RzIHVuZGVyIGBgY29sb3JgYC4iIiIKICAgICAgICByZXR1cm4gQ29sb3VyKHNlbGYuX2NvbG91cikKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjb2xvcihzZWxmKToKICAgICAgICAiIiI6Y2xhc3M6YENvbG91cmA6IFJldHVybnMgdGhlIHJvbGUgY29sb3IuIEFuIGFsaWFzIGV4aXN0cyB1bmRlciBgYGNvbG91cmBgLiIiIgogICAgICAgIHJldHVybiBzZWxmLmNvbG91cgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNyZWF0ZWRfYXQoc2VsZik6CiAgICAgICAgIiIiOmNsYXNzOmBkYXRldGltZS5kYXRldGltZWA6IFJldHVybnMgdGhlIHJvbGUncyBjcmVhdGlvbiB0aW1lIGluIFVUQy4iIiIKICAgICAgICByZXR1cm4gc25vd2ZsYWtlX3RpbWUoc2VsZi5pZCkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBtZW50aW9uKHNlbGYpOgogICAgICAgICIiIjpjbGFzczpgc3RyYDogUmV0dXJucyBhIHN0cmluZyB0aGF0IGFsbG93cyB5b3UgdG8gbWVudGlvbiBhIHJvbGUuIiIiCiAgICAgICAgcmV0dXJuICc8QCYlcz4nICUgc2VsZi5pZAoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG1lbWJlcnMoc2VsZik6CiAgICAgICAgIiIiTGlzdFs6Y2xhc3M6YE1lbWJlcmBdOiBSZXR1cm5zIGFsbCB0aGUgbWVtYmVycyB3aXRoIHRoaXMgcm9sZS4iIiIKICAgICAgICBhbGxfbWVtYmVycyA9IHNlbGYuZ3VpbGQubWVtYmVycwogICAgICAgIGlmIHNlbGYuaXNfZGVmYXVsdCgpOgogICAgICAgICAgICByZXR1cm4gYWxsX21lbWJlcnMKCiAgICAgICAgcm9sZV9pZCA9IHNlbGYuaWQKICAgICAgICByZXR1cm4gW21lbWJlciBmb3IgbWVtYmVyIGluIGFsbF9tZW1iZXJzIGlmIG1lbWJlci5fcm9sZXMuaGFzKHJvbGVfaWQpXQoKICAgIGFzeW5jIGRlZiBfbW92ZShzZWxmLCBwb3NpdGlvbiwgcmVhc29uKToKICAgICAgICBpZiBwb3NpdGlvbiA8PSAwOgogICAgICAgICAgICByYWlzZSBJbnZhbGlkQXJndW1lbnQoIkNhbm5vdCBtb3ZlIHJvbGUgdG8gcG9zaXRpb24gMCBvciBiZWxvdyIpCgogICAgICAgIGlmIHNlbGYuaXNfZGVmYXVsdCgpOgogICAgICAgICAgICByYWlzZSBJbnZhbGlkQXJndW1lbnQoIkNhbm5vdCBtb3ZlIGRlZmF1bHQgcm9sZSIpCgogICAgICAgIGlmIHNlbGYucG9zaXRpb24gPT0gcG9zaXRpb246CiAgICAgICAgICAgIHJldHVybiAgIyBTYXZlIGRpc2NvcmQgdGhlIGV4dHJhIHJlcXVlc3QuCgogICAgICAgIGh0dHAgPSBzZWxmLl9zdGF0ZS5odHRwCgogICAgICAgIGNoYW5nZV9yYW5nZSA9IHJhbmdlKG1pbihzZWxmLnBvc2l0aW9uLCBwb3NpdGlvbiksIG1heChzZWxmLnBvc2l0aW9uLCBwb3NpdGlvbikgKyAxKQogICAgICAgIHJvbGVzID0gW3IuaWQgZm9yIHIgaW4gc2VsZi5ndWlsZC5yb2xlc1sxOl0gaWYgci5wb3NpdGlvbiBpbiBjaGFuZ2VfcmFuZ2UgYW5kIHIuaWQgIT0gc2VsZi5pZF0KCiAgICAgICAgaWYgc2VsZi5wb3NpdGlvbiA+IHBvc2l0aW9uOgogICAgICAgICAgICByb2xlcy5pbnNlcnQoMCwgc2VsZi5pZCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByb2xlcy5hcHBlbmQoc2VsZi5pZCkKCiAgICAgICAgcGF5bG9hZCA9IFt7ImlkIjogelswXSwgInBvc2l0aW9uIjogelsxXX0gZm9yIHogaW4gemlwKHJvbGVzLCBjaGFuZ2VfcmFuZ2UpXQogICAgICAgIGF3YWl0IGh0dHAubW92ZV9yb2xlX3Bvc2l0aW9uKHNlbGYuZ3VpbGQuaWQsIHBheWxvYWQsIHJlYXNvbj1yZWFzb24pCgogICAgYXN5bmMgZGVmIGVkaXQoc2VsZiwgKiwgcmVhc29uPU5vbmUsICoqZmllbGRzKToKICAgICAgICAiIiJ8Y29yb3wKCiAgICAgICAgRWRpdHMgdGhlIHJvbGUuCgogICAgICAgIFlvdSBtdXN0IGhhdmUgdGhlIDphdHRyOmB+UGVybWlzc2lvbnMubWFuYWdlX3JvbGVzYCBwZXJtaXNzaW9uIHRvCiAgICAgICAgdXNlIHRoaXMuCgogICAgICAgIEFsbCBmaWVsZHMgYXJlIG9wdGlvbmFsLgoKICAgICAgICAuLiB2ZXJzaW9uY2hhbmdlZDo6IDEuNAogICAgICAgICAgICBDYW4gbm93IHBhc3MgYGBpbnRgYCB0byBgYGNvbG91cmBgIGtleXdvcmQtb25seSBwYXJhbWV0ZXIuCgogICAgICAgIFBhcmFtZXRlcnMKICAgICAgICAtLS0tLS0tLS0tLQogICAgICAgIG5hbWU6IDpjbGFzczpgc3RyYAogICAgICAgICAgICBUaGUgbmV3IHJvbGUgbmFtZSB0byBjaGFuZ2UgdG8uCiAgICAgICAgcGVybWlzc2lvbnM6IDpjbGFzczpgUGVybWlzc2lvbnNgCiAgICAgICAgICAgIFRoZSBuZXcgcGVybWlzc2lvbnMgdG8gY2hhbmdlIHRvLgogICAgICAgIGNvbG91cjogVW5pb25bOmNsYXNzOmBDb2xvdXJgLCA6Y2xhc3M6YGludGBdCiAgICAgICAgICAgIFRoZSBuZXcgY29sb3VyIHRvIGNoYW5nZSB0by4gKGFsaWFzZWQgdG8gY29sb3IgYXMgd2VsbCkKICAgICAgICBob2lzdDogOmNsYXNzOmBib29sYAogICAgICAgICAgICBJbmRpY2F0ZXMgaWYgdGhlIHJvbGUgc2hvdWxkIGJlIHNob3duIHNlcGFyYXRlbHkgaW4gdGhlIG1lbWJlciBsaXN0LgogICAgICAgIG1lbnRpb25hYmxlOiA6Y2xhc3M6YGJvb2xgCiAgICAgICAgICAgIEluZGljYXRlcyBpZiB0aGUgcm9sZSBzaG91bGQgYmUgbWVudGlvbmFibGUgYnkgb3RoZXJzLgogICAgICAgIHBvc2l0aW9uOiA6Y2xhc3M6YGludGAKICAgICAgICAgICAgVGhlIG5ldyByb2xlJ3MgcG9zaXRpb24uIFRoaXMgbXVzdCBiZSBiZWxvdyB5b3VyIHRvcCByb2xlJ3MKICAgICAgICAgICAgcG9zaXRpb24gb3IgaXQgd2lsbCBmYWlsLgogICAgICAgIHJlYXNvbjogT3B0aW9uYWxbOmNsYXNzOmBzdHJgXQogICAgICAgICAgICBUaGUgcmVhc29uIGZvciBlZGl0aW5nIHRoaXMgcm9sZS4gU2hvd3MgdXAgb24gdGhlIGF1ZGl0IGxvZy4KCiAgICAgICAgUmFpc2VzCiAgICAgICAgLS0tLS0tLQogICAgICAgIEZvcmJpZGRlbgogICAgICAgICAgICBZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbnMgdG8gY2hhbmdlIHRoZSByb2xlLgogICAgICAgIEhUVFBFeGNlcHRpb24KICAgICAgICAgICAgRWRpdGluZyB0aGUgcm9sZSBmYWlsZWQuCiAgICAgICAgSW52YWxpZEFyZ3VtZW50CiAgICAgICAgICAgIEFuIGludmFsaWQgcG9zaXRpb24gd2FzIGdpdmVuIG9yIHRoZSBkZWZhdWx0CiAgICAgICAgICAgIHJvbGUgd2FzIGFza2VkIHRvIGJlIG1vdmVkLgogICAgICAgICIiIgoKICAgICAgICBwb3NpdGlvbiA9IGZpZWxkcy5nZXQoJ3Bvc2l0aW9uJykKICAgICAgICBpZiBwb3NpdGlvbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgYXdhaXQgc2VsZi5fbW92ZShwb3NpdGlvbiwgcmVhc29uPXJlYXNvbikKICAgICAgICAgICAgc2VsZi5wb3NpdGlvbiA9IHBvc2l0aW9uCgogICAgICAgIHRyeToKICAgICAgICAgICAgY29sb3VyID0gZmllbGRzWydjb2xvdXInXQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgY29sb3VyID0gZmllbGRzLmdldCgnY29sb3InLCBzZWxmLmNvbG91cikKCiAgICAgICAgaWYgaXNpbnN0YW5jZShjb2xvdXIsIGludCk6CiAgICAgICAgICAgIGNvbG91ciA9IENvbG91cih2YWx1ZT1jb2xvdXIpCgogICAgICAgIHBheWxvYWQgPSB7CiAgICAgICAgICAgICduYW1lJzogZmllbGRzLmdldCgnbmFtZScsIHNlbGYubmFtZSksCiAgICAgICAgICAgICdwZXJtaXNzaW9ucyc6IHN0cihmaWVsZHMuZ2V0KCdwZXJtaXNzaW9ucycsIHNlbGYucGVybWlzc2lvbnMpLnZhbHVlKSwKICAgICAgICAgICAgJ2NvbG9yJzogY29sb3VyLnZhbHVlLAogICAgICAgICAgICAnaG9pc3QnOiBmaWVsZHMuZ2V0KCdob2lzdCcsIHNlbGYuaG9pc3QpLAogICAgICAgICAgICAnbWVudGlvbmFibGUnOiBmaWVsZHMuZ2V0KCdtZW50aW9uYWJsZScsIHNlbGYubWVudGlvbmFibGUpCiAgICAgICAgfQoKICAgICAgICBkYXRhID0gYXdhaXQgc2VsZi5fc3RhdGUuaHR0cC5lZGl0X3JvbGUoc2VsZi5ndWlsZC5pZCwgc2VsZi5pZCwgcmVhc29uPXJlYXNvbiwgKipwYXlsb2FkKQogICAgICAgIHNlbGYuX3VwZGF0ZShkYXRhKQoKICAgIGFzeW5jIGRlZiBkZWxldGUoc2VsZiwgKiwgcmVhc29uPU5vbmUpOgogICAgICAgICIiInxjb3JvfAoKICAgICAgICBEZWxldGVzIHRoZSByb2xlLgoKICAgICAgICBZb3UgbXVzdCBoYXZlIHRoZSA6YXR0cjpgflBlcm1pc3Npb25zLm1hbmFnZV9yb2xlc2AgcGVybWlzc2lvbiB0bwogICAgICAgIHVzZSB0aGlzLgoKICAgICAgICBQYXJhbWV0ZXJzCiAgICAgICAgLS0tLS0tLS0tLS0KICAgICAgICByZWFzb246IE9wdGlvbmFsWzpjbGFzczpgc3RyYF0KICAgICAgICAgICAgVGhlIHJlYXNvbiBmb3IgZGVsZXRpbmcgdGhpcyByb2xlLiBTaG93cyB1cCBvbiB0aGUgYXVkaXQgbG9nLgoKICAgICAgICBSYWlzZXMKICAgICAgICAtLS0tLS0tLQogICAgICAgIEZvcmJpZGRlbgogICAgICAgICAgICBZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbnMgdG8gZGVsZXRlIHRoZSByb2xlLgogICAgICAgIEhUVFBFeGNlcHRpb24KICAgICAgICAgICAgRGVsZXRpbmcgdGhlIHJvbGUgZmFpbGVkLgogICAgICAgICIiIgoKICAgICAgICBhd2FpdCBzZWxmLl9zdGF0ZS5odHRwLmRlbGV0ZV9yb2xlKHNlbGYuZ3VpbGQuaWQsIHNlbGYuaWQsIHJlYXNvbj1yZWFzb24pCg==
