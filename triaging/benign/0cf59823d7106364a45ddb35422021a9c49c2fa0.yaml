statistics:
  total_files: 1
  skipped_files: 0.0
  processed_objects: 1
  malicious_objects: 0
details:
- path: .repo_cache/malicious_repos/pypi_malregistry/botaa3/1.0.0/botaa3-1.0.0/boto3-1.20.7/boto3/docs/collection.py
  contents:
  - name: <module>
    score: 0.0
    code: |-
      # Copyright 2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.
      #
      # Licensed under the Apache License, Version 2.0 (the "License"). You
      # may not use this file except in compliance with the License. A copy of
      # the License is located at
      #
      # https://aws.amazon.com/apache2.0/
      #
      # or in the "license" file accompanying this file. This file is
      # distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
      # ANY KIND, either express or implied. See the License for the specific
      # language governing permissions and limitations under the License.
      from botocore import xform_name
      from botocore.docs.method import get_instance_public_methods
      from botocore.docs.utils import DocumentedShape

      from boto3.docs.base import BaseDocumenter
      from boto3.docs.utils import get_resource_ignore_params
      from boto3.docs.method import document_model_driven_resource_method
      from boto3.docs.utils import add_resource_type_overview


      class CollectionDocumenter(BaseDocumenter):
          def document_collections(self, section):
              collections = self._resource.meta.resource_model.collections
              collections_list = []
              add_resource_type_overview(
                  section=section,
                  resource_type='Collections',
                  description=(
                      'Collections provide an interface to iterate over and '
                      'manipulate groups of resources. '),
                  intro_link='guide_collections')
              self.member_map['collections'] = collections_list
              for collection in collections:
                  collection_section = section.add_new_section(collection.name)
                  collections_list.append(collection.name)
                  self._document_collection(collection_section, collection)

          def _document_collection(self, section, collection):
              methods = get_instance_public_methods(
                  getattr(self._resource, collection.name))
              document_collection_object(section, collection)
              batch_actions = {}
              for batch_action in collection.batch_actions:
                  batch_actions[batch_action.name] = batch_action

              for method in sorted(methods):
                  method_section = section.add_new_section(method)
                  if method in batch_actions:
                      document_batch_action(
                          section=method_section,
                          resource_name=self._resource_name,
                          event_emitter=self._resource.meta.client.meta.events,
                          batch_action_model=batch_actions[method],
                          collection_model=collection,
                          service_model=self._resource.meta.client.meta.service_model
                      )
                  else:
                      document_collection_method(
                          section=method_section,
                          resource_name=self._resource_name,
                          action_name=method,
                          event_emitter=self._resource.meta.client.meta.events,
                          collection_model=collection,
                          service_model=self._resource.meta.client.meta.service_model
                      )
    tokens: resume load_const INTEGER load_const import_name botocore import_from xform_name store_name xform_name pop_top load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH pop_top load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from DocumentedShape store_name DocumentedShape pop_top load_const INTEGER load_const import_name boto3.docs.base import_from BaseDocumenter store_name BaseDocumenter pop_top load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH pop_top load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH pop_top load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from STRING_LEN_S_ENT_HIGH store_name STRING_LEN_S_ENT_HIGH pop_top push_null load_build_class load_const OBJECT make_function load_const STRING_BASE64_LEN_S_ENT_HIGH load_name BaseDocumenter call store_name STRING_BASE64_LEN_S_ENT_HIGH nop load_const load_const OBJECT make_function defaults store_name STRING_LEN_S_ENT_HIGH nop load_const load_const OBJECT make_function defaults store_name STRING_LEN_S_ENT_HIGH nop load_const load_const OBJECT make_function defaults store_name STRING_LEN_S_ENT_HIGH return_const None
    hash: bb9d44be7a0d520aed1eca3ec5185d8b50be3a1f5f1e6a9f19a028c1f9bb5bee
sources:
  .repo_cache/malicious_repos/pypi_malregistry/botaa3/1.0.0/botaa3-1.0.0/boto3-1.20.7/boto3/docs/collection.py: IyBDb3B5cmlnaHQgMjAxNSBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgojCiMgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIikuIFlvdQojIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBBIGNvcHkgb2YKIyB0aGUgTGljZW5zZSBpcyBsb2NhdGVkIGF0CiMKIyBodHRwczovL2F3cy5hbWF6b24uY29tL2FwYWNoZTIuMC8KIwojIG9yIGluIHRoZSAibGljZW5zZSIgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMKIyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRgojIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYwojIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCmZyb20gYm90b2NvcmUgaW1wb3J0IHhmb3JtX25hbWUKZnJvbSBib3RvY29yZS5kb2NzLm1ldGhvZCBpbXBvcnQgZ2V0X2luc3RhbmNlX3B1YmxpY19tZXRob2RzCmZyb20gYm90b2NvcmUuZG9jcy51dGlscyBpbXBvcnQgRG9jdW1lbnRlZFNoYXBlCgpmcm9tIGJvdG8zLmRvY3MuYmFzZSBpbXBvcnQgQmFzZURvY3VtZW50ZXIKZnJvbSBib3RvMy5kb2NzLnV0aWxzIGltcG9ydCBnZXRfcmVzb3VyY2VfaWdub3JlX3BhcmFtcwpmcm9tIGJvdG8zLmRvY3MubWV0aG9kIGltcG9ydCBkb2N1bWVudF9tb2RlbF9kcml2ZW5fcmVzb3VyY2VfbWV0aG9kCmZyb20gYm90bzMuZG9jcy51dGlscyBpbXBvcnQgYWRkX3Jlc291cmNlX3R5cGVfb3ZlcnZpZXcKCgpjbGFzcyBDb2xsZWN0aW9uRG9jdW1lbnRlcihCYXNlRG9jdW1lbnRlcik6CiAgICBkZWYgZG9jdW1lbnRfY29sbGVjdGlvbnMoc2VsZiwgc2VjdGlvbik6CiAgICAgICAgY29sbGVjdGlvbnMgPSBzZWxmLl9yZXNvdXJjZS5tZXRhLnJlc291cmNlX21vZGVsLmNvbGxlY3Rpb25zCiAgICAgICAgY29sbGVjdGlvbnNfbGlzdCA9IFtdCiAgICAgICAgYWRkX3Jlc291cmNlX3R5cGVfb3ZlcnZpZXcoCiAgICAgICAgICAgIHNlY3Rpb249c2VjdGlvbiwKICAgICAgICAgICAgcmVzb3VyY2VfdHlwZT0nQ29sbGVjdGlvbnMnLAogICAgICAgICAgICBkZXNjcmlwdGlvbj0oCiAgICAgICAgICAgICAgICAnQ29sbGVjdGlvbnMgcHJvdmlkZSBhbiBpbnRlcmZhY2UgdG8gaXRlcmF0ZSBvdmVyIGFuZCAnCiAgICAgICAgICAgICAgICAnbWFuaXB1bGF0ZSBncm91cHMgb2YgcmVzb3VyY2VzLiAnKSwKICAgICAgICAgICAgaW50cm9fbGluaz0nZ3VpZGVfY29sbGVjdGlvbnMnKQogICAgICAgIHNlbGYubWVtYmVyX21hcFsnY29sbGVjdGlvbnMnXSA9IGNvbGxlY3Rpb25zX2xpc3QKICAgICAgICBmb3IgY29sbGVjdGlvbiBpbiBjb2xsZWN0aW9uczoKICAgICAgICAgICAgY29sbGVjdGlvbl9zZWN0aW9uID0gc2VjdGlvbi5hZGRfbmV3X3NlY3Rpb24oY29sbGVjdGlvbi5uYW1lKQogICAgICAgICAgICBjb2xsZWN0aW9uc19saXN0LmFwcGVuZChjb2xsZWN0aW9uLm5hbWUpCiAgICAgICAgICAgIHNlbGYuX2RvY3VtZW50X2NvbGxlY3Rpb24oY29sbGVjdGlvbl9zZWN0aW9uLCBjb2xsZWN0aW9uKQoKICAgIGRlZiBfZG9jdW1lbnRfY29sbGVjdGlvbihzZWxmLCBzZWN0aW9uLCBjb2xsZWN0aW9uKToKICAgICAgICBtZXRob2RzID0gZ2V0X2luc3RhbmNlX3B1YmxpY19tZXRob2RzKAogICAgICAgICAgICBnZXRhdHRyKHNlbGYuX3Jlc291cmNlLCBjb2xsZWN0aW9uLm5hbWUpKQogICAgICAgIGRvY3VtZW50X2NvbGxlY3Rpb25fb2JqZWN0KHNlY3Rpb24sIGNvbGxlY3Rpb24pCiAgICAgICAgYmF0Y2hfYWN0aW9ucyA9IHt9CiAgICAgICAgZm9yIGJhdGNoX2FjdGlvbiBpbiBjb2xsZWN0aW9uLmJhdGNoX2FjdGlvbnM6CiAgICAgICAgICAgIGJhdGNoX2FjdGlvbnNbYmF0Y2hfYWN0aW9uLm5hbWVdID0gYmF0Y2hfYWN0aW9uCgogICAgICAgIGZvciBtZXRob2QgaW4gc29ydGVkKG1ldGhvZHMpOgogICAgICAgICAgICBtZXRob2Rfc2VjdGlvbiA9IHNlY3Rpb24uYWRkX25ld19zZWN0aW9uKG1ldGhvZCkKICAgICAgICAgICAgaWYgbWV0aG9kIGluIGJhdGNoX2FjdGlvbnM6CiAgICAgICAgICAgICAgICBkb2N1bWVudF9iYXRjaF9hY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbj1tZXRob2Rfc2VjdGlvbiwKICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV9uYW1lPXNlbGYuX3Jlc291cmNlX25hbWUsCiAgICAgICAgICAgICAgICAgICAgZXZlbnRfZW1pdHRlcj1zZWxmLl9yZXNvdXJjZS5tZXRhLmNsaWVudC5tZXRhLmV2ZW50cywKICAgICAgICAgICAgICAgICAgICBiYXRjaF9hY3Rpb25fbW9kZWw9YmF0Y2hfYWN0aW9uc1ttZXRob2RdLAogICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25fbW9kZWw9Y29sbGVjdGlvbiwKICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlX21vZGVsPXNlbGYuX3Jlc291cmNlLm1ldGEuY2xpZW50Lm1ldGEuc2VydmljZV9tb2RlbAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZG9jdW1lbnRfY29sbGVjdGlvbl9tZXRob2QoCiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbj1tZXRob2Rfc2VjdGlvbiwKICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV9uYW1lPXNlbGYuX3Jlc291cmNlX25hbWUsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uX25hbWU9bWV0aG9kLAogICAgICAgICAgICAgICAgICAgIGV2ZW50X2VtaXR0ZXI9c2VsZi5fcmVzb3VyY2UubWV0YS5jbGllbnQubWV0YS5ldmVudHMsCiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbl9tb2RlbD1jb2xsZWN0aW9uLAogICAgICAgICAgICAgICAgICAgIHNlcnZpY2VfbW9kZWw9c2VsZi5fcmVzb3VyY2UubWV0YS5jbGllbnQubWV0YS5zZXJ2aWNlX21vZGVsCiAgICAgICAgICAgICAgICApCgoKZGVmIGRvY3VtZW50X2NvbGxlY3Rpb25fb2JqZWN0KHNlY3Rpb24sIGNvbGxlY3Rpb25fbW9kZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlX3NpZ25hdHVyZT1UcnVlKToKICAgICIiIkRvY3VtZW50cyBhIGNvbGxlY3Rpb24gcmVzb3VyY2Ugb2JqZWN0CgogICAgOnBhcmFtIHNlY3Rpb246IFRoZSBzZWN0aW9uIHRvIHdyaXRlIHRvCgogICAgOnBhcmFtIGNvbGxlY3Rpb25fbW9kZWw6IFRoZSBtb2RlbCBvZiB0aGUgY29sbGVjdGlvbgoKICAgIDpwYXJhbSBpbmNsdWRlX3NpZ25hdHVyZTogV2hldGhlciBvciBub3QgdG8gaW5jbHVkZSB0aGUgc2lnbmF0dXJlLgogICAgICAgIEl0IGlzIHVzZWZ1bCBmb3IgZ2VuZXJhdGluZyBkb2NzdHJpbmdzLgogICAgIiIiCiAgICBpZiBpbmNsdWRlX3NpZ25hdHVyZToKICAgICAgICBzZWN0aW9uLnN0eWxlLnN0YXJ0X3NwaGlueF9weV9hdHRyKGNvbGxlY3Rpb25fbW9kZWwubmFtZSkKICAgIHNlY3Rpb24uaW5jbHVkZV9kb2Nfc3RyaW5nKAogICAgICAgICdBIGNvbGxlY3Rpb24gb2YgJXMgcmVzb3VyY2VzLicgJSBjb2xsZWN0aW9uX21vZGVsLnJlc291cmNlLnR5cGUpCiAgICBzZWN0aW9uLmluY2x1ZGVfZG9jX3N0cmluZygKICAgICAgICAnQSAlcyBDb2xsZWN0aW9uIHdpbGwgaW5jbHVkZSBhbGwgcmVzb3VyY2VzIGJ5IGRlZmF1bHQsICcKICAgICAgICAnYW5kIGV4dHJlbWUgY2F1dGlvbiBzaG91bGQgYmUgdGFrZW4gd2hlbiBwZXJmb3JtaW5nICcKICAgICAgICAnYWN0aW9ucyBvbiBhbGwgcmVzb3VyY2VzLicgJSBjb2xsZWN0aW9uX21vZGVsLnJlc291cmNlLnR5cGUpCgoKZGVmIGRvY3VtZW50X2JhdGNoX2FjdGlvbihzZWN0aW9uLCByZXNvdXJjZV9uYW1lLCBldmVudF9lbWl0dGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoX2FjdGlvbl9tb2RlbCwgc2VydmljZV9tb2RlbCwgY29sbGVjdGlvbl9tb2RlbCwKICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlX3NpZ25hdHVyZT1UcnVlKToKICAgICIiIkRvY3VtZW50cyBhIGNvbGxlY3Rpb24ncyBiYXRjaCBhY3Rpb24KCiAgICA6cGFyYW0gc2VjdGlvbjogVGhlIHNlY3Rpb24gdG8gd3JpdGUgdG8KCiAgICA6cGFyYW0gcmVzb3VyY2VfbmFtZTogVGhlIG5hbWUgb2YgdGhlIHJlc291cmNlCgogICAgOnBhcmFtIGFjdGlvbl9uYW1lOiBUaGUgbmFtZSBvZiBjb2xsZWN0aW9uIGFjdGlvbi4gQ3VycmVudGx5IG9ubHkKICAgICAgICBjYW4gYmUgYWxsLCBmaWx0ZXIsIGxpbWl0LCBvciBwYWdlX3NpemUKCiAgICA6cGFyYW0gZXZlbnRfZW1pdHRlcjogVGhlIGV2ZW50IGVtaXR0ZXIgdG8gdXNlIHRvIGVtaXQgZXZlbnRzCgogICAgOnBhcmFtIGJhdGNoX2FjdGlvbl9tb2RlbDogVGhlIG1vZGVsIG9mIHRoZSBiYXRjaCBhY3Rpb24KCiAgICA6cGFyYW0gY29sbGVjdGlvbl9tb2RlbDogVGhlIG1vZGVsIG9mIHRoZSBjb2xsZWN0aW9uCgogICAgOnBhcmFtIHNlcnZpY2VfbW9kZWw6IFRoZSBtb2RlbCBvZiB0aGUgc2VydmljZQoKICAgIDpwYXJhbSBpbmNsdWRlX3NpZ25hdHVyZTogV2hldGhlciBvciBub3QgdG8gaW5jbHVkZSB0aGUgc2lnbmF0dXJlLgogICAgICAgIEl0IGlzIHVzZWZ1bCBmb3IgZ2VuZXJhdGluZyBkb2NzdHJpbmdzLgogICAgIiIiCiAgICBvcGVyYXRpb25fbW9kZWwgPSBzZXJ2aWNlX21vZGVsLm9wZXJhdGlvbl9tb2RlbCgKICAgICAgICBiYXRjaF9hY3Rpb25fbW9kZWwucmVxdWVzdC5vcGVyYXRpb24pCiAgICBpZ25vcmVfcGFyYW1zID0gZ2V0X3Jlc291cmNlX2lnbm9yZV9wYXJhbXMoCiAgICAgICAgYmF0Y2hfYWN0aW9uX21vZGVsLnJlcXVlc3QucGFyYW1zKQoKICAgIGV4YW1wbGVfcmV0dXJuX3ZhbHVlID0gJ3Jlc3BvbnNlJwogICAgaWYgYmF0Y2hfYWN0aW9uX21vZGVsLnJlc291cmNlOgogICAgICAgIGV4YW1wbGVfcmV0dXJuX3ZhbHVlID0geGZvcm1fbmFtZShiYXRjaF9hY3Rpb25fbW9kZWwucmVzb3VyY2UudHlwZSkKCiAgICBleGFtcGxlX3Jlc291cmNlX25hbWUgPSB4Zm9ybV9uYW1lKHJlc291cmNlX25hbWUpCiAgICBpZiBzZXJ2aWNlX21vZGVsLnNlcnZpY2VfbmFtZSA9PSByZXNvdXJjZV9uYW1lOgogICAgICAgIGV4YW1wbGVfcmVzb3VyY2VfbmFtZSA9IHJlc291cmNlX25hbWUKICAgIGV4YW1wbGVfcHJlZml4ID0gJyVzID0gJXMuJXMuJXMnICUgKAogICAgICAgIGV4YW1wbGVfcmV0dXJuX3ZhbHVlLCBleGFtcGxlX3Jlc291cmNlX25hbWUsCiAgICAgICAgY29sbGVjdGlvbl9tb2RlbC5uYW1lLCBiYXRjaF9hY3Rpb25fbW9kZWwubmFtZQogICAgKQogICAgZG9jdW1lbnRfbW9kZWxfZHJpdmVuX3Jlc291cmNlX21ldGhvZCgKICAgICAgICBzZWN0aW9uPXNlY3Rpb24sIG1ldGhvZF9uYW1lPWJhdGNoX2FjdGlvbl9tb2RlbC5uYW1lLAogICAgICAgIG9wZXJhdGlvbl9tb2RlbD1vcGVyYXRpb25fbW9kZWwsCiAgICAgICAgZXZlbnRfZW1pdHRlcj1ldmVudF9lbWl0dGVyLAogICAgICAgIG1ldGhvZF9kZXNjcmlwdGlvbj1vcGVyYXRpb25fbW9kZWwuZG9jdW1lbnRhdGlvbiwKICAgICAgICBleGFtcGxlX3ByZWZpeD1leGFtcGxlX3ByZWZpeCwKICAgICAgICBleGNsdWRlX2lucHV0PWlnbm9yZV9wYXJhbXMsCiAgICAgICAgcmVzb3VyY2VfYWN0aW9uX21vZGVsPWJhdGNoX2FjdGlvbl9tb2RlbCwKICAgICAgICBpbmNsdWRlX3NpZ25hdHVyZT1pbmNsdWRlX3NpZ25hdHVyZQogICAgKQoKCmRlZiBkb2N1bWVudF9jb2xsZWN0aW9uX21ldGhvZChzZWN0aW9uLCByZXNvdXJjZV9uYW1lLCBhY3Rpb25fbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2VtaXR0ZXIsIGNvbGxlY3Rpb25fbW9kZWwsIHNlcnZpY2VfbW9kZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlX3NpZ25hdHVyZT1UcnVlKToKICAgICIiIkRvY3VtZW50cyBhIGNvbGxlY3Rpb24gbWV0aG9kCgogICAgOnBhcmFtIHNlY3Rpb246IFRoZSBzZWN0aW9uIHRvIHdyaXRlIHRvCgogICAgOnBhcmFtIHJlc291cmNlX25hbWU6IFRoZSBuYW1lIG9mIHRoZSByZXNvdXJjZQoKICAgIDpwYXJhbSBhY3Rpb25fbmFtZTogVGhlIG5hbWUgb2YgY29sbGVjdGlvbiBhY3Rpb24uIEN1cnJlbnRseSBvbmx5CiAgICAgICAgY2FuIGJlIGFsbCwgZmlsdGVyLCBsaW1pdCwgb3IgcGFnZV9zaXplCgogICAgOnBhcmFtIGV2ZW50X2VtaXR0ZXI6IFRoZSBldmVudCBlbWl0dGVyIHRvIHVzZSB0byBlbWl0IGV2ZW50cwoKICAgIDpwYXJhbSBjb2xsZWN0aW9uX21vZGVsOiBUaGUgbW9kZWwgb2YgdGhlIGNvbGxlY3Rpb24KCiAgICA6cGFyYW0gc2VydmljZV9tb2RlbDogVGhlIG1vZGVsIG9mIHRoZSBzZXJ2aWNlCgogICAgOnBhcmFtIGluY2x1ZGVfc2lnbmF0dXJlOiBXaGV0aGVyIG9yIG5vdCB0byBpbmNsdWRlIHRoZSBzaWduYXR1cmUuCiAgICAgICAgSXQgaXMgdXNlZnVsIGZvciBnZW5lcmF0aW5nIGRvY3N0cmluZ3MuCiAgICAiIiIKICAgIG9wZXJhdGlvbl9tb2RlbCA9IHNlcnZpY2VfbW9kZWwub3BlcmF0aW9uX21vZGVsKAogICAgICAgIGNvbGxlY3Rpb25fbW9kZWwucmVxdWVzdC5vcGVyYXRpb24pCgogICAgdW5kZXJseWluZ19vcGVyYXRpb25fbWVtYmVycyA9IFtdCiAgICBpZiBvcGVyYXRpb25fbW9kZWwuaW5wdXRfc2hhcGU6CiAgICAgICAgdW5kZXJseWluZ19vcGVyYXRpb25fbWVtYmVycyA9IG9wZXJhdGlvbl9tb2RlbC5pbnB1dF9zaGFwZS5tZW1iZXJzCgogICAgZXhhbXBsZV9yZXNvdXJjZV9uYW1lID0geGZvcm1fbmFtZShyZXNvdXJjZV9uYW1lKQogICAgaWYgc2VydmljZV9tb2RlbC5zZXJ2aWNlX25hbWUgPT0gcmVzb3VyY2VfbmFtZToKICAgICAgICBleGFtcGxlX3Jlc291cmNlX25hbWUgPSByZXNvdXJjZV9uYW1lCgogICAgY3VzdG9tX2FjdGlvbl9pbmZvX2RpY3QgPSB7CiAgICAgICAgJ2FsbCc6IHsKICAgICAgICAgICAgJ21ldGhvZF9kZXNjcmlwdGlvbic6ICgKICAgICAgICAgICAgICAgICdDcmVhdGVzIGFuIGl0ZXJhYmxlIG9mIGFsbCAlcyByZXNvdXJjZXMgJwogICAgICAgICAgICAgICAgJ2luIHRoZSBjb2xsZWN0aW9uLicgJSBjb2xsZWN0aW9uX21vZGVsLnJlc291cmNlLnR5cGUpLAogICAgICAgICAgICAnZXhhbXBsZV9wcmVmaXgnOiAnJXNfaXRlcmF0b3IgPSAlcy4lcy5hbGwnICUgKAogICAgICAgICAgICAgICAgeGZvcm1fbmFtZShjb2xsZWN0aW9uX21vZGVsLnJlc291cmNlLnR5cGUpLAogICAgICAgICAgICAgICAgZXhhbXBsZV9yZXNvdXJjZV9uYW1lLCBjb2xsZWN0aW9uX21vZGVsLm5hbWUpLAogICAgICAgICAgICAnZXhjbHVkZV9pbnB1dCc6IHVuZGVybHlpbmdfb3BlcmF0aW9uX21lbWJlcnMKICAgICAgICB9LAogICAgICAgICdmaWx0ZXInOiB7CiAgICAgICAgICAgICdtZXRob2RfZGVzY3JpcHRpb24nOiAoCiAgICAgICAgICAgICAgICAnQ3JlYXRlcyBhbiBpdGVyYWJsZSBvZiBhbGwgJXMgcmVzb3VyY2VzICcKICAgICAgICAgICAgICAgICdpbiB0aGUgY29sbGVjdGlvbiBmaWx0ZXJlZCBieSBrd2FyZ3MgcGFzc2VkIHRvICcKICAgICAgICAgICAgICAgICdtZXRob2QuIEEgJXMgY29sbGVjdGlvbiB3aWxsIGluY2x1ZGUgYWxsIHJlc291cmNlcyBieSAnCiAgICAgICAgICAgICAgICAnZGVmYXVsdCBpZiBubyBmaWx0ZXJzIGFyZSBwcm92aWRlZCwgYW5kIGV4dHJlbWUgJwogICAgICAgICAgICAgICAgJ2NhdXRpb24gc2hvdWxkIGJlIHRha2VuIHdoZW4gcGVyZm9ybWluZyBhY3Rpb25zICcKICAgICAgICAgICAgICAgICdvbiBhbGwgcmVzb3VyY2VzLicgJSAoCiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbl9tb2RlbC5yZXNvdXJjZS50eXBlLAogICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25fbW9kZWwucmVzb3VyY2UudHlwZQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICdleGFtcGxlX3ByZWZpeCc6ICclc19pdGVyYXRvciA9ICVzLiVzLmZpbHRlcicgJSAoCiAgICAgICAgICAgICAgICB4Zm9ybV9uYW1lKGNvbGxlY3Rpb25fbW9kZWwucmVzb3VyY2UudHlwZSksCiAgICAgICAgICAgICAgICBleGFtcGxlX3Jlc291cmNlX25hbWUsIGNvbGxlY3Rpb25fbW9kZWwubmFtZSksCiAgICAgICAgICAgICdleGNsdWRlX2lucHV0JzogZ2V0X3Jlc291cmNlX2lnbm9yZV9wYXJhbXMoCiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uX21vZGVsLnJlcXVlc3QucGFyYW1zKQogICAgICAgIH0sCiAgICAgICAgJ2xpbWl0JzogewogICAgICAgICAgICAnbWV0aG9kX2Rlc2NyaXB0aW9uJzogKAogICAgICAgICAgICAgICAgJ0NyZWF0ZXMgYW4gaXRlcmFibGUgdXAgdG8gYSBzcGVjaWZpZWQgYW1vdW50IG9mICcKICAgICAgICAgICAgICAgICclcyByZXNvdXJjZXMgaW4gdGhlIGNvbGxlY3Rpb24uJyAlCiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uX21vZGVsLnJlc291cmNlLnR5cGUpLAogICAgICAgICAgICAnZXhhbXBsZV9wcmVmaXgnOiAnJXNfaXRlcmF0b3IgPSAlcy4lcy5saW1pdCcgJSAoCiAgICAgICAgICAgICAgICB4Zm9ybV9uYW1lKGNvbGxlY3Rpb25fbW9kZWwucmVzb3VyY2UudHlwZSksCiAgICAgICAgICAgICAgICBleGFtcGxlX3Jlc291cmNlX25hbWUsIGNvbGxlY3Rpb25fbW9kZWwubmFtZSksCiAgICAgICAgICAgICdpbmNsdWRlX2lucHV0JzogWwogICAgICAgICAgICAgICAgRG9jdW1lbnRlZFNoYXBlKAogICAgICAgICAgICAgICAgICAgIG5hbWU9J2NvdW50JywgdHlwZV9uYW1lPSdpbnRlZ2VyJywKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudGF0aW9uPSgKICAgICAgICAgICAgICAgICAgICAgICAgJ1RoZSBsaW1pdCB0byB0aGUgbnVtYmVyIG9mIHJlc291cmNlcyAnCiAgICAgICAgICAgICAgICAgICAgICAgICdpbiB0aGUgaXRlcmFibGUuJykpXSwKICAgICAgICAgICAgJ2V4Y2x1ZGVfaW5wdXQnOiB1bmRlcmx5aW5nX29wZXJhdGlvbl9tZW1iZXJzCiAgICAgICAgfSwKICAgICAgICAncGFnZV9zaXplJzogewogICAgICAgICAgICAnbWV0aG9kX2Rlc2NyaXB0aW9uJzogKAogICAgICAgICAgICAgICAgJ0NyZWF0ZXMgYW4gaXRlcmFibGUgb2YgYWxsICVzIHJlc291cmNlcyAnCiAgICAgICAgICAgICAgICAnaW4gdGhlIGNvbGxlY3Rpb24sIGJ1dCBsaW1pdHMgdGhlIG51bWJlciBvZiAnCiAgICAgICAgICAgICAgICAnaXRlbXMgcmV0dXJuZWQgYnkgZWFjaCBzZXJ2aWNlIGNhbGwgYnkgdGhlIHNwZWNpZmllZCAnCiAgICAgICAgICAgICAgICAnYW1vdW50LicgJSBjb2xsZWN0aW9uX21vZGVsLnJlc291cmNlLnR5cGUpLAogICAgICAgICAgICAnZXhhbXBsZV9wcmVmaXgnOiAnJXNfaXRlcmF0b3IgPSAlcy4lcy5wYWdlX3NpemUnICUgKAogICAgICAgICAgICAgICAgeGZvcm1fbmFtZShjb2xsZWN0aW9uX21vZGVsLnJlc291cmNlLnR5cGUpLAogICAgICAgICAgICAgICAgZXhhbXBsZV9yZXNvdXJjZV9uYW1lLCBjb2xsZWN0aW9uX21vZGVsLm5hbWUpLAogICAgICAgICAgICAnaW5jbHVkZV9pbnB1dCc6IFsKICAgICAgICAgICAgICAgIERvY3VtZW50ZWRTaGFwZSgKICAgICAgICAgICAgICAgICAgICBuYW1lPSdjb3VudCcsIHR5cGVfbmFtZT0naW50ZWdlcicsCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRhdGlvbj0oCiAgICAgICAgICAgICAgICAgICAgICAgICdUaGUgbnVtYmVyIG9mIGl0ZW1zIHJldHVybmVkIGJ5IGVhY2ggJwogICAgICAgICAgICAgICAgICAgICAgICAnc2VydmljZSBjYWxsJykpXSwKICAgICAgICAgICAgJ2V4Y2x1ZGVfaW5wdXQnOiB1bmRlcmx5aW5nX29wZXJhdGlvbl9tZW1iZXJzCiAgICAgICAgfQogICAgfQogICAgaWYgYWN0aW9uX25hbWUgaW4gY3VzdG9tX2FjdGlvbl9pbmZvX2RpY3Q6CiAgICAgICAgYWN0aW9uX2luZm8gPSBjdXN0b21fYWN0aW9uX2luZm9fZGljdFthY3Rpb25fbmFtZV0KICAgICAgICBkb2N1bWVudF9tb2RlbF9kcml2ZW5fcmVzb3VyY2VfbWV0aG9kKAogICAgICAgICAgICBzZWN0aW9uPXNlY3Rpb24sIG1ldGhvZF9uYW1lPWFjdGlvbl9uYW1lLAogICAgICAgICAgICBvcGVyYXRpb25fbW9kZWw9b3BlcmF0aW9uX21vZGVsLAogICAgICAgICAgICBldmVudF9lbWl0dGVyPWV2ZW50X2VtaXR0ZXIsCiAgICAgICAgICAgIHJlc291cmNlX2FjdGlvbl9tb2RlbD1jb2xsZWN0aW9uX21vZGVsLAogICAgICAgICAgICBpbmNsdWRlX3NpZ25hdHVyZT1pbmNsdWRlX3NpZ25hdHVyZSwKICAgICAgICAgICAgKiphY3Rpb25faW5mbwogICAgICAgICkK
