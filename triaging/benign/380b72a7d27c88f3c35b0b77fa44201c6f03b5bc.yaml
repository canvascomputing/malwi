statistics:
  total_files: 1
  skipped_files: 0.0
  processed_objects: 1
  malicious_objects: 0
details:
- path: .repo_cache/malicious_repos/pypi_malregistry/awscl/1.27.67/awscl-1.27.67/awscl-1.27.67/awscli/customizations/s3uploader.py
  contents:
  - name: <module>
    score: 0.0
    code: |-
      # Copyright 2012-2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.
      #
      # Licensed under the Apache License, Version 2.0 (the "License"). You
      # may not use this file except in compliance with the License. A copy of
      # the License is located at
      #
      # http://aws.amazon.com/apache2.0/
      #
      # or in the "license" file accompanying this file. This file is
      # distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
      # ANY KIND, either express or implied. See the License for the specific
      # language governing permissions and limitations under the License.

      import hashlib
      import logging
      import threading
      import os
      import sys

      import botocore
      import botocore.exceptions
      from s3transfer.manager import TransferManager
      from s3transfer.subscribers import BaseSubscriber

      from awscli.compat import collections_abc

      LOG = logging.getLogger(__name__)


      class NoSuchBucketError(Exception):
          def __init__(self, **kwargs):
              msg = self.fmt.format(**kwargs)
              Exception.__init__(self, msg)
              self.kwargs = kwargs


          fmt = ("S3 Bucket does not exist. "
                 "Execute the command to create a new bucket"
                 "\n"
                 "aws s3 mb s3://{bucket_name}")
    tokens: resume load_const INTEGER load_const import_name hashlib store_name hashlib load_const INTEGER load_const import_name logging store_name logging load_const INTEGER load_const import_name threading store_name threading load_const INTEGER load_const import_name os store_name os load_const INTEGER load_const import_name sys store_name sys load_const INTEGER load_const import_name botocore store_name botocore load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH store_name botocore load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from TransferManager store_name TransferManager pop_top load_const INTEGER load_const import_name STRING_LEN_S_ENT_HIGH import_from BaseSubscriber store_name BaseSubscriber pop_top load_const INTEGER load_const import_name awscli.compat import_from collections_abc store_name collections_abc pop_top push_null load_name logging load_attr getLogger load_name __name__ call store_name LOG push_null load_build_class load_const OBJECT make_function load_const STRING_LEN_S_ENT_HIGH load_name Exception call store_name STRING_LEN_S_ENT_HIGH push_null load_build_class load_const OBJECT make_function load_const S3Uploader load_name object call store_name S3Uploader push_null load_build_class load_const OBJECT make_function load_const STRING_LEN_S_ENT_HIGH load_name BaseSubscriber call store_name STRING_LEN_S_ENT_HIGH return_const None
    hash: 4a6e20f807cd8bd801ecd5009c1b2193688ad5296b63d49226757fb4eac2f0d0
sources:
  .repo_cache/malicious_repos/pypi_malregistry/awscl/1.27.67/awscl-1.27.67/awscl-1.27.67/awscli/customizations/s3uploader.py: IyBDb3B5cmlnaHQgMjAxMi0yMDE1IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKS4gWW91CiMgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIEEgY29weSBvZgojIHRoZSBMaWNlbnNlIGlzIGxvY2F0ZWQgYXQKIwojIGh0dHA6Ly9hd3MuYW1hem9uLmNvbS9hcGFjaGUyLjAvCiMKIyBvciBpbiB0aGUgImxpY2Vuc2UiIGZpbGUgYWNjb21wYW55aW5nIHRoaXMgZmlsZS4gVGhpcyBmaWxlIGlzCiMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YKIyBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMKIyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoKaW1wb3J0IGhhc2hsaWIKaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IHRocmVhZGluZwppbXBvcnQgb3MKaW1wb3J0IHN5cwoKaW1wb3J0IGJvdG9jb3JlCmltcG9ydCBib3RvY29yZS5leGNlcHRpb25zCmZyb20gczN0cmFuc2Zlci5tYW5hZ2VyIGltcG9ydCBUcmFuc2Zlck1hbmFnZXIKZnJvbSBzM3RyYW5zZmVyLnN1YnNjcmliZXJzIGltcG9ydCBCYXNlU3Vic2NyaWJlcgoKZnJvbSBhd3NjbGkuY29tcGF0IGltcG9ydCBjb2xsZWN0aW9uc19hYmMKCkxPRyA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKCmNsYXNzIE5vU3VjaEJ1Y2tldEVycm9yKEV4Y2VwdGlvbik6CiAgICBkZWYgX19pbml0X18oc2VsZiwgKiprd2FyZ3MpOgogICAgICAgIG1zZyA9IHNlbGYuZm10LmZvcm1hdCgqKmt3YXJncykKICAgICAgICBFeGNlcHRpb24uX19pbml0X18oc2VsZiwgbXNnKQogICAgICAgIHNlbGYua3dhcmdzID0ga3dhcmdzCgoKICAgIGZtdCA9ICgiUzMgQnVja2V0IGRvZXMgbm90IGV4aXN0LiAiCiAgICAgICAgICAgIkV4ZWN1dGUgdGhlIGNvbW1hbmQgdG8gY3JlYXRlIGEgbmV3IGJ1Y2tldCIKICAgICAgICAgICAiXG4iCiAgICAgICAgICAgImF3cyBzMyBtYiBzMzovL3tidWNrZXRfbmFtZX0iKQoKCmNsYXNzIFMzVXBsb2FkZXIob2JqZWN0KToKICAgICIiIgogICAgQ2xhc3MgdG8gdXBsb2FkIG9iamVjdHMgdG8gUzMgYnVja2V0IHRoYXQgdXNlIHZlcnNpb25pbmcuIElmIGJ1Y2tldAogICAgZG9lcyBub3QgYWxyZWFkeSB1c2UgdmVyc2lvbmluZywgdGhpcyBjbGFzcyB3aWxsIHR1cm4gb24gdmVyc2lvbmluZy4KICAgICIiIgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGFydGlmYWN0X21ldGFkYXRhKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIE1ldGFkYXRhIHRvIGF0dGFjaCB0byB0aGUgb2JqZWN0KHMpIHVwbG9hZGVkIGJ5IHRoZSB1cGxvYWRlci4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gc2VsZi5fYXJ0aWZhY3RfbWV0YWRhdGEKCiAgICBAYXJ0aWZhY3RfbWV0YWRhdGEuc2V0dGVyCiAgICBkZWYgYXJ0aWZhY3RfbWV0YWRhdGEoc2VsZiwgdmFsKToKICAgICAgICBpZiB2YWwgaXMgbm90IE5vbmUgYW5kIG5vdCBpc2luc3RhbmNlKHZhbCwgY29sbGVjdGlvbnNfYWJjLk1hcHBpbmcpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoIkFydGlmYWN0IG1ldGFkYXRhIHNob3VsZCBiZSBpbiBkaWN0IHR5cGUiKQogICAgICAgIHNlbGYuX2FydGlmYWN0X21ldGFkYXRhID0gdmFsCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHMzX2NsaWVudCwKICAgICAgICAgICAgICAgICBidWNrZXRfbmFtZSwKICAgICAgICAgICAgICAgICBwcmVmaXg9Tm9uZSwKICAgICAgICAgICAgICAgICBrbXNfa2V5X2lkPU5vbmUsCiAgICAgICAgICAgICAgICAgZm9yY2VfdXBsb2FkPUZhbHNlLAogICAgICAgICAgICAgICAgIHRyYW5zZmVyX21hbmFnZXI9Tm9uZSk6CiAgICAgICAgc2VsZi5idWNrZXRfbmFtZSA9IGJ1Y2tldF9uYW1lCiAgICAgICAgc2VsZi5wcmVmaXggPSBwcmVmaXgKICAgICAgICBzZWxmLmttc19rZXlfaWQgPSBrbXNfa2V5X2lkIG9yIE5vbmUKICAgICAgICBzZWxmLmZvcmNlX3VwbG9hZCA9IGZvcmNlX3VwbG9hZAogICAgICAgIHNlbGYuczMgPSBzM19jbGllbnQKCiAgICAgICAgc2VsZi50cmFuc2Zlcl9tYW5hZ2VyID0gdHJhbnNmZXJfbWFuYWdlcgogICAgICAgIGlmIG5vdCB0cmFuc2Zlcl9tYW5hZ2VyOgogICAgICAgICAgICBzZWxmLnRyYW5zZmVyX21hbmFnZXIgPSBUcmFuc2Zlck1hbmFnZXIoc2VsZi5zMykKCiAgICAgICAgc2VsZi5fYXJ0aWZhY3RfbWV0YWRhdGEgPSBOb25lCgogICAgZGVmIHVwbG9hZChzZWxmLCBmaWxlX25hbWUsIHJlbW90ZV9wYXRoKToKICAgICAgICAiIiIKICAgICAgICBVcGxvYWRzIGdpdmVuIGZpbGUgdG8gUzMKICAgICAgICA6cGFyYW0gZmlsZV9uYW1lOiBQYXRoIHRvIHRoZSBmaWxlIHRoYXQgd2lsbCBiZSB1cGxvYWRlZAogICAgICAgIDpwYXJhbSByZW1vdGVfcGF0aDogIGJlIHVwbG9hZGVkCiAgICAgICAgOnJldHVybjogVmVyc2lvbklkIG9mIHRoZSBsYXRlc3QgdXBsb2FkCiAgICAgICAgIiIiCgogICAgICAgIGlmIHNlbGYucHJlZml4IGFuZCBsZW4oc2VsZi5wcmVmaXgpID4gMDoKICAgICAgICAgICAgcmVtb3RlX3BhdGggPSAiezB9L3sxfSIuZm9ybWF0KHNlbGYucHJlZml4LCByZW1vdGVfcGF0aCkKCiAgICAgICAgIyBDaGVjayBpZiBhIGZpbGUgd2l0aCBzYW1lIGRhdGEgZXhpc3RzCiAgICAgICAgaWYgbm90IHNlbGYuZm9yY2VfdXBsb2FkIGFuZCBzZWxmLmZpbGVfZXhpc3RzKHJlbW90ZV9wYXRoKToKICAgICAgICAgICAgTE9HLmRlYnVnKCJGaWxlIHdpdGggc2FtZSBkYXRhIGFscmVhZHkgZXhpc3RzIGF0IHswfS4gIgogICAgICAgICAgICAgICAgICAgICAgIlNraXBwaW5nIHVwbG9hZCIuZm9ybWF0KHJlbW90ZV9wYXRoKSkKICAgICAgICAgICAgcmV0dXJuIHNlbGYubWFrZV91cmwocmVtb3RlX3BhdGgpCgogICAgICAgIHRyeToKCiAgICAgICAgICAgICMgRGVmYXVsdCB0byByZWd1bGFyIHNlcnZlci1zaWRlIGVuY3J5cHRpb24gdW5sZXNzIGN1c3RvbWVyIGhhcwogICAgICAgICAgICAjIHNwZWNpZmllZCB0aGVpciBvd24gS01TIGtleXMKICAgICAgICAgICAgYWRkaXRpb25hbF9hcmdzID0gewogICAgICAgICAgICAgICAgIlNlcnZlclNpZGVFbmNyeXB0aW9uIjogIkFFUzI1NiIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgc2VsZi5rbXNfa2V5X2lkOgogICAgICAgICAgICAgICAgYWRkaXRpb25hbF9hcmdzWyJTZXJ2ZXJTaWRlRW5jcnlwdGlvbiJdID0gImF3czprbXMiCiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2FyZ3NbIlNTRUtNU0tleUlkIl0gPSBzZWxmLmttc19rZXlfaWQKCiAgICAgICAgICAgIGlmIHNlbGYuYXJ0aWZhY3RfbWV0YWRhdGE6CiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2FyZ3NbIk1ldGFkYXRhIl0gPSBzZWxmLmFydGlmYWN0X21ldGFkYXRhCgogICAgICAgICAgICBwcmludF9wcm9ncmVzc19jYWxsYmFjayA9IFwKICAgICAgICAgICAgICAgIFByb2dyZXNzUGVyY2VudGFnZShmaWxlX25hbWUsIHJlbW90ZV9wYXRoKQogICAgICAgICAgICBmdXR1cmUgPSBzZWxmLnRyYW5zZmVyX21hbmFnZXIudXBsb2FkKGZpbGVfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJ1Y2tldF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZV9wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfYXJncywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcHJpbnRfcHJvZ3Jlc3NfY2FsbGJhY2tdKQogICAgICAgICAgICBmdXR1cmUucmVzdWx0KCkKCiAgICAgICAgICAgIHJldHVybiBzZWxmLm1ha2VfdXJsKHJlbW90ZV9wYXRoKQoKICAgICAgICBleGNlcHQgYm90b2NvcmUuZXhjZXB0aW9ucy5DbGllbnRFcnJvciBhcyBleDoKICAgICAgICAgICAgZXJyb3JfY29kZSA9IGV4LnJlc3BvbnNlWyJFcnJvciJdWyJDb2RlIl0KICAgICAgICAgICAgaWYgZXJyb3JfY29kZSA9PSAiTm9TdWNoQnVja2V0IjoKICAgICAgICAgICAgICAgIHJhaXNlIE5vU3VjaEJ1Y2tldEVycm9yKGJ1Y2tldF9uYW1lPXNlbGYuYnVja2V0X25hbWUpCiAgICAgICAgICAgIHJhaXNlIGV4CgogICAgZGVmIHVwbG9hZF93aXRoX2RlZHVwKHNlbGYsIGZpbGVfbmFtZSwgZXh0ZW5zaW9uPU5vbmUpOgogICAgICAgICIiIgogICAgICAgIE1ha2VzIGFuZCByZXR1cm5zIG5hbWUgb2YgdGhlIFMzIG9iamVjdCBiYXNlZCBvbiB0aGUgZmlsZSdzIE1ENSBzdW0KCiAgICAgICAgOnBhcmFtIGZpbGVfbmFtZTogZmlsZSB0byB1cGxvYWQKICAgICAgICA6cGFyYW0gZXh0ZW5zaW9uOiBTdHJpbmcgb2YgZmlsZSBleHRlbnNpb24gdG8gYXBwZW5kIHRvIHRoZSBvYmplY3QKICAgICAgICA6cmV0dXJuOiBTMyBVUkwgb2YgdGhlIHVwbG9hZGVkIG9iamVjdAogICAgICAgICIiIgoKICAgICAgICAjIFRoaXMgY29uc3RydWN0aW9uIG9mIHJlbW90ZV9wYXRoIGlzIGNyaXRpY2FsIHRvIHByZXZlbnRpbmcgZHVwbGljYXRlCiAgICAgICAgIyB1cGxvYWRzIG9mIHNhbWUgb2JqZWN0LiBVcGxvYWRlciB3aWxsIGNoZWNrIGlmIHRoZSBmaWxlIGV4aXN0cyBpbiBTMwogICAgICAgICMgYW5kIHJlLXVwbG9hZCBvbmx5IGlmIG5lY2Vzc2FyeS4gU28gdGhlIHRlbXBsYXRlIHBvaW50cyB0byBzYW1lIGZpbGUKICAgICAgICAjIGluIG11bHRpcGxlIHBsYWNlcywgdGhpcyB3aWxsIHVwbG9hZCBvbmx5IG9uY2UKCiAgICAgICAgZmlsZW1kNSA9IHNlbGYuZmlsZV9jaGVja3N1bShmaWxlX25hbWUpCiAgICAgICAgcmVtb3RlX3BhdGggPSBmaWxlbWQ1CiAgICAgICAgaWYgZXh0ZW5zaW9uOgogICAgICAgICAgICByZW1vdGVfcGF0aCA9IHJlbW90ZV9wYXRoICsgIi4iICsgZXh0ZW5zaW9uCgogICAgICAgIHJldHVybiBzZWxmLnVwbG9hZChmaWxlX25hbWUsIHJlbW90ZV9wYXRoKQoKICAgIGRlZiBmaWxlX2V4aXN0cyhzZWxmLCByZW1vdGVfcGF0aCk6CiAgICAgICAgIiIiCiAgICAgICAgQ2hlY2sgaWYgdGhlIGZpbGUgd2UgYXJlIHRyeWluZyB0byB1cGxvYWQgYWxyZWFkeSBleGlzdHMgaW4gUzMKCiAgICAgICAgOnBhcmFtIHJlbW90ZV9wYXRoOgogICAgICAgIDpyZXR1cm46IFRydWUsIGlmIGZpbGUgZXhpc3RzLiBGYWxzZSwgb3RoZXJ3aXNlCiAgICAgICAgIiIiCgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBGaW5kIHRoZSBvYmplY3QgdGhhdCBtYXRjaGVzIHRoaXMgRVRhZwogICAgICAgICAgICBzZWxmLnMzLmhlYWRfb2JqZWN0KAogICAgICAgICAgICAgICAgQnVja2V0PXNlbGYuYnVja2V0X25hbWUsIEtleT1yZW1vdGVfcGF0aCkKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgYm90b2NvcmUuZXhjZXB0aW9ucy5DbGllbnRFcnJvcjoKICAgICAgICAgICAgIyBFaXRoZXIgRmlsZSBkb2VzIG5vdCBleGlzdCBvciB3ZSBhcmUgdW5hYmxlIHRvIGdldAogICAgICAgICAgICAjIHRoaXMgaW5mb3JtYXRpb24uCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBtYWtlX3VybChzZWxmLCBvYmpfcGF0aCk6CiAgICAgICAgcmV0dXJuICJzMzovL3swfS97MX0iLmZvcm1hdCgKICAgICAgICAgICAgc2VsZi5idWNrZXRfbmFtZSwgb2JqX3BhdGgpCgogICAgZGVmIGZpbGVfY2hlY2tzdW0oc2VsZiwgZmlsZV9uYW1lKToKCiAgICAgICAgd2l0aCBvcGVuKGZpbGVfbmFtZSwgInJiIikgYXMgZmlsZV9oYW5kbGU6CiAgICAgICAgICAgIG1kNSA9IGhhc2hsaWIubWQ1KCkKICAgICAgICAgICAgIyBSZWFkIGZpbGUgaW4gY2h1bmtzIG9mIDQwOTYgYnl0ZXMKICAgICAgICAgICAgYmxvY2tfc2l6ZSA9IDQwOTYKCiAgICAgICAgICAgICMgU2F2ZSBjdXJyZW50IGN1cnNvciBwb3NpdGlvbiBhbmQgcmVzZXQgY3Vyc29yIHRvIHN0YXJ0IG9mIGZpbGUKICAgICAgICAgICAgY3VycG9zID0gZmlsZV9oYW5kbGUudGVsbCgpCiAgICAgICAgICAgIGZpbGVfaGFuZGxlLnNlZWsoMCkKCiAgICAgICAgICAgIGJ1ZiA9IGZpbGVfaGFuZGxlLnJlYWQoYmxvY2tfc2l6ZSkKICAgICAgICAgICAgd2hpbGUgbGVuKGJ1ZikgPiAwOgogICAgICAgICAgICAgICAgbWQ1LnVwZGF0ZShidWYpCiAgICAgICAgICAgICAgICBidWYgPSBmaWxlX2hhbmRsZS5yZWFkKGJsb2NrX3NpemUpCgogICAgICAgICAgICAjIFJlc3RvcmUgZmlsZSBjdXJzb3IncyBwb3NpdGlvbgogICAgICAgICAgICBmaWxlX2hhbmRsZS5zZWVrKGN1cnBvcykKCiAgICAgICAgICAgIHJldHVybiBtZDUuaGV4ZGlnZXN0KCkKCiAgICBkZWYgdG9fcGF0aF9zdHlsZV9zM191cmwoc2VsZiwga2V5LCB2ZXJzaW9uPU5vbmUpOgogICAgICAgICIiIgogICAgICAgICAgICBUaGlzIGxpbmsgZGVzY3JpYmVzIHRoZSBmb3JtYXQgb2YgUGF0aCBTdHlsZSBVUkxzCiAgICAgICAgICAgIGh0dHA6Ly9kb2NzLmF3cy5hbWF6b24uY29tL0FtYXpvblMzL2xhdGVzdC9kZXYvVXNpbmdCdWNrZXQuaHRtbCNhY2Nlc3MtYnVja2V0LWludHJvCiAgICAgICAgIiIiCiAgICAgICAgYmFzZSA9IHNlbGYuczMubWV0YS5lbmRwb2ludF91cmwKICAgICAgICByZXN1bHQgPSAiezB9L3sxfS97Mn0iLmZvcm1hdChiYXNlLCBzZWxmLmJ1Y2tldF9uYW1lLCBrZXkpCiAgICAgICAgaWYgdmVyc2lvbjoKICAgICAgICAgICAgcmVzdWx0ID0gInswfT92ZXJzaW9uSWQ9ezF9Ii5mb3JtYXQocmVzdWx0LCB2ZXJzaW9uKQoKICAgICAgICByZXR1cm4gcmVzdWx0CgoKY2xhc3MgUHJvZ3Jlc3NQZXJjZW50YWdlKEJhc2VTdWJzY3JpYmVyKToKICAgICMgVGhpcyBjbGFzcyB3YXMgY29waWVkIGRpcmVjdGx5IGZyb20gUzNUcmFuc2ZlciBkb2NzCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGZpbGVuYW1lLCByZW1vdGVfcGF0aCk6CiAgICAgICAgc2VsZi5fZmlsZW5hbWUgPSBmaWxlbmFtZQogICAgICAgIHNlbGYuX3JlbW90ZV9wYXRoID0gcmVtb3RlX3BhdGgKICAgICAgICBzZWxmLl9zaXplID0gZmxvYXQob3MucGF0aC5nZXRzaXplKGZpbGVuYW1lKSkKICAgICAgICBzZWxmLl9zZWVuX3NvX2ZhciA9IDAKICAgICAgICBzZWxmLl9sb2NrID0gdGhyZWFkaW5nLkxvY2soKQoKICAgIGRlZiBvbl9wcm9ncmVzcyhzZWxmLCBmdXR1cmUsIGJ5dGVzX3RyYW5zZmVycmVkLCAqKmt3YXJncyk6CgogICAgICAgICMgVG8gc2ltcGxpZnkgd2UnbGwgYXNzdW1lIHRoaXMgaXMgaG9va2VkIHVwCiAgICAgICAgIyB0byBhIHNpbmdsZSBmaWxlbmFtZS4KICAgICAgICB3aXRoIHNlbGYuX2xvY2s6CiAgICAgICAgICAgIHNlbGYuX3NlZW5fc29fZmFyICs9IGJ5dGVzX3RyYW5zZmVycmVkCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAoc2VsZi5fc2Vlbl9zb19mYXIgLyBzZWxmLl9zaXplKSAqIDEwMAogICAgICAgICAgICBzeXMuc3RkZXJyLndyaXRlKAogICAgICAgICAgICAgICAgICAgICJcclVwbG9hZGluZyB0byAlcyAgJXMgLyAlcyAgKCUuMmYlJSkiICUKICAgICAgICAgICAgICAgICAgICAoc2VsZi5fcmVtb3RlX3BhdGgsIHNlbGYuX3NlZW5fc29fZmFyLAogICAgICAgICAgICAgICAgICAgICBzZWxmLl9zaXplLCBwZXJjZW50YWdlKSkKICAgICAgICAgICAgc3lzLnN0ZGVyci5mbHVzaCgpCg==
