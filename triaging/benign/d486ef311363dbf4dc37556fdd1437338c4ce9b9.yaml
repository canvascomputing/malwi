statistics:
  total_files: 1
  skipped_files: 0.0
  processed_objects: 1
  malicious_objects: 0
details:
- path: .repo_cache/malicious_repos/pypi_malregistry/awscl/1.27.67/awscl-1.27.67/awscl-1.27.67/awscli/arguments.py
  contents:
  - name: CustomArgument.synopsis
    score: null
    code: |-
      @property
          def synopsis(self):
              return self._synopsis
    tokens: resume load_fast self load_attr _synopsis return_value
    hash: d3b87d45ee626a019bdef9a4d7bc4cdcf37ec08fc624a6be6da8d858572ad376
sources:
  .repo_cache/malicious_repos/pypi_malregistry/awscl/1.27.67/awscl-1.27.67/awscl-1.27.67/awscli/arguments.py: IyBDb3B5cmlnaHQgMjAxMyBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgojCiMgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIikuIFlvdQojIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBBIGNvcHkgb2YKIyB0aGUgTGljZW5zZSBpcyBsb2NhdGVkIGF0CiMKIyAgICAgaHR0cDovL2F3cy5hbWF6b24uY29tL2FwYWNoZTIuMC8KIwojIG9yIGluIHRoZSAibGljZW5zZSIgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMKIyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRgojIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYwojIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiIiIkFic3RyYWN0aW9ucyBmb3IgQ0xJIGFyZ3VtZW50cy4KClRoaXMgbW9kdWxlIGNvbnRhaW5zIGFic3RyYWN0aW9ucyBmb3IgcmVwcmVzZW50aW5nIENMSSBhcmd1bWVudHMuClRoaXMgaW5jbHVkZXMgaG93IHRoZSBDTEkgYXJndW1lbnQgcGFyc2VyIGlzIGNyZWF0ZWQsIGhvdyBhcmd1bWVudHMKYXJlIHNlcmlhbGl6ZWQsIGFuZCBob3cgYXJndW1lbnRzIGFyZSBib3VuZCAoaWYgYXQgYWxsKSB0byBvcGVyYXRpb24KYXJndW1lbnRzLgoKVGhlIEJhc2VDTElBcmd1bWVudCBpcyB0aGUgaW50ZXJmYWNlIGZvciBhbGwgYXJndW1lbnRzLiAgVGhpcyBpcyB0aGUgaW50ZXJmYWNlCmV4cGVjdGVkIGJ5IG9iamVjdHMgdGhhdCB3b3JrIHdpdGggYXJndW1lbnRzLiAgSWYgeW91IHdhbnQgdG8gaW1wbGVtZW50IHlvdXIKb3duIGFyZ3VtZW50IHN1YmNsYXNzLCBtYWtlIHN1cmUgaXQgaW1wbGVtZW50cyBldmVyeXRoaW5nIGluIEJhc2VDTElBcmd1bWVudC4KCkFyZ3VtZW50cyBnZW5lcmFsbHkgZmFsbCBpbnRvIG9uZSBvZiBzZXZlcmFsIGNhdGVnb3JpZXM6CgoqIGdsb2JhbCBhcmd1bWVudC4gIFRoZXNlIGFyZ3VtZW50cyBtYXkgaW5mbHVlbmNlIHdoYXQgdGhlIENMSSBkb2VzLAogIGJ1dCBhcmVuJ3QgcGFydCBvZiB0aGUgaW5wdXQgcGFyYW1ldGVycyBuZWVkZWQgdG8gbWFrZSBhbiBBUEkgY2FsbC4gIEZvcgogIGV4YW1wbGUsIHRoZSBgYC0tcmVnaW9uYGAgYXJndW1lbnQgc3BlY2lmaWVzIHdoaWNoIHJlZ2lvbiB0byBzZW5kIHRoZSByZXF1ZXN0CiAgdG8uICBUaGUgYGAtLW91dHB1dGBgIGFyZ3VtZW50IHNwZWNpZmllcyBob3cgdG8gZGlzcGxheSB0aGUgcmVzcG9uc2UgdG8gdGhlCiAgdXNlci4gIFRoZSBgYC0tcXVlcnlgYCBhcmd1bWVudCBzcGVjaWZpZXMgaG93IHRvIHNlbGVjdCBzcGVjaWZpYyBlbGVtZW50cwogIGZyb20gYSByZXNwb25zZS4KKiBvcGVyYXRpb24gYXJndW1lbnQuICBUaGVzZSBhcmUgYXJndW1lbnRzIHRoYXQgaW5mbHVlbmNlIHRoZSBwYXJhbWV0ZXJzIHdlCiAgc2VuZCB0byBhIHNlcnZpY2Ugd2hlbiBtYWtpbmcgYW4gQVBJIGNhbGwuICBTb21lIG9mIHRoZXNlIGFyZ3VtZW50cyBhcmUKICBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgZGlyZWN0bHkgZnJvbSBpbnRyb3NwZWN0aW5nIHRoZSBKU09OIHNlcnZpY2UgbW9kZWwuCiAgU29tZXRpbWVzIGN1c3RvbWl6YXRpb25zIG1heSBwcm92aWRlIGEgcHNldWRvLWFyZ3VtZW50IHRoYXQgdGFrZXMgdGhlCiAgdXNlciBpbnB1dCBhbmQgbWFwcyB0aGUgaW5wdXQgdmFsdWUgdG8gc2V2ZXJhbCBBUEkgcGFyYW1ldGVycy4KCiIiIgppbXBvcnQgbG9nZ2luZwoKZnJvbSBib3RvY29yZSBpbXBvcnQgeGZvcm1fbmFtZQpmcm9tIGJvdG9jb3JlLmhvb2tzIGltcG9ydCBmaXJzdF9ub25fbm9uZV9yZXNwb25zZQoKZnJvbSBhd3NjbGkuYXJncHJvY2VzcyBpbXBvcnQgdW5wYWNrX2NsaV9hcmcKZnJvbSBhd3NjbGkuc2NoZW1hIGltcG9ydCBTY2hlbWFUcmFuc2Zvcm1lcgpmcm9tIGJvdG9jb3JlIGltcG9ydCBtb2RlbAoKCkxPRyA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCdhd3NjbGkuYXJndW1lbnRzJykKCgpjbGFzcyBVbmtub3duQXJndW1lbnRFcnJvcihFeGNlcHRpb24pOgogICAgcGFzcwoKCmRlZiBjcmVhdGVfYXJndW1lbnRfbW9kZWxfZnJvbV9zY2hlbWEoc2NoZW1hKToKICAgICMgR2l2ZW4gYSBKU09OIHNjaGVtYSAoZGVzY3JpYmVkIGluIHNjaGVtYS5weSksIGNvbnZlcnQgaXQKICAgICMgdG8gYSBzaGFwZSBvYmplY3QgZnJvbSBgYm90b2NvcmUubW9kZWwuU2hhcGVgIHRoYXQgY2FuIGJlCiAgICAjIHVzZWQgYXMgdGhlIGFyZ3VtZW50X21vZGVsIGZvciB0aGUgQXJndW1lbnQgY2xhc3NlcyBiZWxvdy4KICAgIHRyYW5zZm9ybWVyID0gU2NoZW1hVHJhbnNmb3JtZXIoKQogICAgc2hhcGVzX21hcCA9IHRyYW5zZm9ybWVyLnRyYW5zZm9ybShzY2hlbWEpCiAgICBzaGFwZV9yZXNvbHZlciA9IG1vZGVsLlNoYXBlUmVzb2x2ZXIoc2hhcGVzX21hcCkKICAgICMgVGhlIFNjaGVtYVRyYW5zZm9ybWVyIGd1YXJhbnRlZXMgdGhhdCB0aGUgdG9wIGxldmVsIHNoYXBlCiAgICAjIHdpbGwgYWx3YXlzIGJlIG5hbWVkICdJbnB1dFNoYXBlJy4KICAgIGFyZ19zaGFwZSA9IHNoYXBlX3Jlc29sdmVyLmdldF9zaGFwZV9ieV9uYW1lKCdJbnB1dFNoYXBlJykKICAgIHJldHVybiBhcmdfc2hhcGUKCgpjbGFzcyBCYXNlQ0xJQXJndW1lbnQob2JqZWN0KToKICAgICIiIkludGVyZmFjZSBmb3IgQ0xJIGFyZ3VtZW50LgoKICAgIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgaW50ZXJmYWNlIHVzZWQgZm9yIHJlcHJlc2VudGluZyBDTEkKICAgIGFyZ3VtZW50cy4KCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSk6CiAgICAgICAgc2VsZi5fbmFtZSA9IG5hbWUKCiAgICBkZWYgYWRkX3RvX2FyZ190YWJsZShzZWxmLCBhcmd1bWVudF90YWJsZSk6CiAgICAgICAgIiIiQWRkIHRoaXMgb2JqZWN0IHRvIHRoZSBhcmd1bWVudF90YWJsZS4KCiAgICAgICAgVGhlIGBgYXJndW1lbnRfdGFibGVgYCByZXByZXNlbnRzIHRoZSBhcmd1bWVudCBmb3IgdGhlIG9wZXJhdGlvbi4KICAgICAgICBUaGlzIGlzIGNhbGxlZCBieSB0aGUgYGBTZXJ2aWNlT3BlcmF0aW9uYGAgb2JqZWN0IHRvIGNyZWF0ZSB0aGUKICAgICAgICBhcmd1bWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBvcGVyYXRpb24uCgogICAgICAgIDp0eXBlIGFyZ3VtZW50X3RhYmxlOiBkaWN0CiAgICAgICAgOnBhcmFtIGFyZ3VtZW50X3RhYmxlOiBUaGUgYXJndW1lbnQgdGFibGUuICBUaGUga2V5IGlzIHRoZSBhcmd1bWVudAogICAgICAgICAgICBuYW1lLCBhbmQgdGhlIHZhbHVlIGlzIGFuIG9iamVjdCBpbXBsZW1lbnRpbmcgdGhpcyBpbnRlcmZhY2UuCiAgICAgICAgIiIiCiAgICAgICAgYXJndW1lbnRfdGFibGVbc2VsZi5uYW1lXSA9IHNlbGYKCiAgICBkZWYgYWRkX3RvX3BhcnNlcihzZWxmLCBwYXJzZXIpOgogICAgICAgICIiIkFkZCB0aGlzIG9iamVjdCB0byB0aGUgcGFyc2VyIGluc3RhbmNlLgoKICAgICAgICBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgdGhlIGFzc29jaWF0ZWQgYGBBcmd1bWVudFBhcnNlcmBgCiAgICAgICAgaW5zdGFuY2UuICBUaGlzIG1ldGhvZCBzaG91bGQgbWFrZSB0aGUgcmVsZXZhbnQgY2FsbHMKICAgICAgICB0byBgYGFkZF9hcmd1bWVudGBgIHRvIGFkZCBpdHNlbGYgdG8gdGhlIGFyZ3BhcnNlci4KCiAgICAgICAgOnR5cGUgcGFyc2VyOiBgYGFyZ3BhcnNlLkFyZ3VtZW50UGFyc2VyYGAuCiAgICAgICAgOnBhcmFtIHBhcnNlcjogVGhlIGFyZ3VtZW50IHBhcnNlciBhc3NvY2lhdGVkIHdpdGggdGhlIG9wZXJhdGlvbi4KCiAgICAgICAgIiIiCiAgICAgICAgcGFzcwoKICAgIGRlZiBhZGRfdG9fcGFyYW1zKHNlbGYsIHBhcmFtZXRlcnMsIHZhbHVlKToKICAgICAgICAiIiJBZGQgdGhpcyBvYmplY3QgdG8gdGhlIHBhcmFtZXRlcnMgZGljdC4KCiAgICAgICAgVGhpcyBtZXRob2QgaXMgcmVzcG9uc2libGUgZm9yIHRha2luZyB0aGUgdmFsdWUgc3BlY2lmaWVkCiAgICAgICAgb24gdGhlIGNvbW1hbmQgbGluZSwgYW5kIGRlY2lkaW5nIGhvdyB0aGF0IGNvcnJlc3BvbmRzIHRvCiAgICAgICAgcGFyYW1ldGVycyB1c2VkIGJ5IHRoZSBzZXJ2aWNlL29wZXJhdGlvbi4KCiAgICAgICAgOnR5cGUgcGFyYW1ldGVyczogZGljdAogICAgICAgIDpwYXJhbSBwYXJhbWV0ZXJzOiBUaGUgcGFyYW1ldGVycyBkaWN0aW9uYXJ5IHRoYXQgd2lsbCBiZQogICAgICAgICAgICBnaXZlbiB0byBgYGJvdG9jb3JlYGAuICBUaGlzIHNob3VsZCBtYXRjaCB1cCB0byB0aGUKICAgICAgICAgICAgcGFyYW1ldGVycyBhc3NvY2lhdGVkIHdpdGggdGhlIHBhcnRpY3VsYXIgb3BlcmF0aW9uLgoKICAgICAgICA6cGFyYW0gdmFsdWU6IFRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIENMSSBvcHRpb24uCgogICAgICAgICIiIgogICAgICAgIHBhc3MKCiAgICBAcHJvcGVydHkKICAgIGRlZiBuYW1lKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9uYW1lCgogICAgQHByb3BlcnR5CiAgICBkZWYgY2xpX25hbWUoc2VsZik6CiAgICAgICAgcmV0dXJuICctLScgKyBzZWxmLl9uYW1lCgogICAgQHByb3BlcnR5CiAgICBkZWYgY2xpX3R5cGVfbmFtZShzZWxmKToKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJjbGlfdHlwZV9uYW1lIikKCiAgICBAcHJvcGVydHkKICAgIGRlZiByZXF1aXJlZChzZWxmKToKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJyZXF1aXJlZCIpCgogICAgQHByb3BlcnR5CiAgICBkZWYgZG9jdW1lbnRhdGlvbihzZWxmKToKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJkb2N1bWVudGF0aW9uIikKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjbGlfdHlwZShzZWxmKToKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJjbGlfdHlwZSIpCgogICAgQHByb3BlcnR5CiAgICBkZWYgcHlfbmFtZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fbmFtZS5yZXBsYWNlKCctJywgJ18nKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNob2ljZXMoc2VsZik6CiAgICAgICAgIiIiTGlzdCB2YWxpZCBjaG9pY2VzIGZvciBhcmd1bWVudCB2YWx1ZS4KCiAgICAgICAgSWYgdGhpcyB2YWx1ZSBpcyBub3QgTm9uZSB0aGVuIHRoaXMgc2hvdWxkIHJldHVybiBhIGxpc3Qgb2YgdmFsaWQKICAgICAgICB2YWx1ZXMgZm9yIHRoZSBhcmd1bWVudC4KCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBAcHJvcGVydHkKICAgIGRlZiBzeW5vcHNpcyhzZWxmKToKICAgICAgICByZXR1cm4gJycKCiAgICBAcHJvcGVydHkKICAgIGRlZiBwb3NpdGlvbmFsX2FyZyhzZWxmKToKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBAcHJvcGVydHkKICAgIGRlZiBuYXJncyhzZWxmKToKICAgICAgICByZXR1cm4gTm9uZQoKICAgIEBuYW1lLnNldHRlcgogICAgZGVmIG5hbWUoc2VsZiwgdmFsdWUpOgogICAgICAgIHNlbGYuX25hbWUgPSB2YWx1ZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGdyb3VwX25hbWUoc2VsZik6CiAgICAgICAgIiIiR2V0IHRoZSBncm91cCBuYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGUgYXJndW1lbnQuCgogICAgICAgIEFuIGFyZ3VtZW50IGNhbiBiZSBwYXJ0IG9mIGEgZ3JvdXAuICBUaGlzIHByb3BlcnR5IHdpbGwKICAgICAgICByZXR1cm4gdGhlIG5hbWUgb2YgdGhhdCBncm91cC4KCiAgICAgICAgVGhpcyBiYXNlIGNsYXNzIGhhcyBubyBkZWZhdWx0IGJlaGF2aW9yIGZvciBncm91cHMsIGNvZGUKICAgICAgICB0aGF0IGNvbnN1bWVzIGFyZ3VtZW50IG9iamVjdHMgY2FuIHVzZSB0aGVtIGZvciB3aGF0ZXZlcgogICAgICAgIHB1cnBvc2VzIHRoZXkgbGlrZSAoZG9jdW1lbnRhdGlvbiwgbXV0dWFsbHkgZXhjbHVzaXZlIGdyb3VwCiAgICAgICAgdmFsaWRhdGlvbiwgZXRjLikuCgogICAgICAgICIiIgogICAgICAgIHJldHVybiBOb25lCgoKY2xhc3MgQ3VzdG9tQXJndW1lbnQoQmFzZUNMSUFyZ3VtZW50KToKICAgICIiIgogICAgUmVwcmVzZW50cyBhIENMSSBhcmd1bWVudCB0aGF0IGlzIGNvbmZpZ3VyZWQgZnJvbSBhIGRpY3Rpb25hcnkuCgogICAgRm9yIGV4YW1wbGUsIHRoZSAidG9wIGxldmVsIiBhcmd1bWVudHMgdXNlZCBmb3IgdGhlIENMSQogICAgKC0tcmVnaW9uLCAtLW91dHB1dCkgY2FuIHVzZSBhIEN1c3RvbUFyZ3VtZW50IGFyZ3VtZW50LAogICAgYXMgdGhlc2UgYXJlIGRlc2NyaWJlZCBpbiB0aGUgY2xpLmpzb24gZmlsZSBhcyBkaWN0aW9uYXJpZXMuCgogICAgVGhpcyBjbGFzcyBpcyBhbHNvIHVzZWZ1bCBmb3IgcGx1Z2lucy9jdXN0b21pemF0aW9ucyB0aGF0IHdhbnQgdG8KICAgIGFkZCBhZGRpdGlvbmFsIGFyZ3MuCgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIGhlbHBfdGV4dD0nJywgZGVzdD1Ob25lLCBkZWZhdWx0PU5vbmUsCiAgICAgICAgICAgICAgICAgYWN0aW9uPU5vbmUsIHJlcXVpcmVkPU5vbmUsIGNob2ljZXM9Tm9uZSwgbmFyZ3M9Tm9uZSwKICAgICAgICAgICAgICAgICBjbGlfdHlwZV9uYW1lPU5vbmUsIGdyb3VwX25hbWU9Tm9uZSwgcG9zaXRpb25hbF9hcmc9RmFsc2UsCiAgICAgICAgICAgICAgICAgbm9fcGFyYW1maWxlPUZhbHNlLCBhcmd1bWVudF9tb2RlbD1Ob25lLCBzeW5vcHNpcz0nJywKICAgICAgICAgICAgICAgICBjb25zdD1Ob25lKToKICAgICAgICBzZWxmLl9uYW1lID0gbmFtZQogICAgICAgIHNlbGYuX2hlbHAgPSBoZWxwX3RleHQKICAgICAgICBzZWxmLl9kZXN0ID0gZGVzdAogICAgICAgIHNlbGYuX2RlZmF1bHQgPSBkZWZhdWx0CiAgICAgICAgc2VsZi5fYWN0aW9uID0gYWN0aW9uCiAgICAgICAgc2VsZi5fcmVxdWlyZWQgPSByZXF1aXJlZAogICAgICAgIHNlbGYuX25hcmdzID0gbmFyZ3MKICAgICAgICBzZWxmLl9jb25zdCA9IGNvbnN0CiAgICAgICAgc2VsZi5fY2xpX3R5cGVfbmFtZSA9IGNsaV90eXBlX25hbWUKICAgICAgICBzZWxmLl9ncm91cF9uYW1lID0gZ3JvdXBfbmFtZQogICAgICAgIHNlbGYuX3Bvc2l0aW9uYWxfYXJnID0gcG9zaXRpb25hbF9hcmcKICAgICAgICBpZiBjaG9pY2VzIGlzIE5vbmU6CiAgICAgICAgICAgIGNob2ljZXMgPSBbXQogICAgICAgIHNlbGYuX2Nob2ljZXMgPSBjaG9pY2VzCiAgICAgICAgc2VsZi5fc3lub3BzaXMgPSBzeW5vcHNpcwoKICAgICAgICAjIFRoZXNlIGFyZSBwdWJsaWMgYXR0cmlidXRlcyB0aGF0IGFyZSBvayB0byBhY2Nlc3MgZnJvbSBleHRlcm5hbAogICAgICAgICMgb2JqZWN0cy4KICAgICAgICBzZWxmLm5vX3BhcmFtZmlsZSA9IG5vX3BhcmFtZmlsZQogICAgICAgIHNlbGYuYXJndW1lbnRfbW9kZWwgPSBOb25lCgogICAgICAgIGlmIGFyZ3VtZW50X21vZGVsIGlzIE5vbmU6CiAgICAgICAgICAgIGFyZ3VtZW50X21vZGVsID0gc2VsZi5fY3JlYXRlX3NjYWxhcl9hcmd1bWVudF9tb2RlbCgpCiAgICAgICAgc2VsZi5hcmd1bWVudF9tb2RlbCA9IGFyZ3VtZW50X21vZGVsCgogICAgICAgICMgSWYgdGhlIHRvcCBsZXZlbCBlbGVtZW50IGlzIGEgbGlzdCB0aGVuIHNldCBuYXJncyB0bwogICAgICAgICMgYWNjZXB0IG11bHRpcGxlIHZhbHVlcyBzZXBhcmF0ZWQgYnkgYSBzcGFjZS4KICAgICAgICBpZiBzZWxmLmFyZ3VtZW50X21vZGVsIGlzIG5vdCBOb25lIGFuZCBcCiAgICAgICAgICAgICAgICBzZWxmLmFyZ3VtZW50X21vZGVsLnR5cGVfbmFtZSA9PSAnbGlzdCc6CiAgICAgICAgICAgIHNlbGYuX25hcmdzID0gJysnCgogICAgZGVmIF9jcmVhdGVfc2NhbGFyX2FyZ3VtZW50X21vZGVsKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX25hcmdzIGlzIG5vdCBOb25lOgogICAgICAgICAgICAjIElmIG5hcmdzIGlzIG5vdCBOb25lIHRoZW4gYXJncGFyc2Ugd2lsbCBwYXJzZSB0aGUgdmFsdWUKICAgICAgICAgICAgIyBhcyBhIGxpc3QsIHNvIHdlIGRvbid0IGNyZWF0ZSBhbiBhcmd1bWVudF9vYmplY3Qgc28gd2UgZG9uJ3QKICAgICAgICAgICAgIyBnbyB0aHJvdWdoIHBhcmFtIHZhbGlkYXRpb24uCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgIyBJZiBubyBhcmd1bWVudCBtb2RlbCBpcyBwcm92aWRlZCwgd2UgY3JlYXRlIGEgYmFzaWMKICAgICAgICAjIHNoYXBlIGFyZ3VtZW50LgogICAgICAgIHR5cGVfbmFtZSA9IHNlbGYuY2xpX3R5cGVfbmFtZQogICAgICAgIHJldHVybiBjcmVhdGVfYXJndW1lbnRfbW9kZWxfZnJvbV9zY2hlbWEoeyd0eXBlJzogdHlwZV9uYW1lfSkKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjbGlfbmFtZShzZWxmKToKICAgICAgICBpZiBzZWxmLl9wb3NpdGlvbmFsX2FyZzoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX25hbWUKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gJy0tJyArIHNlbGYuX25hbWUKCiAgICBkZWYgYWRkX3RvX3BhcnNlcihzZWxmLCBwYXJzZXIpOgogICAgICAgICIiIgoKICAgICAgICBTZWUgdGhlIGBgQmFzZUNMSUFyZ3VtZW50LmFkZF90b19wYXJzZXJgYCBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICAgICAgICAiIiIKICAgICAgICBjbGlfbmFtZSA9IHNlbGYuY2xpX25hbWUKICAgICAgICBrd2FyZ3MgPSB7fQogICAgICAgIGlmIHNlbGYuX2Rlc3QgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGt3YXJnc1snZGVzdCddID0gc2VsZi5fZGVzdAogICAgICAgIGlmIHNlbGYuX2FjdGlvbiBpcyBub3QgTm9uZToKICAgICAgICAgICAga3dhcmdzWydhY3Rpb24nXSA9IHNlbGYuX2FjdGlvbgogICAgICAgIGlmIHNlbGYuX2RlZmF1bHQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGt3YXJnc1snZGVmYXVsdCddID0gc2VsZi5fZGVmYXVsdAogICAgICAgIGlmIHNlbGYuX2Nob2ljZXM6CiAgICAgICAgICAgIGt3YXJnc1snY2hvaWNlcyddID0gc2VsZi5fY2hvaWNlcwogICAgICAgIGlmIHNlbGYuX3JlcXVpcmVkIGlzIG5vdCBOb25lOgogICAgICAgICAgICBrd2FyZ3NbJ3JlcXVpcmVkJ10gPSBzZWxmLl9yZXF1aXJlZAogICAgICAgIGlmIHNlbGYuX25hcmdzIGlzIG5vdCBOb25lOgogICAgICAgICAgICBrd2FyZ3NbJ25hcmdzJ10gPSBzZWxmLl9uYXJncwogICAgICAgIGlmIHNlbGYuX2NvbnN0IGlzIG5vdCBOb25lOgogICAgICAgICAgICBrd2FyZ3NbJ2NvbnN0J10gPSBzZWxmLl9jb25zdAogICAgICAgIHBhcnNlci5hZGRfYXJndW1lbnQoY2xpX25hbWUsICoqa3dhcmdzKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHJlcXVpcmVkKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX3JlcXVpcmVkIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHJldHVybiBzZWxmLl9yZXF1aXJlZAoKICAgIEByZXF1aXJlZC5zZXR0ZXIKICAgIGRlZiByZXF1aXJlZChzZWxmLCB2YWx1ZSk6CiAgICAgICAgc2VsZi5fcmVxdWlyZWQgPSB2YWx1ZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGRvY3VtZW50YXRpb24oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2hlbHAKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjbGlfdHlwZV9uYW1lKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX2NsaV90eXBlX25hbWUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9jbGlfdHlwZV9uYW1lCiAgICAgICAgZWxpZiBzZWxmLl9hY3Rpb24gaW4gWydzdG9yZV90cnVlJywgJ3N0b3JlX2ZhbHNlJ106CiAgICAgICAgICAgIHJldHVybiAnYm9vbGVhbicKICAgICAgICBlbGlmIHNlbGYuYXJndW1lbnRfbW9kZWwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmFyZ3VtZW50X21vZGVsLnR5cGVfbmFtZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgRGVmYXVsdCB0byAnc3RyaW5nJyB0eXBlIGlmIHdlIGRvbid0IGhhdmUgYW55CiAgICAgICAgICAgICMgb3RoZXIgaW5mby4KICAgICAgICAgICAgcmV0dXJuICdzdHJpbmcnCgogICAgQHByb3BlcnR5CiAgICBkZWYgY2xpX3R5cGUoc2VsZik6CiAgICAgICAgY2xpX3R5cGUgPSBzdHIKICAgICAgICBpZiBzZWxmLl9hY3Rpb24gaW4gWydzdG9yZV90cnVlJywgJ3N0b3JlX2ZhbHNlJ106CiAgICAgICAgICAgIGNsaV90eXBlID0gYm9vbAogICAgICAgIHJldHVybiBjbGlfdHlwZQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNob2ljZXMoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2Nob2ljZXMKCiAgICBAcHJvcGVydHkKICAgIGRlZiBncm91cF9uYW1lKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9ncm91cF9uYW1lCgogICAgQHByb3BlcnR5CiAgICBkZWYgc3lub3BzaXMoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX3N5bm9wc2lzCgogICAgQHByb3BlcnR5CiAgICBkZWYgcG9zaXRpb25hbF9hcmcoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX3Bvc2l0aW9uYWxfYXJnCgogICAgQHByb3BlcnR5CiAgICBkZWYgbmFyZ3Moc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX25hcmdzCgoKY2xhc3MgQ0xJQXJndW1lbnQoQmFzZUNMSUFyZ3VtZW50KToKICAgICIiIlJlcHJlc2VudHMgYSBDTEkgYXJndW1lbnQgdGhhdCBtYXBzIHRvIGEgc2VydmljZSBwYXJhbWV0ZXIuCgogICAgIiIiCgogICAgVFlQRV9NQVAgPSB7CiAgICAgICAgJ3N0cnVjdHVyZSc6IHN0ciwKICAgICAgICAnbWFwJzogc3RyLAogICAgICAgICd0aW1lc3RhbXAnOiBzdHIsCiAgICAgICAgJ2xpc3QnOiBzdHIsCiAgICAgICAgJ3N0cmluZyc6IHN0ciwKICAgICAgICAnZmxvYXQnOiBmbG9hdCwKICAgICAgICAnaW50ZWdlcic6IHN0ciwKICAgICAgICAnbG9uZyc6IGludCwKICAgICAgICAnYm9vbGVhbic6IGJvb2wsCiAgICAgICAgJ2RvdWJsZSc6IGZsb2F0LAogICAgICAgICdibG9iJzogc3RyCiAgICB9CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIGFyZ3VtZW50X21vZGVsLCBvcGVyYXRpb25fbW9kZWwsCiAgICAgICAgICAgICAgICAgZXZlbnRfZW1pdHRlciwgaXNfcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgc2VyaWFsaXplZF9uYW1lPU5vbmUpOgogICAgICAgICIiIgoKICAgICAgICA6dHlwZSBuYW1lOiBzdHIKICAgICAgICA6cGFyYW0gbmFtZTogVGhlIG5hbWUgb2YgdGhlIGFyZ3VtZW50IGluICJjbGkiIGZvcm0KICAgICAgICAgICAgKGUuZy4gIGBgbWluLWluc3RhbmNlc2BgKS4KCiAgICAgICAgOnR5cGUgYXJndW1lbnRfbW9kZWw6IGBgYm90b2NvcmUubW9kZWwuU2hhcGVgYAogICAgICAgIDpwYXJhbSBhcmd1bWVudF9tb2RlbDogVGhlIHNoYXBlIG9iamVjdCB0aGF0IG1vZGVscyB0aGUgYXJndW1lbnQuCgogICAgICAgIDp0eXBlIGFyZ3VtZW50X21vZGVsOiBgYGJvdG9jb3JlLm1vZGVsLk9wZXJhdGlvbk1vZGVsYGAKICAgICAgICA6cGFyYW0gYXJndW1lbnRfbW9kZWw6IFRoZSBvYmplY3QgdGhhdCBtb2RlbHMgdGhlIGFzc29jaWF0ZWQgb3BlcmF0aW9uLgoKICAgICAgICA6dHlwZSBldmVudF9lbWl0dGVyOiBgYGJvdG9jb3JlLmhvb2tzLkJhc2VFdmVudEhvb2tzYGAKICAgICAgICA6cGFyYW0gZXZlbnRfZW1pdHRlcjogVGhlIGV2ZW50IGVtaXR0ZXIgdG8gdXNlIHdoZW4gZW1pdHRpbmcgZXZlbnRzLgogICAgICAgICAgICBUaGlzIGNsYXNzIHdpbGwgZW1pdCBldmVudHMgZHVyaW5nIHBhcnRzIG9mIHRoZSBhcmd1bWVudAogICAgICAgICAgICBwYXJzaW5nIHByb2Nlc3MuICBUaGlzIGV2ZW50IGVtaXR0ZXIgaXMgd2hhdCBpcyB1c2VkIHRvIGVtaXQKICAgICAgICAgICAgc3VjaCBldmVudHMuCgogICAgICAgIDp0eXBlIGlzX3JlcXVpcmVkOiBib29sZWFuCiAgICAgICAgOnBhcmFtIGlzX3JlcXVpcmVkOiBJbmRpY2F0ZXMgaWYgdGhpcyBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgb3Igbm90LgoKICAgICAgICAiIiIKICAgICAgICBzZWxmLl9uYW1lID0gbmFtZQogICAgICAgICMgVGhpcyBpcyB0aGUgbmFtZSB3ZSBuZWVkIHRvIHVzZSB3aGVuIGNvbnN0cnVjdGluZyB0aGUgcGFyYW1ldGVycwogICAgICAgICMgZGljdCB3ZSBzZW5kIHRvIGJvdG9jb3JlLiAgV2hpbGUgd2UgY2FuIGNoYW5nZSB0aGUgLm5hbWUgYXR0cmlidXRlCiAgICAgICAgIyB3aGljaCBpcyB0aGUgbmFtZSBleHBvc2VkIGluIHRoZSBDTEksIHRoZSBzZXJpYWxpemVkIG5hbWUgd2UgdXNlCiAgICAgICAgIyBmb3IgYm90b2NvcmUgaXMgaW52YXJpYW50IGFuZCBzaG91bGQgbm90IGJlIGNoYW5nZWQuCiAgICAgICAgaWYgc2VyaWFsaXplZF9uYW1lIGlzIE5vbmU6CiAgICAgICAgICAgIHNlcmlhbGl6ZWRfbmFtZSA9IG5hbWUKICAgICAgICBzZWxmLl9zZXJpYWxpemVkX25hbWUgPSBzZXJpYWxpemVkX25hbWUKICAgICAgICBzZWxmLmFyZ3VtZW50X21vZGVsID0gYXJndW1lbnRfbW9kZWwKICAgICAgICBzZWxmLl9yZXF1aXJlZCA9IGlzX3JlcXVpcmVkCiAgICAgICAgc2VsZi5fb3BlcmF0aW9uX21vZGVsID0gb3BlcmF0aW9uX21vZGVsCiAgICAgICAgc2VsZi5fZXZlbnRfZW1pdHRlciA9IGV2ZW50X2VtaXR0ZXIKICAgICAgICBzZWxmLl9kb2N1bWVudGF0aW9uID0gYXJndW1lbnRfbW9kZWwuZG9jdW1lbnRhdGlvbgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHB5X25hbWUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX25hbWUucmVwbGFjZSgnLScsICdfJykKCiAgICBAcHJvcGVydHkKICAgIGRlZiByZXF1aXJlZChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fcmVxdWlyZWQKCiAgICBAcmVxdWlyZWQuc2V0dGVyCiAgICBkZWYgcmVxdWlyZWQoc2VsZiwgdmFsdWUpOgogICAgICAgIHNlbGYuX3JlcXVpcmVkID0gdmFsdWUKCiAgICBAcHJvcGVydHkKICAgIGRlZiBkb2N1bWVudGF0aW9uKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLl9kb2N1bWVudGF0aW9uCgogICAgQGRvY3VtZW50YXRpb24uc2V0dGVyCiAgICBkZWYgZG9jdW1lbnRhdGlvbihzZWxmLCB2YWx1ZSk6CiAgICAgICAgc2VsZi5fZG9jdW1lbnRhdGlvbiA9IHZhbHVlCgogICAgQHByb3BlcnR5CiAgICBkZWYgY2xpX3R5cGVfbmFtZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5hcmd1bWVudF9tb2RlbC50eXBlX25hbWUKCiAgICBAcHJvcGVydHkKICAgIGRlZiBjbGlfdHlwZShzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5UWVBFX01BUC5nZXQoc2VsZi5hcmd1bWVudF9tb2RlbC50eXBlX25hbWUsIHN0cikKCiAgICBkZWYgYWRkX3RvX3BhcnNlcihzZWxmLCBwYXJzZXIpOgogICAgICAgICIiIgoKICAgICAgICBTZWUgdGhlIGBgQmFzZUNMSUFyZ3VtZW50LmFkZF90b19wYXJzZXJgYCBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9uLgoKICAgICAgICAiIiIKICAgICAgICBjbGlfbmFtZSA9IHNlbGYuY2xpX25hbWUKICAgICAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICBjbGlfbmFtZSwKICAgICAgICAgICAgaGVscD1zZWxmLmRvY3VtZW50YXRpb24sCiAgICAgICAgICAgIHR5cGU9c2VsZi5jbGlfdHlwZSwKICAgICAgICAgICAgcmVxdWlyZWQ9c2VsZi5yZXF1aXJlZCkKCiAgICBkZWYgYWRkX3RvX3BhcmFtcyhzZWxmLCBwYXJhbWV0ZXJzLCB2YWx1ZSk6CiAgICAgICAgaWYgdmFsdWUgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBUaGlzIGlzIGEgdHdvIHN0ZXAgcHJvY2Vzcy4gIEZpcnN0IGlzIHRoZSBwcm9jZXNzIG9mIGNvbnZlcnRpbmcKICAgICAgICAgICAgIyB0aGUgY29tbWFuZCBsaW5lIHZhbHVlIGludG8gYSBweXRob24gdmFsdWUuICBOb3JtYWxseSB0aGlzIGlzCiAgICAgICAgICAgICMgaGFuZGxlZCBieSBhcmdwYXJzZSBkaXJlY3RseSwgYnV0IHRoZXJlIGFyZSBjYXNlcyB3aGVyZSBleHRyYQogICAgICAgICAgICAjIHByb2Nlc3NpbmcgaXMgbmVlZGVkLiAgRm9yIGV4YW1wbGUsICItLWZvbyBuYW1lPXZhbHVlIiB0aGUgdmFsdWUKICAgICAgICAgICAgIyBjYW4gYmUgY29udmVydGVkIGZyb20gIm5hbWU9dmFsdWUiIHRvIHsibmFtZSI6ICJ2YWx1ZSJ9LiAgVGhpcyBpcwogICAgICAgICAgICAjIHJlZmVycmVkIHRvIGFzIHRoZSAidW5wYWNraW5nIiBwcm9jZXNzLiAgT25jZSB3ZSd2ZSB1bnBhY2tlZCB0aGUKICAgICAgICAgICAgIyBhcmd1bWVudCB2YWx1ZSwgd2UgaGF2ZSB0byBkZWNpZGUgaG93IHRoaXMgaXMgY29udmVydGVkIGludG8KICAgICAgICAgICAgIyBzb21ldGhpbmcgdGhhdCBjYW4gYmUgY29uc3VtZWQgYnkgYm90b2NvcmUuICBNYW55IHRpbWVzIHRoaXMgaXMKICAgICAgICAgICAgIyBqdXN0IGFzc29jaWF0aW5nIHRoZSBrZXkgYW5kIHZhbHVlIGluIHRoZSBwYXJhbXMgZGljdCBhcyBkb3duCiAgICAgICAgICAgICMgYmVsb3cuICBTb21ldGltZXMgdGhpcyBjYW4gYmUgbW9yZSBjb21wbGljYXRlZCwgYW5kIHN1YmNsYXNzZXMKICAgICAgICAgICAgIyBjYW4gY3VzdG9taXplIGFzIHRoZXkgbmVlZC4KICAgICAgICAgICAgdW5wYWNrZWQgPSBzZWxmLl91bnBhY2tfYXJndW1lbnQodmFsdWUpCiAgICAgICAgICAgIExPRy5kZWJ1ZygnVW5wYWNrZWQgdmFsdWUgb2YgJXIgZm9yIHBhcmFtZXRlciAiJXMiOiAlcicsIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgc2VsZi5weV9uYW1lLCB1bnBhY2tlZCkKICAgICAgICAgICAgcGFyYW1ldGVyc1tzZWxmLl9zZXJpYWxpemVkX25hbWVdID0gdW5wYWNrZWQKCiAgICBkZWYgX3VucGFja19hcmd1bWVudChzZWxmLCB2YWx1ZSk6CiAgICAgICAgc2VydmljZV9uYW1lID0gc2VsZi5fb3BlcmF0aW9uX21vZGVsLnNlcnZpY2VfbW9kZWwuc2VydmljZV9uYW1lCiAgICAgICAgb3BlcmF0aW9uX25hbWUgPSB4Zm9ybV9uYW1lKHNlbGYuX29wZXJhdGlvbl9tb2RlbC5uYW1lLCAnLScpCiAgICAgICAgb3ZlcnJpZGUgPSBzZWxmLl9lbWl0X2ZpcnN0X3Jlc3BvbnNlKCdwcm9jZXNzLWNsaS1hcmcuJXMuJXMnICUgKAogICAgICAgICAgICBzZXJ2aWNlX25hbWUsIG9wZXJhdGlvbl9uYW1lKSwgcGFyYW09c2VsZi5hcmd1bWVudF9tb2RlbCwKICAgICAgICAgICAgY2xpX2FyZ3VtZW50PXNlbGYsIHZhbHVlPXZhbHVlKQogICAgICAgIGlmIG92ZXJyaWRlIGlzIG5vdCBOb25lOgogICAgICAgICAgICAjIEEgcGx1Z2luIHN1cHBsaWVkIGFuIGFsdGVybmF0ZSBjb252ZXJzaW9uLAogICAgICAgICAgICAjIHVzZSBpdCBpbnN0ZWFkLgogICAgICAgICAgICByZXR1cm4gb3ZlcnJpZGUKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIEZhbGwgYmFjayB0byB0aGUgZGVmYXVsdCBhcmcgcHJvY2Vzc2luZy4KICAgICAgICAgICAgcmV0dXJuIHVucGFja19jbGlfYXJnKHNlbGYsIHZhbHVlKQoKICAgIGRlZiBfZW1pdChzZWxmLCBuYW1lLCAqKmt3YXJncyk6CiAgICAgICAgcmV0dXJuIHNlbGYuX2V2ZW50X2VtaXR0ZXIuZW1pdChuYW1lLCAqKmt3YXJncykKCiAgICBkZWYgX2VtaXRfZmlyc3RfcmVzcG9uc2Uoc2VsZiwgbmFtZSwgKiprd2FyZ3MpOgogICAgICAgIHJlc3BvbnNlcyA9IHNlbGYuX2VtaXQobmFtZSwgKiprd2FyZ3MpCiAgICAgICAgcmV0dXJuIGZpcnN0X25vbl9ub25lX3Jlc3BvbnNlKHJlc3BvbnNlcykKCgpjbGFzcyBMaXN0QXJndW1lbnQoQ0xJQXJndW1lbnQpOgoKICAgIGRlZiBhZGRfdG9fcGFyc2VyKHNlbGYsIHBhcnNlcik6CiAgICAgICAgY2xpX25hbWUgPSBzZWxmLmNsaV9uYW1lCiAgICAgICAgcGFyc2VyLmFkZF9hcmd1bWVudChjbGlfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hcmdzPScqJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9c2VsZi5jbGlfdHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkPXNlbGYucmVxdWlyZWQpCgoKY2xhc3MgQm9vbGVhbkFyZ3VtZW50KENMSUFyZ3VtZW50KToKICAgICIiIlJlcHJlc2VudCBhIGJvb2xlYW4gQ0xJIGFyZ3VtZW50LgoKICAgIEEgYm9vbGVhbiBwYXJhbWV0ZXIgaXMgc3BlY2lmaWVkIHdpdGhvdXQgYSB2YWx1ZTo6CgogICAgICAgIGF3cyBmb28gYmFyIC0tZW5hYmxlZAoKICAgIEZvciBjYXNlcyB3aGVyZSB0aGUgYm9vbGVhbiBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgd2UgbmVlZCB0byBhZGQKICAgIHR3byBwYXJhbWV0ZXJzOjoKCiAgICAgICAgYXdzIGZvbyBiYXIgLS1lbmFibGVkCiAgICAgICAgYXdzIGZvbyBiYXIgLS1uby1lbmFibGVkCgogICAgV2UgdXNlIHRoZSBjYXBhYmlsaXRpZXMgb2YgdGhlIENMSUFyZ3VtZW50IHRvIGhlbHAgYWNoaWV2ZSB0aGlzLgoKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lLCBhcmd1bWVudF9tb2RlbCwgb3BlcmF0aW9uX21vZGVsLAogICAgICAgICAgICAgICAgIGV2ZW50X2VtaXR0ZXIsCiAgICAgICAgICAgICAgICAgaXNfcmVxdWlyZWQ9RmFsc2UsIGFjdGlvbj0nc3RvcmVfdHJ1ZScsIGRlc3Q9Tm9uZSwKICAgICAgICAgICAgICAgICBncm91cF9uYW1lPU5vbmUsIGRlZmF1bHQ9Tm9uZSwKICAgICAgICAgICAgICAgICBzZXJpYWxpemVkX25hbWU9Tm9uZSk6CiAgICAgICAgc3VwZXIoQm9vbGVhbkFyZ3VtZW50LCBzZWxmKS5fX2luaXRfXyhuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRfbW9kZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25fbW9kZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF9lbWl0dGVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcmVxdWlyZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJpYWxpemVkX25hbWU9c2VyaWFsaXplZF9uYW1lKQogICAgICAgIHNlbGYuX211dGV4X2dyb3VwID0gTm9uZQogICAgICAgIHNlbGYuX2FjdGlvbiA9IGFjdGlvbgogICAgICAgIGlmIGRlc3QgaXMgTm9uZToKICAgICAgICAgICAgc2VsZi5fZGVzdGluYXRpb24gPSBzZWxmLnB5X25hbWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9kZXN0aW5hdGlvbiA9IGRlc3QKICAgICAgICBpZiBncm91cF9uYW1lIGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYuX2dyb3VwX25hbWUgPSBzZWxmLm5hbWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9ncm91cF9uYW1lID0gZ3JvdXBfbmFtZQogICAgICAgIHNlbGYuX2RlZmF1bHQgPSBkZWZhdWx0CgogICAgZGVmIGFkZF90b19wYXJhbXMoc2VsZiwgcGFyYW1ldGVycywgdmFsdWUpOgogICAgICAgICMgSWYgYSB2YWx1ZSB3YXMgZXhwbGljaXRseSBzcGVjaWZpZWQgKHNvIHZhbHVlIGlzIFRydWUvRmFsc2UKICAgICAgICAjIGJ1dCAqbm90KiBOb25lKSB0aGVuIHdlIGFkZCBpdCB0byB0aGUgcGFyYW1zIGRpY3QuCiAgICAgICAgIyBJZiB0aGUgdmFsdWUgd2FzIG5vdCBleHBsaWNpdGx5IHNldCAodmFsdWUgaXMgTm9uZSkKICAgICAgICAjIHdlIGRvbid0IGFkZCBpdCB0byB0aGUgcGFyYW1zIGRpY3QuCiAgICAgICAgaWYgdmFsdWUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHBhcmFtZXRlcnNbc2VsZi5fc2VyaWFsaXplZF9uYW1lXSA9IHZhbHVlCgogICAgZGVmIGFkZF90b19hcmdfdGFibGUoc2VsZiwgYXJndW1lbnRfdGFibGUpOgogICAgICAgICMgQm9vbGVhbiBwYXJhbWV0ZXJzIGFyZSBhIGJpdCB0cmlja3kuICBGb3IgYSBzaW5nbGUgYm9vbGVhbiBwYXJhbWV0ZXIKICAgICAgICAjIHdlIGFjdHVhbGx5IHdhbnQgdHdvIENMSSBwYXJhbXMsIGEgLS1mb28sIGFuZCBhIC0tbm8tZm9vLiAgVG8gZG8gdGhpcwogICAgICAgICMgd2UgbmVlZCB0byBhZGQgdHdvIGVudHJpZXMgdG8gdGhlIGFyZ3VtZW50IHRhYmxlLiAgU28gd2UgY2FuIGFkZAogICAgICAgICMgb3Vyc2VsZiBhcyB0aGUgcG9zaXRpdmUgb3B0aW9uICgtLW5vKSwgYW5kIHRoZW4gY3JlYXRlIGEgY2xvbmUgb2YKICAgICAgICAjIG91cnNlbHZlcyBmb3IgdGhlIG5lZ2F0aXZlIHNlcnZpY2UuICBXZSB0aGVuIGluc2VydCBib3RoIGludG8gdGhlCiAgICAgICAgIyBhcmcgdGFibGUuCiAgICAgICAgYXJndW1lbnRfdGFibGVbc2VsZi5uYW1lXSA9IHNlbGYKICAgICAgICBuZWdhdGl2ZV9uYW1lID0gJ25vLSVzJyAlIHNlbGYubmFtZQogICAgICAgIG5lZ2F0aXZlX3ZlcnNpb24gPSBzZWxmLl9fY2xhc3NfXygKICAgICAgICAgICAgbmVnYXRpdmVfbmFtZSwgc2VsZi5hcmd1bWVudF9tb2RlbCwKICAgICAgICAgICAgc2VsZi5fb3BlcmF0aW9uX21vZGVsLCBzZWxmLl9ldmVudF9lbWl0dGVyLAogICAgICAgICAgICBhY3Rpb249J3N0b3JlX2ZhbHNlJywgZGVzdD1zZWxmLl9kZXN0aW5hdGlvbiwKICAgICAgICAgICAgZ3JvdXBfbmFtZT1zZWxmLmdyb3VwX25hbWUsIHNlcmlhbGl6ZWRfbmFtZT1zZWxmLl9zZXJpYWxpemVkX25hbWUpCiAgICAgICAgYXJndW1lbnRfdGFibGVbbmVnYXRpdmVfbmFtZV0gPSBuZWdhdGl2ZV92ZXJzaW9uCgogICAgZGVmIGFkZF90b19wYXJzZXIoc2VsZiwgcGFyc2VyKToKICAgICAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KHNlbGYuY2xpX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPXNlbGYuZG9jdW1lbnRhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbj1zZWxmLl9hY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0PXNlbGYuX2RlZmF1bHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0PXNlbGYuX2Rlc3RpbmF0aW9uKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGdyb3VwX25hbWUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX2dyb3VwX25hbWUK
