statistics:
  total_files: 1
  skipped_files: 0.0
  processed_objects: 1
  malicious_objects: 0
details:
- path: .repo_cache/malicious_repos/pypi_malregistry/awscl/1.27.67/awscl-1.27.67/awscl-1.27.67/awscli/customizations/waiters.py
  contents:
  - name: WaiterStateDocBuilder.__init__
    score: null
    code: |-
      def __init__(self, waiter_config):
              self._waiter_config = waiter_config
    tokens: resume load_fast waiter_config load_fast self store_attr _waiter_config return_const None
    hash: 231839318a7050156761e327b5c920f1a47693cb8b5d9fc33aa8c9c6282018c2
sources:
  .repo_cache/malicious_repos/pypi_malregistry/awscl/1.27.67/awscl-1.27.67/awscl-1.27.67/awscli/customizations/waiters.py: IyBDb3B5cmlnaHQgMjAxNCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgojCiMgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIikuIFlvdQojIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBBIGNvcHkgb2YKIyB0aGUgTGljZW5zZSBpcyBsb2NhdGVkIGF0CiMKIyAgICAgaHR0cDovL2F3cy5hbWF6b24uY29tL2FwYWNoZTIuMC8KIwojIG9yIGluIHRoZSAibGljZW5zZSIgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMKIyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRgojIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYwojIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCmZyb20gYm90b2NvcmUgaW1wb3J0IHhmb3JtX25hbWUKZnJvbSBib3RvY29yZS5leGNlcHRpb25zIGltcG9ydCBEYXRhTm90Rm91bmRFcnJvcgoKZnJvbSBhd3NjbGkuY2xpZHJpdmVyIGltcG9ydCBTZXJ2aWNlT3BlcmF0aW9uCmZyb20gYXdzY2xpLmN1c3RvbWl6YXRpb25zLmNvbW1hbmRzIGltcG9ydCBCYXNpY0NvbW1hbmQsIEJhc2ljSGVscCwgXAogICAgQmFzaWNEb2NIYW5kbGVyCgoKZGVmIHJlZ2lzdGVyX2FkZF93YWl0ZXJzKGNsaSk6CiAgICBjbGkucmVnaXN0ZXIoJ2J1aWxkaW5nLWNvbW1hbmQtdGFibGUnLCBhZGRfd2FpdGVycykKCgpkZWYgYWRkX3dhaXRlcnMoY29tbWFuZF90YWJsZSwgc2Vzc2lvbiwgY29tbWFuZF9vYmplY3QsICoqa3dhcmdzKToKICAgICMgQ2hlY2sgaWYgdGhlIGNvbW1hbmQgb2JqZWN0IHBhc3NlZCBpbiBoYXMgYSBgYHNlcnZpY2Vfb2JqZWN0YGAuIFdlCiAgICAjIG9ubHkgd2FudCB0byBhZGQgd2FpdCBjb21tYW5kcyB0byB0b3AgbGV2ZWwgbW9kZWwtZHJpdmVuIHNlcnZpY2VzLgogICAgIyBUaGVzZSByZXF1aXJlIHNlcnZpY2Ugb2JqZWN0cy4KICAgIHNlcnZpY2VfbW9kZWwgPSBnZXRhdHRyKGNvbW1hbmRfb2JqZWN0LCAnc2VydmljZV9tb2RlbCcsIE5vbmUpCiAgICBpZiBzZXJ2aWNlX21vZGVsIGlzIG5vdCBOb25lOgogICAgICAgICMgR2V0IGEgY2xpZW50IG91dCBvZiB0aGUgc2VydmljZSBvYmplY3QuCiAgICAgICAgd2FpdGVyX21vZGVsID0gZ2V0X3dhaXRlcl9tb2RlbF9mcm9tX3NlcnZpY2VfbW9kZWwoc2Vzc2lvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlX21vZGVsKQogICAgICAgIGlmIHdhaXRlcl9tb2RlbCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4KICAgICAgICB3YWl0ZXJfbmFtZXMgPSB3YWl0ZXJfbW9kZWwud2FpdGVyX25hbWVzCiAgICAgICAgIyBJZiB0aGVyZSBhcmUgd2FpdGVycyBtYWtlIGEgd2FpdCBjb21tYW5kLgogICAgICAgIGlmIHdhaXRlcl9uYW1lczoKICAgICAgICAgICAgY29tbWFuZF90YWJsZVsnd2FpdCddID0gV2FpdENvbW1hbmQoCiAgICAgICAgICAgICAgICBzZXNzaW9uLCB3YWl0ZXJfbW9kZWwsIHNlcnZpY2VfbW9kZWwpCgoKZGVmIGdldF93YWl0ZXJfbW9kZWxfZnJvbV9zZXJ2aWNlX21vZGVsKHNlc3Npb24sIHNlcnZpY2VfbW9kZWwpOgogICAgdHJ5OgogICAgICAgIG1vZGVsID0gc2Vzc2lvbi5nZXRfd2FpdGVyX21vZGVsKHNlcnZpY2VfbW9kZWwuc2VydmljZV9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VfbW9kZWwuYXBpX3ZlcnNpb24pCiAgICBleGNlcHQgRGF0YU5vdEZvdW5kRXJyb3I6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIHJldHVybiBtb2RlbAoKCmNsYXNzIFdhaXRDb21tYW5kKEJhc2ljQ29tbWFuZCk6CiAgICBOQU1FID0gJ3dhaXQnCiAgICBERVNDUklQVElPTiA9ICgnV2FpdCB1bnRpbCBhIHBhcnRpY3VsYXIgY29uZGl0aW9uIGlzIHNhdGlzZmllZC4gRWFjaCAnCiAgICAgICAgICAgICAgICAgICdzdWJjb21tYW5kIHBvbGxzIGFuIEFQSSB1bnRpbCB0aGUgbGlzdGVkIHJlcXVpcmVtZW50ICcKICAgICAgICAgICAgICAgICAgJ2lzIG1ldC4nKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzZXNzaW9uLCB3YWl0ZXJfbW9kZWwsIHNlcnZpY2VfbW9kZWwpOgogICAgICAgIHNlbGYuX21vZGVsID0gd2FpdGVyX21vZGVsCiAgICAgICAgc2VsZi5fc2VydmljZV9tb2RlbCA9IHNlcnZpY2VfbW9kZWwKICAgICAgICBzZWxmLndhaXRlcl9jbWRfYnVpbGRlciA9IFdhaXRlclN0YXRlQ29tbWFuZEJ1aWxkZXIoCiAgICAgICAgICAgIHNlc3Npb249c2Vzc2lvbiwKICAgICAgICAgICAgbW9kZWw9c2VsZi5fbW9kZWwsCiAgICAgICAgICAgIHNlcnZpY2VfbW9kZWw9c2VsZi5fc2VydmljZV9tb2RlbAogICAgICAgICkKICAgICAgICBzdXBlcihXYWl0Q29tbWFuZCwgc2VsZikuX19pbml0X18oc2Vzc2lvbikKCiAgICBkZWYgX3J1bl9tYWluKHNlbGYsIHBhcnNlZF9hcmdzLCBwYXJzZWRfZ2xvYmFscyk6CiAgICAgICAgaWYgcGFyc2VkX2FyZ3Muc3ViY29tbWFuZCBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ1c2FnZTogYXdzIFtvcHRpb25zXSA8Y29tbWFuZD4gPHN1YmNvbW1hbmQ+ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiW3BhcmFtZXRlcnNdXG5hd3M6IGVycm9yOiB0b28gZmV3IGFyZ3VtZW50cyIpCgogICAgZGVmIF9idWlsZF9zdWJjb21tYW5kX3RhYmxlKHNlbGYpOgogICAgICAgIHN1YmNvbW1hbmRfdGFibGUgPSBzdXBlcihXYWl0Q29tbWFuZCwgc2VsZikuX2J1aWxkX3N1YmNvbW1hbmRfdGFibGUoKQogICAgICAgIHNlbGYud2FpdGVyX2NtZF9idWlsZGVyLmJ1aWxkX2FsbF93YWl0ZXJfc3RhdGVfY21kcyhzdWJjb21tYW5kX3RhYmxlKQogICAgICAgIHNlbGYuX2FkZF9saW5lYWdlKHN1YmNvbW1hbmRfdGFibGUpCiAgICAgICAgcmV0dXJuIHN1YmNvbW1hbmRfdGFibGUKCiAgICBkZWYgY3JlYXRlX2hlbHBfY29tbWFuZChzZWxmKToKICAgICAgICByZXR1cm4gQmFzaWNIZWxwKHNlbGYuX3Nlc3Npb24sIHNlbGYsCiAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kX3RhYmxlPXNlbGYuc3ViY29tbWFuZF90YWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ190YWJsZT1zZWxmLmFyZ190YWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2hhbmRsZXJfY2xhc3M9V2FpdGVyQ29tbWFuZERvY0hhbmRsZXIpCgoKY2xhc3MgV2FpdGVyU3RhdGVDb21tYW5kQnVpbGRlcihvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHNlc3Npb24sIG1vZGVsLCBzZXJ2aWNlX21vZGVsKToKICAgICAgICBzZWxmLl9zZXNzaW9uID0gc2Vzc2lvbgogICAgICAgIHNlbGYuX21vZGVsID0gbW9kZWwKICAgICAgICBzZWxmLl9zZXJ2aWNlX21vZGVsID0gc2VydmljZV9tb2RlbAoKICAgIGRlZiBidWlsZF9hbGxfd2FpdGVyX3N0YXRlX2NtZHMoc2VsZiwgc3ViY29tbWFuZF90YWJsZSk6CiAgICAgICAgIiIiVGhpcyBhZGRzIHdhaXRlciBzdGF0ZSBjb21tYW5kcyB0byB0aGUgc3ViY29tbWFuZCB0YWJsZSBwYXNzZWQgaW4uCgogICAgICAgIFRoaXMgaXMgdGhlIG1ldGhvZCB0aGF0IGFkZHMgd2FpdGVyIHN0YXRlIGNvbW1hbmRzIGxpa2UKICAgICAgICBgYGluc3RhbmNlLXJ1bm5pbmdgYCB0byBgYGVjMiB3YWl0YGAuCiAgICAgICAgIiIiCiAgICAgICAgd2FpdGVyX25hbWVzID0gc2VsZi5fbW9kZWwud2FpdGVyX25hbWVzCiAgICAgICAgZm9yIHdhaXRlcl9uYW1lIGluIHdhaXRlcl9uYW1lczoKICAgICAgICAgICAgd2FpdGVyX2NsaV9uYW1lID0geGZvcm1fbmFtZSh3YWl0ZXJfbmFtZSwgJy0nKQogICAgICAgICAgICBzdWJjb21tYW5kX3RhYmxlW3dhaXRlcl9jbGlfbmFtZV0gPSBcCiAgICAgICAgICAgICAgICBzZWxmLl9idWlsZF93YWl0ZXJfc3RhdGVfY21kKHdhaXRlcl9uYW1lKQoKICAgIGRlZiBfYnVpbGRfd2FpdGVyX3N0YXRlX2NtZChzZWxmLCB3YWl0ZXJfbmFtZSk6CiAgICAgICAgIyBHZXQgdGhlIHdhaXRlcgogICAgICAgIHdhaXRlcl9jb25maWcgPSBzZWxmLl9tb2RlbC5nZXRfd2FpdGVyKHdhaXRlcl9uYW1lKQoKICAgICAgICAjIENyZWF0ZSB0aGUgY2xpIG5hbWUgZm9yIHRoZSB3YWl0ZXIgb3BlcmF0aW9uCiAgICAgICAgd2FpdGVyX2NsaV9uYW1lID0geGZvcm1fbmFtZSh3YWl0ZXJfbmFtZSwgJy0nKQoKICAgICAgICAjIE9idGFpbiB0aGUgbmFtZSBvZiB0aGUgc2VydmljZSBvcGVyYXRpb24gdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudAogICAgICAgICMgdGhlIHNwZWNpZmllZCB3YWl0ZXIuCiAgICAgICAgb3BlcmF0aW9uX25hbWUgPSB3YWl0ZXJfY29uZmlnLm9wZXJhdGlvbgoKICAgICAgICAjIENyZWF0ZSBhbiBvcGVyYXRpb24gb2JqZWN0IHRvIG1ha2UgYSBjb21tYW5kIGZvciB0aGUgd2FpdGVyLiBUaGUKICAgICAgICAjIG9wZXJhdGlvbiBvYmplY3QgaXMgdXNlZCB0byBnZW5lcmF0ZSB0aGUgYXJndW1lbnRzIGZvciB0aGUgd2FpdGVyCiAgICAgICAgIyBzdGF0ZSBjb21tYW5kLgogICAgICAgIG9wZXJhdGlvbl9tb2RlbCA9IHNlbGYuX3NlcnZpY2VfbW9kZWwub3BlcmF0aW9uX21vZGVsKG9wZXJhdGlvbl9uYW1lKQoKICAgICAgICB3YWl0ZXJfc3RhdGVfY29tbWFuZCA9IFdhaXRlclN0YXRlQ29tbWFuZCgKICAgICAgICAgICAgbmFtZT13YWl0ZXJfY2xpX25hbWUsIHBhcmVudF9uYW1lPSd3YWl0JywKICAgICAgICAgICAgb3BlcmF0aW9uX2NhbGxlcj1XYWl0ZXJDYWxsZXIoc2VsZi5fc2Vzc2lvbiwgd2FpdGVyX25hbWUpLAogICAgICAgICAgICBzZXNzaW9uPXNlbGYuX3Nlc3Npb24sCiAgICAgICAgICAgIG9wZXJhdGlvbl9tb2RlbD1vcGVyYXRpb25fbW9kZWwsCiAgICAgICAgKQogICAgICAgICMgQnVpbGQgdGhlIHRvcCBsZXZlbCBkZXNjcmlwdGlvbiBmb3IgdGhlIHdhaXRlciBzdGF0ZSBjb21tYW5kLgogICAgICAgICMgTW9zdCB3YWl0ZXJzIGRvIG5vdCBoYXZlIGEgZGVzY3JpcHRpb24gc28gdGhleSBuZWVkIHRvIGJlIGdlbmVyYXRlZAogICAgICAgICMgdXNpbmcgdGhlIHdhaXRlciBjb25maWd1cmF0aW9uLgogICAgICAgIHdhaXRlcl9zdGF0ZV9kb2NfYnVpbGRlciA9IFdhaXRlclN0YXRlRG9jQnVpbGRlcih3YWl0ZXJfY29uZmlnKQogICAgICAgIGRlc2NyaXB0aW9uID0gd2FpdGVyX3N0YXRlX2RvY19idWlsZGVyLmJ1aWxkX3dhaXRlcl9zdGF0ZV9kZXNjcmlwdGlvbigpCiAgICAgICAgd2FpdGVyX3N0YXRlX2NvbW1hbmQuREVTQ1JJUFRJT04gPSBkZXNjcmlwdGlvbgogICAgICAgIHJldHVybiB3YWl0ZXJfc3RhdGVfY29tbWFuZAoKCmNsYXNzIFdhaXRlclN0YXRlRG9jQnVpbGRlcihvYmplY3QpOgogICAgU1VDQ0VTU19ERVNDUklQVElPTlMgPSB7CiAgICAgICAgJ2Vycm9yJzogdSclcyBpcyB0aHJvd24gJywKICAgICAgICAncGF0aCc6IHUnJXMgJywKICAgICAgICAncGF0aEFsbCc6IHUnJXMgZm9yIGFsbCBlbGVtZW50cyAnLAogICAgICAgICdwYXRoQW55JzogdSclcyBmb3IgYW55IGVsZW1lbnQgJywKICAgICAgICAnc3RhdHVzJzogdSclcyByZXNwb25zZSBpcyByZWNlaXZlZCAnCiAgICB9CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHdhaXRlcl9jb25maWcpOgogICAgICAgIHNlbGYuX3dhaXRlcl9jb25maWcgPSB3YWl0ZXJfY29uZmlnCgogICAgZGVmIGJ1aWxkX3dhaXRlcl9zdGF0ZV9kZXNjcmlwdGlvbihzZWxmKToKICAgICAgICBkZXNjcmlwdGlvbiA9IHNlbGYuX3dhaXRlcl9jb25maWcuZGVzY3JpcHRpb24KICAgICAgICAjIFVzZSB0aGUgZGVzY3JpcHRpb24gcHJvdmlkZWQgaW4gdGhlIHdhaXRlciBjb25maWcgZmlsZS4gSWYgbm8KICAgICAgICAjIGRlc2NyaXB0aW9uIGlzIHByb3ZpZGVkLCB1c2UgYSBoZXVyaXN0aWMgdG8gZ2VuZXJhdGUgYSBkZXNjcmlwdGlvbgogICAgICAgICMgZm9yIHRoZSB3YWl0ZXIuCiAgICAgICAgaWYgbm90IGRlc2NyaXB0aW9uOgogICAgICAgICAgICBkZXNjcmlwdGlvbiA9IHUnV2FpdCB1bnRpbCAnCiAgICAgICAgICAgICMgTG9vayBhdCBhbGwgb2YgdGhlIGFjY2VwdG9ycyBhbmQgZmluZCB0aGUgc3VjY2VzcyBzdGF0ZQogICAgICAgICAgICAjIGFjY2VwdG9yLgogICAgICAgICAgICBmb3IgYWNjZXB0b3IgaW4gc2VsZi5fd2FpdGVyX2NvbmZpZy5hY2NlcHRvcnM6CiAgICAgICAgICAgICAgICAjIEJ1aWxkIHRoZSBkZXNjcmlwdGlvbiBvZmYgb2YgdGhlIHN1Y2Nlc3MgYWNjZXB0b3IuCiAgICAgICAgICAgICAgICBpZiBhY2NlcHRvci5zdGF0ZSA9PSAnc3VjY2Vzcyc6CiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gKz0gc2VsZi5fYnVpbGRfc3VjY2Vzc19kZXNjcmlwdGlvbihhY2NlcHRvcikKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAjIEluY2x1ZGUgd2hhdCBvcGVyYXRpb24gaXMgYmVpbmcgdXNlZC4KICAgICAgICAgICAgZGVzY3JpcHRpb24gKz0gc2VsZi5fYnVpbGRfb3BlcmF0aW9uX2Rlc2NyaXB0aW9uKAogICAgICAgICAgICAgICAgc2VsZi5fd2FpdGVyX2NvbmZpZy5vcGVyYXRpb24pCiAgICAgICAgZGVzY3JpcHRpb24gKz0gc2VsZi5fYnVpbGRfcG9sbGluZ19kZXNjcmlwdGlvbigKICAgICAgICAgICAgc2VsZi5fd2FpdGVyX2NvbmZpZy5kZWxheSwgc2VsZi5fd2FpdGVyX2NvbmZpZy5tYXhfYXR0ZW1wdHMpCiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uCgogICAgZGVmIF9idWlsZF9zdWNjZXNzX2Rlc2NyaXB0aW9uKHNlbGYsIGFjY2VwdG9yKToKICAgICAgICBtYXRjaGVyID0gYWNjZXB0b3IubWF0Y2hlcgogICAgICAgICMgUGljayB0aGUgZGVzY3JpcHRpb24gdGVtcGxhdGUgdG8gdXNlIGJhc2VkIG9uIHdoYXQgdGhlIG1hdGNoZXIgaXMuCiAgICAgICAgc3VjY2Vzc19kZXNjcmlwdGlvbiA9IHNlbGYuU1VDQ0VTU19ERVNDUklQVElPTlNbbWF0Y2hlcl0KICAgICAgICByZXNvdXJjZV9kZXNjcmlwdGlvbiA9IE5vbmUKICAgICAgICAjIElmIHN1Y2Nlc3MgaXMgYmFzZWQgb2ZmIG9mIHRoZSBzdGF0ZSBvZiBhIHJlc291cmNlIGluY2x1ZGUgdGhlCiAgICAgICAgIyBkZXNjcmlwdGlvbiBhYm91dCB3aGF0IHJlc291cmNlIGlzIGxvb2tlZCBhdC4KICAgICAgICBpZiBtYXRjaGVyIGluIFsncGF0aCcsICdwYXRoQW55JywgJ3BhdGhBbGwnXToKICAgICAgICAgICAgcmVzb3VyY2VfZGVzY3JpcHRpb24gPSB1J0pNRVNQYXRoIHF1ZXJ5ICVzIHJldHVybnMgJyAlIFwKICAgICAgICAgICAgICAgIGFjY2VwdG9yLmFyZ3VtZW50CiAgICAgICAgICAgICMgUHJlcGVuZCB0aGUgcmVzb3VyY2UgZGVzY3JpcHRpb24gdG8gdGhlIHRlbXBsYXRlIGRlc2NyaXB0aW9uCiAgICAgICAgICAgIHN1Y2Nlc3NfZGVzY3JpcHRpb24gPSByZXNvdXJjZV9kZXNjcmlwdGlvbiArIHN1Y2Nlc3NfZGVzY3JpcHRpb24KICAgICAgICAjIENvbXBsZXRlIHRoZSBkZXNjcmlwdGlvbiBieSBmaWxsaW5nIGluIHRoZSBleHBlY3RlZCBzdWNjZXNzIHN0YXRlLgogICAgICAgIGZ1bGxfc3VjY2Vzc19kZXNjcmlwdGlvbiA9IHN1Y2Nlc3NfZGVzY3JpcHRpb24gJSBhY2NlcHRvci5leHBlY3RlZAogICAgICAgIHJldHVybiBmdWxsX3N1Y2Nlc3NfZGVzY3JpcHRpb24KCiAgICBkZWYgX2J1aWxkX29wZXJhdGlvbl9kZXNjcmlwdGlvbihzZWxmLCBvcGVyYXRpb24pOgogICAgICAgIG9wZXJhdGlvbl9uYW1lID0geGZvcm1fbmFtZShvcGVyYXRpb24pLnJlcGxhY2UoJ18nLCAnLScpCiAgICAgICAgcmV0dXJuIHUnd2hlbiBwb2xsaW5nIHdpdGggYGAlc2BgLicgJSBvcGVyYXRpb25fbmFtZQoKICAgIGRlZiBfYnVpbGRfcG9sbGluZ19kZXNjcmlwdGlvbihzZWxmLCBkZWxheSwgbWF4X2F0dGVtcHRzKToKICAgICAgICBkZXNjcmlwdGlvbiA9ICgKICAgICAgICAgICAgJyBJdCB3aWxsIHBvbGwgZXZlcnkgJXMgc2Vjb25kcyB1bnRpbCBhIHN1Y2Nlc3NmdWwgc3RhdGUgJwogICAgICAgICAgICAnaGFzIGJlZW4gcmVhY2hlZC4gVGhpcyB3aWxsIGV4aXQgd2l0aCBhIHJldHVybiBjb2RlIG9mIDI1NSAnCiAgICAgICAgICAgICdhZnRlciAlcyBmYWlsZWQgY2hlY2tzLicKICAgICAgICAgICAgJSAoZGVsYXksIG1heF9hdHRlbXB0cykpCiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uCgoKY2xhc3MgV2FpdGVyQ2FsbGVyKG9iamVjdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgc2Vzc2lvbiwgd2FpdGVyX25hbWUpOgogICAgICAgIHNlbGYuX3Nlc3Npb24gPSBzZXNzaW9uCiAgICAgICAgc2VsZi5fd2FpdGVyX25hbWUgPSB3YWl0ZXJfbmFtZQoKICAgIGRlZiBpbnZva2Uoc2VsZiwgc2VydmljZV9uYW1lLCBvcGVyYXRpb25fbmFtZSwgcGFyYW1ldGVycywgcGFyc2VkX2dsb2JhbHMpOgogICAgICAgIGNsaWVudCA9IHNlbGYuX3Nlc3Npb24uY3JlYXRlX2NsaWVudCgKICAgICAgICAgICAgc2VydmljZV9uYW1lLCByZWdpb25fbmFtZT1wYXJzZWRfZ2xvYmFscy5yZWdpb24sCiAgICAgICAgICAgIGVuZHBvaW50X3VybD1wYXJzZWRfZ2xvYmFscy5lbmRwb2ludF91cmwsCiAgICAgICAgICAgIHZlcmlmeT1wYXJzZWRfZ2xvYmFscy52ZXJpZnlfc3NsKQogICAgICAgIHdhaXRlciA9IGNsaWVudC5nZXRfd2FpdGVyKHhmb3JtX25hbWUoc2VsZi5fd2FpdGVyX25hbWUpKQogICAgICAgIHdhaXRlci53YWl0KCoqcGFyYW1ldGVycykKICAgICAgICByZXR1cm4gMAoKCmNsYXNzIFdhaXRlclN0YXRlQ29tbWFuZChTZXJ2aWNlT3BlcmF0aW9uKToKICAgIERFU0NSSVBUSU9OID0gJycKCiAgICBkZWYgY3JlYXRlX2hlbHBfY29tbWFuZChzZWxmKToKICAgICAgICBoZWxwX2NvbW1hbmQgPSBzdXBlcihXYWl0ZXJTdGF0ZUNvbW1hbmQsIHNlbGYpLmNyZWF0ZV9oZWxwX2NvbW1hbmQoKQogICAgICAgICMgQ2hhbmdlIHRoZSBvcGVyYXRpb24gb2JqZWN0J3MgZGVzY3JpcHRpb24gYnkgY2hhbmdpbmcgaXQgdG8gdGhlCiAgICAgICAgIyBkZXNjcmlwdGlvbiBmb3IgYSB3YWl0ZXIgc3RhdGUgY29tbWFuZC4KICAgICAgICBzZWxmLl9vcGVyYXRpb25fbW9kZWwuZG9jdW1lbnRhdGlvbiA9IHNlbGYuREVTQ1JJUFRJT04KICAgICAgICAjIENoYW5nZSB0aGUgb3V0cHV0IHNoYXBlIGJlY2F1c2Ugd2FpdGVycyBwcm92aWRlIG5vIG91dHB1dC4KICAgICAgICBzZWxmLl9vcGVyYXRpb25fbW9kZWwub3V0cHV0X3NoYXBlID0gTm9uZQogICAgICAgIHJldHVybiBoZWxwX2NvbW1hbmQKCgpjbGFzcyBXYWl0ZXJDb21tYW5kRG9jSGFuZGxlcihCYXNpY0RvY0hhbmRsZXIpOgogICAgZGVmIGRvY19zeW5vcHNpc19zdGFydChzZWxmLCBoZWxwX2NvbW1hbmQsICoqa3dhcmdzKToKICAgICAgICBwYXNzCgogICAgZGVmIGRvY19zeW5vcHNpc19vcHRpb24oc2VsZiwgYXJnX25hbWUsIGhlbHBfY29tbWFuZCwgKiprd2FyZ3MpOgogICAgICAgIHBhc3MKCiAgICBkZWYgZG9jX3N5bm9wc2lzX2VuZChzZWxmLCBoZWxwX2NvbW1hbmQsICoqa3dhcmdzKToKICAgICAgICBwYXNzCgogICAgZGVmIGRvY19vcHRpb25zX3N0YXJ0KHNlbGYsIGhlbHBfY29tbWFuZCwgKiprd2FyZ3MpOgogICAgICAgIHBhc3MKCiAgICBkZWYgZG9jX29wdGlvbnNfZW5kKHNlbGYsIGhlbHBfY29tbWFuZCwgKiprd2FyZ3MpOgogICAgICAgIHBhc3MKCiAgICBkZWYgZG9jX29wdGlvbihzZWxmLCBhcmdfbmFtZSwgaGVscF9jb21tYW5kLCAqKmt3YXJncyk6CiAgICAgICAgcGFzcwo=
